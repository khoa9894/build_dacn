System.register("chunks:///_virtual/adsPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts","./type.ts"],(function(e){var t,n,i,o,r,l,a,u,c,p,s,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Label,u=e.Node,c=e.Sprite,p=e.director},function(e){s=e.BasePopup},function(e){f=e.TileConnect}],execute:function(){var d,h,m,b,g,v,y;r._RF.push({},"e4fb1lxX6pNMZ0iUKVaENoF","adsPopup",void 0);var w=l.ccclass,T=l.property;e("Ads",(d=w("Ads"),h=T(a),m=T(u),d((v=t((g=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,i(t,"countdownlabel",v,o(t)),i(t,"fill",y,o(t)),t.timer=5,t.currentTime=0,t}n(t,e);var r=t.prototype;return r.onPopupShow=function(e){var t=this.fill.getComponent(c);t&&(t.fillRange=1)},r.update=function(e){this.currentTime+=e;var t=Math.min(this.currentTime/this.timer,1),n=this.fill.getComponent(c);n&&(n.fillRange=1-t),this.currentTime>=this.timer&&this.onCountdownComplete()},r.onCountdownComplete=function(){this.countdownlabel.node.active=!0},r.onPopupHide=function(){this.countdownlabel.node.active=!1;var e=this.fill.getComponent(c);e&&(e.fillRange=1),p.emit(f.GAME_EVENTS.COUNTDOWN_RESET),this.currentTime=0},t}(s)).prototype,"countdownlabel",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(g.prototype,"fill",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=g))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/AdsTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts"],(function(n){var t,o,e,u,s;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){e=n.Popup},function(n){u=n.UImanager},function(n){s=n.BaseTurn}],execute:function(){o._RF.push({},"8a66cdks8FDq6yoo0NUkqll","AdsTurn",void 0);n("AdsTurn",function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var s=o.prototype;return s.onEnter=function(){this.game.isgameOver=!0,this.game.turnOffInput(),u.togglePauseButton(!1),this.game.unChoose(),console.log("adsfrf"),u.showPopup(e.ADSPOPUP,!0,this.game.currentNumber())},s.onExit=function(){},s.onUpdate=function(){},o}(s));o._RF.pop()}}}));

System.register("chunks:///_virtual/AnimationHandler.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var n,e,i,s;return{setters:[function(r){n=r.inheritsLoose},function(r){e=r.cclegacy,i=r._decorator,s=r.Component}],execute:function(){var t,o;e._RF.push({},"176299ZXdJILqeT4+svLujj","AnimationHandler",void 0);var a=i.ccclass;i.property,r("AnimationHandler",a("AnimationHandler")(((o=function(r){function e(){return r.apply(this,arguments)||this}return n(e,r),e.setFillProgressBar=function(r){e.fillProgressBar=r},e.callProgress=function(){e.fillProgressBar&&e.fillProgressBar.updateProgressBar()},e}(s)).fillProgressBar=null,o.animTile=[],o.matchAnim=[],o.animList=[],t=o))||t);e._RF.pop()}}}));

System.register("chunks:///_virtual/AssetLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,o,t,s,n,a,i,c,l,p,u;return{setters:[function(r){e=r.applyDecoratedDescriptor,o=r.inheritsLoose,t=r.initializerDefineProperty,s=r.assertThisInitialized},function(r){n=r.cclegacy,a=r._decorator,i=r.ProgressBar,c=r.resources,l=r.director,p=r.SpriteFrame,u=r.Component}],execute:function(){var d,f,g,h,B;n._RF.push({},"876d8QZRoRCaYjzyBTsf+Wl","AssetLoader",void 0);var y=a.ccclass,P=a.property;r("AssetLoader",(d=y("AssetLoader"),f=P(i),d((B=e((h=function(r){function e(){for(var e,o=arguments.length,n=new Array(o),a=0;a<o;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n))||this,t(e,"progressBar",B,s(e)),e}o(e,r);var n=e.prototype;return n.__preload=function(){if(console.log("preloading"),!this.progressBar)throw new Error("ProgressBar is required");c.loadDir("sfx"),l.preloadScene("Prototype"),l.preloadScene("DashBoard")},n.start=function(){var r=this;c.loadDir("AllTiles",p,(function(e,o){r.updateProgressBar(e/o)}),(function(e){e?console.error(e):(r.updateProgressBar(1),r.switchToMainMenuScene())}))},n.updateProgressBar=function(r){this.progressBar.progress=r},n.switchToGameScene=function(){l.loadScene("Prototype")},n.switchToMainMenuScene=function(){l.loadScene("DashBoard")},e}(u)).prototype,"progressBar",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=h))||g));n._RF.pop()}}}));

System.register("chunks:///_virtual/BackGround.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,i,r,o,a,s,c,u,l;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,s=e.view,c=e.UITransform,u=e.Size,l=e.Component}],execute:function(){var h,p,d,f,g,z,v;o._RF.push({},"9d56cw8xxFPkbWj8Zus+7CG","BackGround",void 0);var y=a.ccclass,B=a.property;e("BackGround",(h=y("BackGround"),p=B(Boolean),d=B(Boolean),h((z=n((g=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,i(n,"scaleOnX",z,r(n)),i(n,"scaleOnY",v,r(n)),n}t(n,e);var o=n.prototype;return o.onLoad=function(){this.resizeBackground(),s.on("canvas-resize",this.resizeBackground,this)},o.onDestroy=function(){s.off("canvas-resize",this.resizeBackground,this)},o.resizeBackground=function(){var e=s.getVisibleSize(),n=this.node.getComponent(c);if(n){var t=n.contentSize,i=this.scaleOnX?e.width:t.width,r=this.scaleOnY?e.height:t.height;n.setContentSize(new u(i/this.node.scale.x,r/this.node.scale.y))}},n}(l)).prototype,"scaleOnX",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=n(g.prototype,"scaleOnY",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),f=g))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/BaseItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./type.ts","./global.ts","./UImanager.ts"],(function(t){var e,n,i,o,a,c,r,s,u,l,h,m,d,p,f,g,v,k,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,r=t.Sprite,s=t.RichText,u=t.Node,l=t.tween,h=t.Color,m=t.Button,d=t.EventHandler,p=t.director,f=t.Vec3,g=t.Component},function(t){v=t.TileConnect},function(t){k=t.Turn},function(t){y=t.UImanager}],execute:function(){var B,I,b,N,w,G,T,q,E,S,A,P,z,C,x,D,F;a._RF.push({},"43eactcmDZJ37vn/GEQwiia","BaseItem",void 0);var M=c.ccclass,O=c.property;t("default",(B=M("BaseItem"),I=O(r),b=O(r),N=O(s),w=O(r),G=O(r),T=O(u),q=O(u),B((A=e((S=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),c=0;c<n;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a))||this,i(e,"icon",A,o(e)),i(e,"BG",P,o(e)),e.mainBG=e.BG,e.mainIcon=e.icon,e.quantity=0,i(e,"quantityText",z,o(e)),e.clicked=!1,e.itemManager=null,e.game=null,i(e,"lockedIcon",C,o(e)),i(e,"lockedBG",x,o(e)),e.locked=!1,i(e,"note",D,o(e)),i(e,"noteLock",F,o(e)),e.itemName="name",e.currentNote=e.note,e.item="UseItem",e}n(e,t);var a=e.prototype;return a.start=function(){},a.setquantity=function(t){this.quantity=t,localStorage.setItem(this.itemName,String(this.quantity)),this.init()},a.update=function(t){0==this.quantity&&this.needToAds()},a.fade=function(t){var e=this;void 0===t&&(t=!0);var n=t?0:255;this.currentNote&&(this.currentNote.active=!t),l(this.mainBG).to(.2,{color:new h(255,255,255,n)}).call((function(){e.node.active=!t})).start(),l(this.mainIcon).to(.2,{color:new h(255,255,255,n)}).start()},a.needToAds=function(){this.quantityText.string="ADS",this.currentNote.active=!0;var t=this.node.getComponent(m);if(t){t.clickEvents.length=0;var e=new d;e.target=this.node,e.component="BaseItem",e.handler="AdsPop",t.clickEvents.push(e)}},a.AdsPop=function(){var t,e;this.game.ispause=!0,null==(t=this.game)||t.adsPop();var n=null==(e=this.itemManager)?void 0:e.skipButton.getComponent(m);if(n){n.clickEvents.length=0;var i=new d;i.target=this.node,i.component="BaseItem",i.handler="increase",n.clickEvents.push(i)}},a.increase=function(){this.setquantity(1),localStorage.setItem(this.itemName,String(this.quantity)),this.init(),this.game.ispause=!1,this.game.isgameOver=!1,y.hideAllPopups(),y.togglePauseButton(!0),p.emit(v.GAME_EVENTS.START_COUNTDOWN),this.game.turnOnInput(),this.game.switchTurn(k.START);var t=this.node.getComponent(m);if(t){t.clickEvents.length=0;var e=new d;e.target=this.itemManager.node,e.component="ItemManager",e.handler=this.item,t.clickEvents.push(e)}},a.init=function(){this.textChange(),this.lock(),this.unlock(),0==this.quantity?this.stopFunction():this.enableFunction()},a.onUse=function(){var t=this;if(!this.locked){var e=[];this.clicked||(this.clicked=!0,e.push(new Promise((function(e){l(t.icon).to(.2,{color:new h(255,255,255,50)}).to(.2,{color:new h(255,255,255,255)},{easing:"bounceOut"}).call((function(){e()})).start()}))),e.push(new Promise((function(e){l(t.icon.node).to(.2,{scale:new f(.5,.5)}).to(.2,{scale:new f(1,1)},{easing:"quadOut"}).call((function(){e()})).start()}))),0!=this.quantity&&Promise.all(e).then((function(){return t.clicked=!1})))}},a.textChange=function(){this.quantityText.string=String(this.quantity)},a.stopFunction=function(){this.locked=!0,this.currentNote.active=!1},a.enableFunction=function(){this.locked=!1,this.currentNote.active=!0},a.lock=function(){this.locked=!0,this.mainBG&&this.mainIcon&&this.currentNote&&(this.mainBG.node.active=!1,this.mainIcon.node.active=!1,this.currentNote.active=!1),this.mainIcon=this.lockedIcon,this.mainBG=this.lockedBG,this.currentNote=this.noteLock,this.mainBG&&this.mainIcon&&this.currentNote&&(this.mainBG.node.active=!0,this.mainIcon.node.active=!0,this.currentNote.active=!0)},a.unlock=function(){this.locked=!1,this.mainBG&&this.mainIcon&&this.currentNote&&(this.mainBG.node.active=!1,this.mainIcon.node.active=!1,this.currentNote.active=!1),this.mainIcon=this.icon,this.mainBG=this.BG,this.currentNote=this.note,this.mainBG&&this.mainIcon&&this.currentNote&&(this.mainBG.node.active=!0,this.mainIcon.node.active=!0,this.currentNote.active=!0)},e}(g)).prototype,"icon",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(S.prototype,"BG",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(S.prototype,"quantityText",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(S.prototype,"lockedIcon",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=e(S.prototype,"lockedBG",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=e(S.prototype,"note",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(S.prototype,"noteLock",[q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=S))||E));a._RF.pop()}}}));

System.register("chunks:///_virtual/basePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var n,t,e,u;return{setters:[function(o){n=o.inheritsLoose},function(o){t=o.cclegacy,e=o._decorator,u=o.Component}],execute:function(){var p;t._RF.push({},"0755a0dOHNLUotG5cYGTlEV","basePopup",void 0);var c=e.ccclass;o("BasePopup",c("BasePopup")(p=function(o){function t(){return o.apply(this,arguments)||this}n(t,o);var e=t.prototype;return e.onPopupShow=function(o){},e.onPopupHide=function(){},e.onPopupDestroy=function(){},e.closePopup=function(){},t}(u))||p);t._RF.pop()}}}));

System.register("chunks:///_virtual/BaseSubTile.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator,o=t.Component}],execute:function(){var u;n._RF.push({},"81dc7NVyPVBPZdBvTIJZutV","BaseSubTile",void 0);var s=i.ccclass;i.property,t("BaseSubTile",s("BaseSubTile")(u=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))||this).used=!1,e.tile=null,e}e(n,t);var i=n.prototype;return i.onDead=function(t,e,n,i){},i.onResolve=function(){},i.onAttach=function(t){this.tile=t},i.onDetach=function(){this.tile=null},i.isUsed=function(){return this.used},i.reSpawn=function(){this.used=!0},i.kill=function(){this.used=!1},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/BaseTurn.ts",["cc"],(function(n){var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){t._RF.push({},"efca6CSsLFI05L/gdQN7SNC","BaseTurn",void 0);n("BaseTurn",function(){function n(n){this.game=void 0,this.game=n}var t=n.prototype;return t.onEnter=function(){},t.onExit=function(){},t.onUpdate=function(){},n}());t._RF.pop()}}}));

System.register("chunks:///_virtual/BaseTutorial.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var i,e,o,l,t;return{setters:[function(n){i=n.inheritsLoose,e=n.createForOfIteratorHelperLoose},function(n){o=n.cclegacy,l=n.Node,t=n.Component}],execute:function(){o._RF.push({},"009a3BAFXpFFK9+jPwojSSg","BaseTutorial",void 0);n("BaseTutorial",function(n){function o(){for(var i,e=arguments.length,o=new Array(e),l=0;l<e;l++)o[l]=arguments[l];return(i=n.call.apply(n,[this].concat(o))||this).gm=null,i.currentBoard=null,i.overlay=null,i.panel=null,i.help=null,i.hand=null,i.originalSiblingIndices=new Map,i.boundOnChoose=null,i.boundOnTouch=null,i}i(o,n);var t=o.prototype;return t.hideOverlay=function(){this.overlay&&(this.overlay.active=!1,console.log("OVERLAY: ",this.overlay.active))},t.showPanel=function(n){this.help&&this.panel&&(this.help.string=n,this.panel.active=!0)},t.hidePanel=function(){this.panel&&(this.panel.active=!1,console.log("PANEL: ",this.panel.active))},t.storeSiblingIndices=function(n){this.originalSiblingIndices.clear();for(var i,o=e(n.board);!(i=o()).done;)for(var l,t=i.value,a=e(t);!(l=a()).done;){var s=l.value;if(s){var r=s.node;this.originalSiblingIndices.set(r,r.getSiblingIndex())}}},t.setAllTilesToBackground=function(n){for(var i,o=e(n.board);!(i=o()).done;)for(var l,t=i.value,a=e(t);!(l=a()).done;){var s=l.value;if(s)s.node.setSiblingIndex(1)}},t.restoreAllSiblingIndices=function(n){for(var i,o=e(n.board);!(i=o()).done;)for(var l,t=i.value,a=e(t);!(l=a()).done;){var s=l.value;if(s){var r=s.node,u=this.originalSiblingIndices.get(r);void 0!==u&&r.setSiblingIndex(u)}}this.originalSiblingIndices.clear()},t.resetAllSiblingIndices=function(n){this.originalSiblingIndices.size>0&&this.restoreAllSiblingIndices(n),this.originalSiblingIndices.clear()},t.hideHand=function(){this.hand&&(this.hand.active=!1)},t.clearOverlayEvents=function(){this.overlay&&(this.overlay.off(l.EventType.TOUCH_START),this.overlay.off(l.EventType.TOUCH_END),this.overlay.off(l.EventType.TOUCH_CANCEL),this.overlay.targetOff(this))},t.setupOverlay=function(){var n;this.overlay&&(this.clearOverlayEvents(),null==(n=this.gm)||n.node.addChild(this.overlay),this.overlay.active=!0,this.overlay.setPosition(this.gm.node.position.clone().multiplyScalar(-1)))},t.cleanup=function(){var n,i;this.boundOnChoose&&(null==(n=this.gm)||n.offChoose(this.boundOnChoose),this.boundOnChoose=null);this.boundOnTouch&&(null==(i=this.gm)||i.offTouch(this.boundOnTouch),this.boundOnTouch=null)},t.update=function(n){},o}(t));o._RF.pop()}}}));

System.register("chunks:///_virtual/Board.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./GameConfig.ts","./AnimationHandler.ts","./LevelLoader.ts","./TutorialManager.ts","./SoundManager.ts"],(function(t){var e,n,a,r,o,i,l,s,h,u,d,g,f,c,v,p,b,m,y;return{setters:[function(t){e=t.inheritsLoose,n=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,r=t._decorator,o=t.Vec2,i=t.Size,l=t.tween,s=t.Tween,h=t.Vec3,u=t.Component},function(t){d=t.SFX,g=t.TileType,f=t.Theme,c=t.SubType},function(t){v=t.default},function(t){p=t.AnimationHandler},function(t){b=t.LevelLoader},function(t){m=t.TutorialManager},function(t){y=t.SoundManager}],execute:function(){var P;a._RF.push({},"52701IqhLtGnIdgKUUwkd2v","Board",void 0);var T=r.ccclass;r.property,t("default",T("Board")(P=function(t){function a(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))||this).board=[],e.shuffling=!1,e.game=null,e.matchedPairsCount=0,e.respawnCount=0,e.MAX_RESPAWNS_PER_LEVEL=3,e.FIRST_RESPAWN_THRESHOLD=5,e.SUBSEQUENT_RESPAWN_INTERVAL=3,e}e(a,t);var r=a.prototype;return r.match=function(t,e){var n;if(!t.underKill&&!e.underKill){console.log("itemList: ",null==(n=this.game)?void 0:n.pathPool);var a=this.getPath(t,e);if(this.canMatch(t,e,a.path,a.turnNum)){var r,o;this.drawPath(a.path,null==(r=this.game)?void 0:r.pathPool),this.putStar(a.path,null==(o=this.game)?void 0:o.starPool),t.onDead(this,!0,e),e.onDead(this,!1,t),t.kill(),e.kill(),this.matchedPairsCount++,this.checkAndRespawnTiles(),this.hasAnyValidPair()||(console.log("No valid pairs left — shuffling board"),this.shuffle())}else{var i,l,s;if((null==(i=this.game)?void 0:i.tilePool).shake(10,this.game.currentLevel),this.game.currentNumber()<2){var h,u,g,f=this.getInvalidPath(t,e);if(0===f.path.length){var c,v,p,b;0===(f=this.getPath(t,e,!1)).path.length&&(f=this.getPath(e,t,!1)),null==(c=m.instance)||c.showObstacle();var P=this.getTurnPoints(f.path);return this.drawInvalid(P,null==(v=this.game)?void 0:v.invalid),this.putNope(P,null==(p=this.game)?void 0:p.nope),null==(b=this.game)||b.unChoose(),void y.instance.playSFX(d.INVALID_MATCH)}var T=this.getTurnPoints(f.path);this.drawInvalid(T,null==(h=this.game)?void 0:h.invalid),this.putNope(T,null==(u=this.game)?void 0:u.nope),null==(g=m.instance)||g.showInvalid(),console.log(T)}(null==(l=this.game)?void 0:l.tilePool).shake(10,this.game.currentLevel),y.instance.playSFX(d.INVALID_MATCH),y.instance.vibrateOn&&navigator.vibrate(200),null==(s=this.game)||s.unChoose()}}},r.getTurnPoints=function(t){if(t.length<2)return t;for(var e=[t[0]],n=1;n<t.length-1;n++){var a=t[n-1],r=t[n],o=t[n+1],i=r.x-a.x,l=r.y-a.y,s=o.x-r.x,h=o.y-r.y;i===s&&l===h||e.push(r)}return e.push(t[t.length-1]),e},r.checkAndRespawnTiles=function(){var t=b.getInstance().getLevelData();!t||t.Difficulty<3||this.shouldRespawnTiles()&&(this.respawnRandomTilePair(),this.respawnCount++)},r.shouldRespawnTiles=function(){if(this.respawnCount>=this.MAX_RESPAWNS_PER_LEVEL)return!1;if(0===this.respawnCount&&this.matchedPairsCount===this.FIRST_RESPAWN_THRESHOLD)return!0;if(this.respawnCount>0){var t=this.matchedPairsCount-this.FIRST_RESPAWN_THRESHOLD;return Math.floor(t/this.SUBSEQUENT_RESPAWN_INTERVAL)>this.respawnCount-1}return!1},r.respawnRandomTilePair=function(){var t=this.getAvailableRandomPosInGameArea();if(t&&!(t.length<2)){this.shuffleArray(t);var e=t[0],n=t[1],a=Math.floor(7*Math.random())+1,r=Math.floor(20*Math.random()),o=Math.floor(10*Math.random())+1,i=o+"+"+(r-o),l=r.toString();this.findAndRespawnTileAt(e,a,i),this.findAndRespawnTileAt(n,a,l)}},r.getAvailableRandomPosInGameArea=function(){var t,e=[],n=null==(t=this.game)?void 0:t.currentLevel;if(!n)return e;for(var a=1+n.gridHeight,r=1+n.gridWidth,o=1;o<a;o++)for(var i=1;i<r;i++)this.board[o][i].getTypeID()===g.NONE&&e.push(this.board[o][i].getCoordinate());return e},r.shuffleArray=function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),a=[t[n],t[e]];t[e]=a[0],t[n]=a[1]}},r.findAndRespawnTileAt=function(t,e,n){for(var a=0;a<this.board.length;a++)for(var r=0;r<this.board[a].length;r++)if(this.board[a][r].getCoordinate().equals(t)){var o;if(this.board[a][r].reSpawn(),this.board[a][r].setTypeID(e),n&&this.board[a][r].setLabel(n),(null==(o=this.game)?void 0:o.currentLevel.theme)==f.BUTTERFLY){var i,l=null==(i=this.game.subtilePool.get(c.BUTTERFLY))?void 0:i.getFirstItem();this.board[a][r].attachSubType(l,c.BUTTERFLY)}return void this.board[a][r].show()}},r.getMatchedPairsCount=function(){return this.matchedPairsCount},r.getRespawnCount=function(){return this.respawnCount},r.hasAnyValidPair=function(){for(var t=this.board.length,e=this.board[0].length,n=0;n<t;n++)for(var a=0;a<e;a++){var r=this.board[n][a];if(r&&r.getTypeID()!==g.NONE)for(var o=0;o<t;o++)for(var i=0;i<e;i++)if(a!==i||n!==o){var l=this.board[o][i];if(l&&l.getTypeID()!==g.NONE){var s=this.getPath(r,l);if(r.getMathValue()===l.getMathValue()&&this.canMatch(r,l,s.path,s.turnNum))return!0}}}return!1},r.getRemainingRespawns=function(){return this.MAX_RESPAWNS_PER_LEVEL-this.respawnCount},r.canMatch=function(t,e,n,a){if(t===e)return!1;var r=t.getMathValue(),o=e.getMathValue();return console.log('Checking match: "'+t.getLabel()+'" (value='+r+') vs "'+e.getLabel()+'" (value='+o+")"),r!==o?(console.log("No match: "+r+" !== "+o),!1):(console.log("Match found! Path length: "+n.length+", turns: "+a),n.length>0&&a<=2)},r.getInvalidPath=function(t,e){var n=this,a=t.getCoordinate(),r=e.getCoordinate(),i=this.board.length,l=this.board[0].length,s=[new o(-1,0),new o(1,0),new o(0,1),new o(0,-1)],h=Array.from({length:i},(function(){return Array.from({length:l},(function(){return!1}))})),u=function t(e,a,o,i){if(e.equals(r))return{path:[].concat(a,[e.clone()]),turns:o};if(o>2)return null;h[e.y][e.x]=!0;for(var l=0;l<s.length;l++){var u=e.clone().add(s[l]);if(n.validate(u,r)&&!h[u.y][u.x]){var d=l===i||-1===i?o:o+1,g=t(u,[].concat(a,[e.clone()]),d,l);if(g)return h[e.y][e.x]=!1,g}}return h[e.y][e.x]=!1,null}(a,[],0,-1);return u?{path:u.path,turnNum:u.turns}:{path:[],turnNum:0}},r.getPath=function(t,e,n){void 0===n&&(n=!0);for(var a=t.getCoordinate(),r=e.getCoordinate(),i=this.board.length,l=this.board[0].length,s=[new o(0,1),new o(1,0),new o(0,-1),new o(-1,0)],h=Array.from({length:i},(function(){return Array.from({length:l},(function(){return Array(4).fill(1/0)}))})),u=function(t){return Math.abs(t.x-r.x)+Math.abs(t.y-r.y)},d=[],g=0;g<4;g++){var f=a.clone().add(s[g]);n&&!this.validate(f,r)||(h[f.y][f.x][g]=0,d.push({pos:f,dirIndex:g,turn:0,path:[a.clone(),f.clone()],g:1,f:1+u(f)}))}for(;d.length>0;){d.sort((function(t,e){return t.f-e.f}));var c=d.shift();if(c.pos.equals(r))return{path:c.path,turnNum:c.turn};for(var v=0;v<4;v++){var p=v===c.dirIndex?c.turn:c.turn+1;if(!(p>2)){var b=c.pos.clone().add(s[v]);if(this.validate(b,r)&&!(h[b.y][b.x][v]<=p)){h[b.y][b.x][v]=p;var m=c.g+1,y=m+u(b);d.push({pos:b,dirIndex:v,turn:p,path:[].concat(c.path,[b.clone()]),g:m,f:y})}}}}return{path:[],turnNum:0}},r.resetInput=function(){for(var t,e=n(this.board);!(t=e()).done;)for(var a,r=t.value,o=n(r);!(a=o()).done;){a.value.clearOnClickCallbacks()}},r.resetInputExcept=function(t,e){for(var a,r=this,o=n(this.board);!(a=o()).done;)for(var i,l=a.value,s=n(l);!(i=s()).done;){i.value.clearOnClickCallbacks()}t.addOnClickCallback((function(t){var e;return null==(e=r.game)?void 0:e.choose(t)})),e.addOnClickCallback((function(t){var e;return null==(e=r.game)?void 0:e.choose(t)}))},r.getBoardSize=function(){return new i(v.TileSize*this.board[0].length,v.TileSize*this.board.length)},r.validate=function(t,e){var n=t.x,a=t.y;if(a<0||a>=this.board.length||n<0||n>=this.board[0].length)return!1;var r=this.board[a][n];return null==r||r.getTypeID()===g.NONE||r===this.board[e.y][e.x]},r.setUpManager=function(t){this.game=t;for(var e,a=n(this.board);!(e=a()).done;)for(var r,o=e.value,i=n(o);!(r=i()).done;){var l=r.value;0==l.onClickCallbacks.length&&l.addOnClickCallback((function(e){return t.choose(e)}))}},r.shake=function(){l(this.node).to},r.create=function(t,e){t.returnAll();var n=e.gridHeight+2,a=e.gridWidth+2;this.matchedPairsCount=0,this.respawnCount=0,this.board=[];for(var r=0;r<n;r++){this.board[r]=[];for(var i=0;i<a;i++){var l=t.getFirstItem();this.board[r].push(l),null==l||l.setTheme(e.theme);var h=i-1,u=r-1;if(h>=0&&h<e.gridWidth&&u>=0&&u<e.gridHeight){if(null==l||l.setTypeID(e.grid[u][h]),8!==(null==l?void 0:l.getTypeID()))if(e.gridLabels&&e.gridLabels[u]&&e.gridLabels[u][h]){var d=e.gridLabels[u][h];"ROCKET"!==d&&(null==l||l.setLabel(d))}else null==l||l.setLabel("");(null==l?void 0:l.getTypeID())==g.NONE&&l.hide(),null!=l&&l.node&&s.stopAllByTarget(l.wholeSprite),null==l||l.reScale(e.scale)}else null==l||l.hide();null==l||l.setCoordinate(new o(i,r)),null==l||l.node.setPosition(0,0),null==l||l.fadeIn(.05*Math.abs(r-e.gridHeight-1)),null==l||l.moveToRealPositionWithPadding(e,!0,.05*Math.abs(r-e.gridHeight-1),"sineOut")}}},r.shuffle=function(){var t,e=this;if(console.log("shuffle"),!this.shuffling){this.shuffling=!0,null==(t=this.game)||t.stopHint();for(var a,r=[],i=n(this.board);!(a=i()).done;)for(var l,s=a.value,h=n(s);!(l=h()).done;){var u=l.value;u.getTypeID()!==g.NONE&&r.push(u)}for(var d={},f=0,c=r;f<c.length;f++){var v=c[f],b=v.getMathValue();d[b]||(d[b]=[]),d[b].push(v)}var m=Object.keys(d).filter((function(t){return d[+t].length>=2})),y=[],P=null;if(m.length>0){var T=+m[Math.floor(Math.random()*m.length)],w=d[T];if(w.length>=2){P={pos1:(y=w.splice(0,2))[0].getCoordinate().clone(),pos2:y[1].getCoordinate().clone()};for(var A,C=n(y);!(A=C()).done;){var I=A.value,N=r.indexOf(I);N>=0&&r.splice(N,1)}}}for(var L=r.length-1;L>0;L--){var R=Math.floor(Math.random()*(L+1)),S=[r[R],r[L]];r[L]=S[0],r[R]=S[1]}for(var E=0,M=0;M<this.board.length;M++)for(var x=0;x<this.board[M].length;x++)if(this.board[M][x].getTypeID()!==g.NONE){var _=void 0;if(!(_=P&&2===y.length&&(M===P.pos1.y&&x===P.pos1.x||M===P.pos2.y&&x===P.pos2.x)?M===P.pos1.y&&x===P.pos1.x?y[0]:y[1]:r[E++])){console.warn("⚠️ Thiếu tile để gán tại ("+M+", "+x+")");continue}this.board[M][x]=_,_.setCoordinate(new o(x,M))}for(var O,k=n(this.board);!(O=k()).done;)for(var D,F=O.value,V=n(F);!(D=V()).done;){var H,W=D.value;if(W&&W.getTypeID()!==g.NONE)W.moveToRealPositionWithPadding(null==(H=this.game)?void 0:H.currentLevel,!0,0,"expoInOut",1)}Promise.all(p.animTile).then((function(){e.shuffling=!1}))}},r.addSubTile=function(t,e,n){var a=e.layer.get(n);if(a)for(var r=0;r<e.gridHeight;r++)for(var o=0;o<e.gridWidth;o++){var i;if(1===(null==(i=a[r])?void 0:i[o])){var l=t.getFirstItem(),s=this.board[r+1][o+1];null==s||s.attachSubType(l,n)}}},r.drawPath=function(t,e){for(var n=0;n<t.length-1;n++){var a=t[n],r=this.board[a.y][a.x].node.getPosition().toVec2(),o=t[n+1],i=this.board[o.y][o.x].node.getPosition().toVec2(),l=e.getFirstItem();console.log("from: ",r,"to: ",i),null==l||l.createPath(r,i,!0,.6),console.log("draw path from",a,"to",o)}},r.drawInvalid=function(t,e){for(var n=0;n<t.length-1;n++){var a=t[n],r=this.board[a.y][a.x].node.getPosition().toVec2(),o=t[n+1],i=this.board[o.y][o.x].node.getPosition().toVec2(),l=e.getFirstItem();console.log("drew"),null==l||l.createPath(r,i)}},r.putStar=function(t,e){for(var n=0;n<t.length;n++){var a=t[n],r=this.board[a.y][a.x].node.getPosition().clone(),o=e.getFirstItem();0!=n&&n!=t.length-1||null==o||o.firstAndLastMatch(),null==o||o.putAt(r,n)}},r.putNope=function(t,e){if(t.length<3){var n=t[0],a=t[1],r=this.board[n.y][n.x].node.getPosition(),o=this.board[a.y][a.x].node.getPosition(),i=new h((r.x+o.x)/2,(r.y+o.y)/2,1),l=e.getFirstItem();null==l||l.putAt(i)}else for(var s=1;s<t.length-1;s++){var u=t[s],d=this.board[u.y][u.x].node.getPosition().clone(),g=e.getFirstItem();s<3?null==g||g.putX(d,s):null==g||g.putAt(d)}},a}(u))||P);a._RF.pop()}}}));

System.register("chunks:///_virtual/BombFail.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts"],(function(n){var t,o,e,u,i;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){e=n.Popup},function(n){u=n.UImanager},function(n){i=n.BaseTurn}],execute:function(){o._RF.push({},"368e0/pCuFEu7KMmIDlH5yo","BombFail",void 0);n("BombFail",function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var i=o.prototype;return i.onEnter=function(){this.game.ispause=!0,this.game.turnOffInput(),u.togglePauseButton(!1),this.game.unChoose(),console.log("Fail"),u.showPopup(e.BOOMPOPUP,!0,this.game.currentNumber())},i.onExit=function(){},i.onUpdate=function(){},o}(i));o._RF.pop()}}}));

System.register("chunks:///_virtual/boom-popup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts"],(function(e){var o,t,r,i,n,l,p,a;return{setters:[function(e){o=e.applyDecoratedDescriptor,t=e.inheritsLoose,r=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,p=e.Label},function(e){a=e.BasePopup}],execute:function(){var c,u,s,f,b;n._RF.push({},"fd57cpWbDNGSJX2WuMUcQu5","boom-popup",void 0);var h=l.ccclass,v=l.property;e("BoomFail",(c=h("BoomFail"),u=v(p),c((b=o((f=function(e){function o(){for(var o,t=arguments.length,n=new Array(t),l=0;l<t;l++)n[l]=arguments[l];return o=e.call.apply(e,[this].concat(n))||this,r(o,"level",b,i(o)),o}return t(o,e),o.prototype.onPopupShow=function(e){this.level.string="LEVEL "+e},o}(a)).prototype,"level",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=f))||s));n._RF.pop()}}}));

System.register("chunks:///_virtual/BoomDefuseItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts"],(function(e){var t,i,n,o,r,a,s,l,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Animation,l=e.Vec3},function(e){u=e.SubType},function(e){c=e.default}],execute:function(){var p,f,h,m,y;r._RF.push({},"c5603FwifxAj4rdveJjR9py","BoomDefuseItem",void 0);var d=a.ccclass,v=a.property;e("BoomDefuseItem",(p=d("BoomDefuseItem"),f=v(s),p((y=t((m=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return(t=e.call.apply(e,[this].concat(r))||this).item="useBoom",n(t,"anim",y,o(t)),t}return i(t,e),t.prototype.onUse=function(){var t=this;if(!this.clicked){for(var i,n,o=[],r=0,a=this.game.board.board;r<a.length;r++){var c=a[r];o.push.apply(o,c.filter((function(e){return e.getSubtileList().has(u.BOOM)})))}if(e.prototype.onUse.call(this),o.length>0&&this.quantity>0)this.quantity-=1,this.textChange(),o[0].detachSubType(u.BOOM),this.anim.node.active=!0,this.anim.node.setWorldPosition(o[0].node.worldPosition),o[0].itemTypeSprite.node.setScale(new l(0)),null==(i=this.anim)||i.play(),null==(n=this.anim)||n.once(s.EventType.FINISHED,(function(){t.anim.node.active=!1,o[0].shrink()}))}},t}(c)).prototype,"anim",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=m))||h));r._RF.pop()}}}));

System.register("chunks:///_virtual/BoomPool.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,i,n,o,r,s,a,c,d,l,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,d=e.Node,l=e.Animation,h=e.Component}],execute:function(){var u,f,p,m,N,v,y;a._RF.push({},"250acO6i6VM/K3U0sNwRWKT","BoomPool",void 0);var g=c.ccclass,A=c.property;e("BoomPool",(u=g("BoomPool"),f=A(d),p=A(d),u((v=t((N=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return t=e.call.apply(e,[this].concat(r))||this,n(t,"firstNode",v,o(t)),n(t,"secondNode",y,o(t)),t.firstAnimationNodes=[],t.secondAnimationNodes=[],t}i(t,e);var a=t.prototype;return a.start=function(){this.initializeNodes(),this.playAnimationSequence()},a.initializeNodes=function(){if(!this.firstNode){var e=this.node.getChildByName("first");if(!e)throw new Error("Child node 'first' not found");this.firstNode=e,this.firstNode.active=!1}if(!this.secondNode){var t=this.node.getChildByName("second");if(!t)throw new Error("Child node 'second' not found");this.secondNode=t,this.secondNode.active=!1}if(this.firstNode){this.firstAnimationNodes=[];for(var i=0;i<this.firstNode.children.length;i++){var n=this.firstNode.children[i];n.getComponent(l)&&this.firstAnimationNodes.push(n)}}if(this.secondNode){this.secondAnimationNodes=[];for(var o=0;o<this.secondNode.children.length;o++){var r=this.secondNode.children[o];r.getComponent(l)&&this.secondAnimationNodes.push(r)}}},a.playAnimationSequence=function(){this.playFirstAnimations().then((function(){}))},a.playFirstAnimations=function(){var e=r(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.firstAnimationNodes.length){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return this.firstNode.active=!0,t=[],this.firstAnimationNodes.forEach((function(e){var i=e.getComponent(l);if(i&&i.clips.length>0){e.active=!0;var n=new Promise((function(e){i.once(l.EventType.FINISHED,(function(){e()})),i.clips[0]?i.play(i.clips[0].name):e()}));t.push(n)}})),e.next=7,Promise.all(t);case 7:this.firstNode.active=!1;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.playSecondAnimations=function(){var e=r(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.secondAnimationNodes.length){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return this.secondNode.active=!0,t=[],this.secondAnimationNodes.forEach((function(e){var i=e.getComponent(l);if(i&&i.clips.length>0){e.active=!0;var n=new Promise((function(e){i.once(l.EventType.FINISHED,(function(){e()})),i.clips[0]&&i.play(i.clips[0].name)}));t.push(n)}})),e.next=7,Promise.all(t);case 7:this.secondNode.active=!1;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),t}(h)).prototype,"firstNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),y=t(N.prototype,"secondNode",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m=N))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/BoomSubTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSubTile.ts","./Countdown.ts"],(function(e){var t,o,n,i,r,l,u,c,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,u=e.Sprite},function(e){c=e.BaseSubTile},function(e){a=e.Countdown}],execute:function(){var s,d,h,p,b,f,v,m,w;r._RF.push({},"d5f97QXjRpBK79IAO1Fuh3q","BoomSubTile",void 0);var y=l.ccclass,S=l.property;e("BoomSubTile",(s=y("BoomSubTile"),d=S(u),h=S(u),p=S(a),s((v=t((f=function(e){function t(){for(var t,o=arguments.length,r=new Array(o),l=0;l<o;l++)r[l]=arguments[l];return(t=e.call.apply(e,[this].concat(r))||this).timer=40,n(t,"coundown",v,i(t)),n(t,"boom",m,i(t)),n(t,"cd",w,i(t)),t}o(t,e);var r=t.prototype;return r.onAttach=function(t){var o;e.prototype.onAttach.call(this,t),null==(o=t.wholeSprite)||o.addChild(this.node),this.coundown.node.active=!0,this.boom.node.active=!0},r.onDead=function(e,t,o){var n,i;null==(n=this.cd)||n.resetCountdown(),null==(i=this.tile)||null==(i=i.wholeSprite)||i.removeChild(this.node),this.coundown.node.active=!1,this.boom.node.active=!1},r.onDetach=function(){var t,o;null==(t=this.cd)||t.resetCountdown(),null==(o=this.tile)||null==(o=o.wholeSprite)||o.removeChild(this.node),this.coundown.node.active=!1,this.boom.node.active=!1,e.prototype.onDetach.call(this)},t}(c)).prototype,"coundown",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(f.prototype,"boom",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(f.prototype,"cd",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=f))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/BreakTile.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,r,i,n,o,l,a,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,l=e._decorator,a=e.Node,u=e.Component}],execute:function(){var c,p,s,f,b,y,g,h,d,v,m;o._RF.push({},"a5fa4bY7stAEZ2ags59CBeu","BreakTile",void 0);var z=l.ccclass,B=l.property;e("BreakTile",(c=z("BreakTile"),p=B(a),s=B(a),f=B(a),b=B(a),c((h=t((g=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,i(t,"top",h,n(t)),i(t,"bot",d,n(t)),i(t,"right",v,n(t)),i(t,"left",m,n(t)),t}r(t,e);var o=t.prototype;return o.start=function(){},o.update=function(e){},t}(u)).prototype,"top",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=t(g.prototype,"bot",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(g.prototype,"right",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(g.prototype,"left",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=g))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/ButterflySubTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSubTile.ts","./global.ts"],(function(t){var i,e,n,o,l,s,a,r,c,h,u,g,p,w,f,d,y,v,b,T;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){l=t.cclegacy,s=t._decorator,a=t.Node,r=t.resources,c=t.SpriteFrame,h=t.Tween,u=t.Sprite,g=t.Vec3,p=t.tween,w=t.view},function(t){f=t.BaseSubTile},function(t){d=t.TileType,y=t.SubType,v=t.getTilePath,b=t.Theme,T=t.getAllDescendants}],execute:function(){var S,m,P,B,F,z,D,x,W,A,E,R,k;l._RF.push({},"d9d5e9kBRpGp7Fdbtd6hf8P","ButterflySubTile",void 0);var I=s.ccclass,C=s.property;t("ButterflySubtile",(S=I("ButterflySubtile"),m=C(a),P=C(a),B=C(a),F=C(a),z=C(a),S((W=i((x=function(t){function i(){for(var i,e=arguments.length,l=new Array(e),s=0;s<e;s++)l[s]=arguments[s];return i=t.call.apply(t,[this].concat(l))||this,n(i,"wing1",W,o(i)),n(i,"wing2",A,o(i)),n(i,"body",E,o(i)),n(i,"shadow",R,o(i)),n(i,"wingShadow",k,o(i)),i.wingType=null,i}e(i,t);var l=i.prototype;return l.onAttach=function(i){var e;if(i.getTypeID()==d.ROCKET)return i.detachSubType(y.BUTTERFLY),void this.kill();t.prototype.onAttach.call(this,i);var n=v(this.tile.getTypeID(),b.BUTTERFLY);this.wingType=r.get(n,c),null==(e=this.shadow)||e.setScale(.6*i.originScale,.6*i.originScale)},l.onDead=function(t,i,e,n){var o,l;i&&!n&&this.tile.getTypeID()!=d.ROCKET&&(console.log("butter is flying"),this.setupWing(),null==(o=this.wing1)||o.setPosition(this.tile.node.position),null==(l=this.wing2)||l.setPosition(e.tile.node.position),this.moveWingToWing())},l.kill=function(){t.prototype.kill.call(this),this.stopTween(),this.node.setPosition(0,0),this.body.active=!1,this.node.angle=0,this.wing1.active=!1,this.wing2.active=!1,this.shadow.active=!1},l.stopTween=function(){var t=T(this.node);h.stopAllByTarget(this),t.forEach((function(t){h.stopAllByTarget(t)}))},l.showShadow=function(){this.shadow.active=!0},l.setupWing=function(){var t,i,e,n,o=this,l=null==(t=this.wing1)?void 0:t.getComponent(u),s=null==(i=this.wing2)?void 0:i.getComponent(u);this.wingShadow.forEach((function(t){t.getComponent(u).spriteFrame=o.wingType})),l.spriteFrame=this.wingType,s.spriteFrame=this.wingType,null==(e=this.wing1)||e.setScale(new g(.7*this.tile.originScale,.7*this.tile.originScale)),null==(n=this.wing2)||n.setScale(new g(.7*this.tile.originScale,.7*this.tile.originScale))},l.flap=function(){var t=this.wing1.scale.clone(),i=this.wing2.scale.clone();this.wingShadow.forEach((function(t){var i=t.scale.clone();p(t).repeatForever(p().to(.2,{scale:new g(.5*i.x,i.y,i.z)}).to(.2,{scale:i})).start()})),p(this.wing1).repeatForever(p().to(.2,{scale:new g(.5*t.x,t.y,t.z)}).to(.2,{scale:t})).start(),p(this.wing2).repeatForever(p().to(.2,{scale:new g(.5*i.x,i.y,i.z)}).to(.2,{scale:i})).start()},l.resetPos=function(){var t,i;this.node.setPosition(this.wing2.position),null==(t=this.wing1)||t.setPosition(0,0),null==(i=this.wing2)||i.setPosition(0,0)},l.flyUp=function(){p(this.node).to(.2,{scale:new g(1.2,1.2)}).start()},l.moveWingToWing=function(){var t,i=this;this.wing1.active=!0,this.wing2.active=!0,p(this.wing1).to(.36,{position:null==(t=this.wing2)?void 0:t.position}).call((function(){i.body.active=!0,i.flipWing(i.wing1),i.resetPos(),i.flyUp()})).start()},l.flipWing=function(t){var i,e=this,n=t.scale.clone();null==(i=this.wing1)||i.setScale(new g(-n.x,n.y)),p(t).to(.1,{scale:new g(-n.x,n.y)}).call((function(){e.move(),e.flap()})).start()},l.move=function(){var t=this;this.shadow.active=!0;var i=40+60*Math.random(),e=new g(0,i,0);this.shadow.setPosition(e);var n,o,l,s,a=Math.random()<.5?-500:w.getVisibleSize().width+500,r=new g(a,900),c=(n=this.node.worldPosition,l=(o=r).x-n.x,s=o.y-n.y,180*Math.atan2(s,l)/Math.PI-90);p(this.node).to(.7,{eulerAngles:new g(0,0,c)},{easing:"sineInOut"}).to(3,{worldPosition:r}).call((function(){return t.kill()})).start()},l.onDetach=function(){t.prototype.onDetach.call(this)},i}(f)).prototype,"wing1",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(x.prototype,"wing2",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=i(x.prototype,"body",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=i(x.prototype,"shadow",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(x.prototype,"wingShadow",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),D=x))||D));l._RF.pop()}}}));

System.register("chunks:///_virtual/Combo.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./type.ts"],(function(t){var i,e,n,o,r,l,a,c,s,u,f,h,b,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,l=t._decorator,a=t.Sprite,c=t.Node,s=t.SpriteFrame,u=t.director,f=t.ParticleSystem2D,h=t.Component},function(t){b=t.default},function(t){m=t.TileConnect}],execute:function(){var p,d,g,y,C,N,v,P,M,z,S,w,T,D,_;r._RF.push({},"4bebeCsyLJP8KXneWnzpmLu","Combo",void 0);var E=l.ccclass,O=l.property;t("Combo",(p=E("Combo"),d=O(b),g=O(a),y=O(c),C=O(c),N=O(c),v=O([s]),p((z=i((M=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),l=0;l<e;l++)r[l]=arguments[l];return i=t.call.apply(t,[this].concat(r))||this,n(i,"gm",z,o(i)),i.timer=5,i.currentTime=0,i.comboCount=0,n(i,"fill",S,o(i)),n(i,"bom",w,o(i)),n(i,"firstNode",T,o(i)),n(i,"secondNode",D,o(i)),n(i,"listSprite",_,o(i)),i.boundOnMatchPair=null,i}e(i,t);var r=i.prototype;return r.start=function(){this.fill&&(this.fill.fillRange=1),this.gm&&(this.boundOnMatchPair=this.onMatchPair.bind(this),this.gm.onMatchPair(this.boundOnMatchPair)),this.node.active=!1,u.on(m.GAME_EVENTS.COUNTDOWN_RESET,this.resetCombo,this)},r.update=function(t){},r.explode=function(){var t=this.bom?this.bom.getComponent(f):null;t&&t.resetSystem()},r.onMatchPair=function(){},r.hideAllComboNumbers=function(){this.firstNode&&(this.firstNode.active=!1),this.secondNode&&(this.secondNode.active=!1)},r.resetCombo=function(){this.comboCount=0,this.node.active=!1,this.currentTime=0,this.fill&&(this.fill.fillRange=1)},r.onDestroy=function(){this.gm&&this.gm.offMatchPair(this.onMatchPair.bind(this))},i}(h)).prototype,"gm",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=i(M.prototype,"fill",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(M.prototype,"bom",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=i(M.prototype,"firstNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(M.prototype,"secondNode",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(M.prototype,"listSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),P=M))||P));r._RF.pop()}}}));

System.register("chunks:///_virtual/ConfettiManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts"],(function(t){var e,n,i,o,r,a,l,c,s,d,f,u,h,p,y,v,g,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized,r=t.createForOfIteratorHelperLoose},function(t){a=t.cclegacy,l=t._decorator,c=t.Prefab,s=t.Vec2,d=t.instantiate,f=t.RigidBody2D,u=t.Tween,h=t.Sprite,p=t.Vec3,y=t.Component,v=t.Color,g=t.tween},function(t){m=t.getAllDescendants}],execute:function(){var M,w,C,V,b,x,R;a._RF.push({},"39457hpjrJOtaS7y/SWY3h9","ConfettiManager",void 0);var L=l.ccclass,S=l.property;t("ConfettiManager",(M=L("ConfettiManager"),w=S(c),C=S(s),M((x=e((b=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,i(e,"confettiList",x,o(e)),e.confettiRigid=[],i(e,"dir",R,o(e)),e}n(e,t);var a=e.prototype;return a.start=function(){for(var t,e=r(this.confettiList);!(t=e()).done;)for(var n=t.value,i=1;i<20;i++){var o=d(n);this.node.addChild(o);var a=o.getComponent(f);this.confettiRigid.push(a),o.active=!1}},a.update=function(t){for(var e,n=r(this.confettiRigid);!(e=n()).done;){var i=e.value;i.linearVelocity=new s(.98*i.linearVelocity.x,i.linearVelocity.y+-15*t),Math.abs(i.linearVelocity.x)<.1&&(i.linearVelocity.x=0),Math.abs(i.linearVelocity.y)<.1&&(i.linearVelocity.y=0),i.node.position.y<-200&&this.kill(i.node)}},a.emit=function(){var t=this;this.resetConf();for(var e,n=function(){var n=e.value;n.node.active=!0;var i=n.node.getComponent(h),o=new v(Math.floor(256*Math.random()),Math.floor(256*Math.random()),Math.floor(256*Math.random()),255);i&&(i.color=o),g(n.node.getComponent(h)).delay(2.5+.2*Math.random()).to(.5,{color:new v(o.r,o.g,o.b,0)}).start();var r=new s(50*t.dir.x,50*t.dir.y),a=50*Math.random()-10,l=0+50*Math.random();n.angularVelocity=(1+2*Math.random())*(Math.random()<.5?1:-1),n.linearVelocity=new s(t.dir.x>0?r.x+a:r.x-a,r.y+l),n.gravityScale=.3,setTimeout((function(){n.node&&n.node.isValid&&(n.gravityScale=.5+.5*Math.random())}),400)},i=r(this.confettiRigid);!(e=i()).done;)n()},a.kill=function(t){t.active=!1;m(t);u.stopAllByTarget(t),u.stopAllByTarget(t.getComponent(h))},a.resetConf=function(){for(var t,e=r(this.confettiRigid);!(t=e()).done;){var n=t.value;this.kill(n.node),n.node.position=new p,n.linearVelocity=new s}},e}(y)).prototype,"confettiList",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=e(b.prototype,"dir",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new s}}),V=b))||V));a._RF.pop()}}}));

System.register("chunks:///_virtual/continuePopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts","./UImanager.ts","./global.ts","./LevelLoader.ts"],(function(t){var e,n,i,o,r,u,l,a,c,p,s,f,h,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,u=t._decorator,l=t.Button,a=t.Label,c=t.Node,p=t.Sprite},function(t){s=t.BasePopup},function(t){f=t.UImanager},function(t){h=t.Popup},function(t){m=t.LevelLoader}],execute:function(){var b,g,d,v,w,P,y,C,L;r._RF.push({},"faac8qYpV9KXp2I30ztwCOi","continuePopup",void 0);var z=u.ccclass,I=u.property;t("Continue",(b=z("Continue"),g=I(l),d=I(a),v=I(c),b((y=e((P=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),u=0;u<n;u++)r[u]=arguments[u];return e=t.call.apply(t,[this].concat(r))||this,i(e,"continue",y,o(e)),i(e,"countdownlabel",C,o(e)),i(e,"fill",L,o(e)),e.timer=5,e.currentTime=0,e.cur=0,e}n(e,t);var r=e.prototype;return r.onPopupShow=function(t){var e=this.fill.getComponent(p);e&&(e.fillRange=1),this.countdownlabel.string="5",this.cur=t},r.update=function(t){this.currentTime+=t;var e=Math.min(this.currentTime/this.timer,1),n=this.fill.getComponent(p);n&&(n.fillRange=1-e);var i=Math.max(0,Math.ceil(this.timer-this.currentTime));this.countdownlabel.string=""+i,this.currentTime>=this.timer&&this.onCountdownComplete()},r.onCountdownComplete=function(){f.showPopup(h.FAILPOPUP,!0,m.getInstance().getCurrentLevelNumber())},e}(s)).prototype,"continue",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(P.prototype,"countdownlabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(P.prototype,"fill",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),w=P))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/Countdown.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SoundManager.ts","./global.ts","./type.ts"],(function(t){var n,e,i,o,r,s,a,c,u,l,h,d,m,p,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.Node,c=t.Sprite,u=t.director,l=t.find,h=t.Animation,d=t.Component},function(t){m=t.SoundManager},function(t){p=t.SFX},function(t){f=t.TileConnect}],execute:function(){var T,C,E,b,v;r._RF.push({},"6fdbaOrIMdOZL1cybBWtB4E","Countdown",void 0);var S=s.ccclass,g=s.property;t("Countdown",(T=S("Countdown"),C=g(a),T((v=n((b=function(t){function n(){for(var n,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return(n=t.call.apply(t,[this].concat(r))||this).timer=40,n.currentTime=0,i(n,"bom",v,o(n)),n}e(n,t);var r=n.prototype;return r.start=function(){var t=this.node.getComponent(c);t&&(t.fillRange=-1),this.enabled=!1,u.on(f.GAME_EVENTS.COUNTDOWN_RESET,this.resetToInitialState,this),u.on(f.GAME_EVENTS.START_COUNTDOWN,this.startCountdown,this)},r.update=function(t){if(this.enabled){this.currentTime+=t;var n=Math.min(this.currentTime/this.timer,1),e=this.node.getComponent(c);e&&(e.fillRange=-1+n),this.currentTime>=this.timer&&this.onCountdownComplete()}},r.onCountdownComplete=function(){this.enabled=!1,m.instance.playSFX(p.EXPLODE),this.playAnimation(),this.resetCountdown(),this.node.parent.active=!1},r.resetToInitialState=function(){this.enabled=!1,this.node.parent.active=!0,this.currentTime=0;var t=this.node.getComponent(c);t&&(t.fillRange=-1)},r.startCountdown=function(){this.enabled=!0,this.node.parent.active=!0},r.playAnimation=function(){var t=this;this.bom.active=!0;var n=this.bom.parent,e=this.bom.worldPosition,i=l("Canvas")||this.node.scene;this.bom.setParent(i),this.bom.worldPosition=e;var o=this.bom.getComponent(h);o&&(o.play(),console.log(e),o.once(h.EventType.FINISHED,(function(){t.bom.active=!1,t.bom.setParent(n),t.bom.worldPosition=e,t.scheduleOnce((function(){u.emit(f.GAME_EVENTS.COUNTDOWN_COMPLETE)}),.5)})))},r.resetCountdown=function(){this.currentTime=0;var t=this.node.getComponent(c);t&&(t.fillRange=-1)},r.setCountdownTime=function(t){this.timer=t,this.resetToInitialState()},r.onDestroy=function(){u.off(f.GAME_EVENTS.COUNTDOWN_RESET,this.resetToInitialState,this),u.off(f.GAME_EVENTS.START_COUNTDOWN,this.startCountdown,this)},n}(d)).prototype,"bom",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=b))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/CountdownForTutorial.ts",["./rollupPluginModLoBabelHelpers.js","cc","./type.ts"],(function(t){var e,n,i,o,r,a,s,l,c,u,h,f,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,s=t.Node,l=t.Sprite,c=t.Vec3,u=t.tween,h=t.director,f=t.Component},function(t){d=t.TileConnect}],execute:function(){var p,w,m,g,C,T,v;r._RF.push({},"03b56Dz5l9CY6Pg/SLW94j+","CountdownForTutorial",void 0);var y=a.ccclass,b=a.property;t("Countdown",(p=y("Countdown"),w=b(s),m=b(s),p((T=e((C=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))||this).timer=3,e.currentTime=0,i(e,"fail",T,o(e)),i(e,"wing",v,o(e)),e}n(e,t);var r=e.prototype;return r.start=function(){var t=this.node.getComponent(l);t&&(t.fillRange=-1),this.enabled=!0,this.fail.active=!1,this.wing.active=!1,this.fail.scale=new c(0,0,1),this.wing.scale=new c(0,0,1)},r.reset=function(){this.enabled=!0,this.fail.active=!1,this.wing.active=!1,this.fail.scale=new c(0,0,1),this.wing.scale=new c(0,0,1),this.resetCountdown()},r.update=function(t){if(this.enabled){this.currentTime+=t;var e=Math.min(this.currentTime/this.timer,1),n=this.node.getComponent(l);n&&(n.fillRange=-1+e),this.currentTime>=this.timer&&this.onCountdownComplete()}},r.onCountdownComplete=function(){this.enabled=!1,this.playAnimation(),this.resetCountdown()},r.resetToInitialState=function(){this.enabled=!1,this.node.parent.active=!0,this.currentTime=0;var t=this.node.getComponent(l);t&&(t.fillRange=-1)},r.startCountdown=function(){this.enabled=!0,this.node.parent.active=!0},r.playAnimation=function(){var t=this;this.fail.active=!0,this.wing.active=!0,u(this.fail).to(.5,{scale:new c(.5,.5,1)}).delay(.2).call((function(){u(t.wing).to(.5,{scale:new c(1,1,1)}).delay(.2).call((function(){t.reset()})).start()})).start()},r.resetCountdown=function(){this.currentTime=0;var t=this.node.getComponent(l);t&&(t.fillRange=-1)},r.setCountdownTime=function(t){this.timer=t,this.resetToInitialState()},r.onDestroy=function(){h.off(d.GAME_EVENTS.COUNTDOWN_RESET,this.resetToInitialState,this),h.off(d.GAME_EVENTS.START_COUNTDOWN,this.startCountdown,this)},e}(f)).prototype,"fail",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(C.prototype,"wing",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=C))||g));r._RF.pop()}}}));

System.register("chunks:///_virtual/Dash.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,i,o,a,r,c,l,s,u,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,r=t._decorator,c=t.Button,l=t.UIOpacity,s=t.director,u=t.tween,p=t.Component}],execute:function(){var y,h,d,f,b,B,g;a._RF.push({},"094ddDU08RPD6slWX+4TwMI","Dash",void 0);var v=r.ccclass,w=r.property;t("Dash",(y=v("Dash"),h=w(c),d=w(l),y((B=e((b=function(t){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=t.call.apply(t,[this].concat(a))||this,i(e,"playButton",B,o(e)),i(e,"bgOpacity",g,o(e)),e.isScenePreloaded=!1,e}n(e,t);var a=e.prototype;return a.__preload=function(){s.preloadScene("Prototype")},a.start=function(){this.playButton&&this.playButton.node.on("click",this.onPlayButtonClick,this)},a.onPlayButtonClick=function(){this.playButton&&(this.playButton.node.active=!1),this.fadeOutAndSwitch()},a.fadeOutAndSwitch=function(){var t=this;u(this.bgOpacity).to(.5,{opacity:0}).call((function(){t.switchToGameScene()})).start()},a.switchToGameScene=function(){s.loadScene("Prototype")},e}(p)).prototype,"playButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g=e(b.prototype,"bgOpacity",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=b))||f));a._RF.pop()}}}));

System.register("chunks:///_virtual/EndTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts","./BaseTurn.ts"],(function(n){var t,i,e,o,u;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy},function(n){e=n.Turn},function(n){o=n.AnimationHandler},function(n){u=n.BaseTurn}],execute:function(){i._RF.push({},"7e7fdGaaZ9HxoPiuFIXzRzg","EndTurn",void 0);n("EndTurn",function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var u=i.prototype;return u.onEnter=function(){var n=this;console.log("end"),this.game.isWin()&&Promise.all(o.animList).then((function(){n.game.isWin()?n.game.switchTurn(e.WIN):n.game.switchTurn(e.START)}))},u.onExit=function(){},u.onUpdate=function(){},i}(u));i._RF.pop()}}}));

System.register("chunks:///_virtual/fail-popup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts"],(function(e){var t,i,r,o,n,l,p,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){n=e.cclegacy,l=e._decorator,p=e.Label},function(e){a=e.BasePopup}],execute:function(){var c,u,s,f,h;n._RF.push({},"bc1f19BDEdJOLEwAl5uYpN5","fail-popup",void 0);var v=l.ccclass,y=l.property;e("Fail",(c=v("Fail"),u=y(p),c((h=t((f=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),l=0;l<i;l++)n[l]=arguments[l];return t=e.call.apply(e,[this].concat(n))||this,r(t,"level",h,o(t)),t}return i(t,e),t.prototype.onPopupShow=function(e){this.level.string="LEVEL "+e},t}(a)).prototype,"level",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=f))||s));n._RF.pop()}}}));

System.register("chunks:///_virtual/FailTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts"],(function(n){var t,o,u,e,i;return{setters:[function(n){t=n.inheritsLoose},function(n){o=n.cclegacy},function(n){u=n.Popup},function(n){e=n.UImanager},function(n){i=n.BaseTurn}],execute:function(){o._RF.push({},"61b07ACKfhNEKxk69/h4V23","FailTurn",void 0);n("FailTurn",function(n){function o(){return n.apply(this,arguments)||this}t(o,n);var i=o.prototype;return i.onEnter=function(){this.game.turnOffInput(),e.togglePauseButton(!1),this.game.unChoose(),console.log("Fail"),e.showPopup(u.CONTINUE,!0,this.game.currentNumber())},i.onExit=function(){},i.onUpdate=function(){},o}(i));o._RF.pop()}}}));

System.register("chunks:///_virtual/FillProgressBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AnimationHandler.ts","./GameManager.ts","./SoundManager.ts","./global.ts"],(function(t){var i,e,n,s,l,r,o,a,h,c,u,d,f,g,p,m,v;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,s=t.assertThisInitialized},function(t){l=t.cclegacy,r=t._decorator,o=t.Sprite,a=t.Label,h=t.UITransform,c=t.tween,u=t.Vec3,d=t.Tween,f=t.Component},function(t){g=t.AnimationHandler},function(t){p=t.default},function(t){m=t.SoundManager},function(t){v=t.SFX}],execute:function(){var y,b,S,z,w,F,P,B,x,L,T,R,M,A,C,N,W,_,k;l._RF.push({},"6a5a6pwZ/1Ba7vEmcx463CK","FillProgressBar",void 0);var D=r.ccclass,H=r.property;t("FillProgressBar",(y=D("FillProgressBar"),b=H(p),S=H(o),z=H(o),w=H(o),F=H(o),P=H(o),B=H(o),x=H(a),y((R=i((T=function(t){function i(){for(var i,e=arguments.length,l=new Array(e),r=0;r<e;r++)l[r]=arguments[r];return i=t.call.apply(t,[this].concat(l))||this,n(i,"gm",R,s(i)),n(i,"left",M,s(i)),n(i,"right",A,s(i)),n(i,"mid",C,s(i)),n(i,"star",N,s(i)),n(i,"star1",W,s(i)),n(i,"star9",_,s(i)),i.currentStar=null,i.total=0,i.currentTile=0,i.size=0,i.isFirstFill=!0,i.tailNode=null,i.currentActive=0,i.score=0,n(i,"level",k,s(i)),i}e(i,t);var l=i.prototype;return l.start=function(){var t,i,e,n,s,l;(this.left.node.setScale(0,this.left.node.scale.y,this.left.node.z),this.right.node.setScale(0,this.right.node.scale.y,this.right.node.z),this.mid.node.setScale(0,this.mid.node.scale.y,this.mid.node.z),this.tailNode=this.mid.node.getChildByName("taile"),this.size=null!=(t=null==(i=this.node.getChildByName("bar"))||null==(i=i.getComponent(h))?void 0:i.contentSize.x)?t:0,g.setFillProgressBar(this),this.currentStar=null!=(e=null==(n=this.star)?void 0:n.node)?e:null,this.gm)&&(this.total=null!=(s=null==(l=this.gm)||null==(l=l.currentLevel)?void 0:l.getTileNum())?s:0,console.log(this.total),this.level.string="Lvl "+this.gm.currentNumber())},l.onTilesMatched=function(t){console.log("Tiles matched!"),this.updateProgressBar()},l.updateProgressBar=function(){if(!(this.mid.node.scale.x>8||this.total<=0||this.size<=0)){var t=18/this.total;this.isFirstFill&&t>0&&(this.showLeft(),this.showRight(),this.isFirstFill=!1),this.updateMidWidth(t),this.checkActive()}},l.isLastStar=function(){var t;return this.currentStar==(null==(t=this.star1)?void 0:t.node)},l.updateTillWin=function(){var t,i;this.showLeft(),this.updateMidWidth(8-this.mid.node.scale.x),this.star.node.active=!0,this.star9.node.active=!0,this.star1.node.active=!0,this.currentStar=null!=(t=null==(i=this.star1)?void 0:i.node)?t:null},l.checkActive=function(){var t,i,e,n;this.mid.node.scale.x>=4.5&&(this.star.node.active=!0,this.currentStar=null!=(t=null==(i=this.star9)?void 0:i.node)?t:null);this.mid.node.scale.x>=6&&(this.star9.node.active=!0,this.currentStar=null!=(e=null==(n=this.star1)?void 0:n.node)?e:null);this.mid.node.scale.x>=7.4&&(this.star1.node.active=!0)},l.showLeft=function(){this.left.node.setScale(1,this.left.node.scale.y,this.left.node.scale.z)},l.updateMidWidth=function(t){var i=this;m.instance.playSFX(v.PROGRESS),c(this.mid.node).to(.3,{scale:new u(t+this.mid.node.scale.x,this.mid.node.scale.y,this.mid.node.scale.z)},{onUpdate:function(){i.updateRightPosition()}}).start()},l.updateRightPosition=function(){if(this.right&&this.mid){var t=this.mid.node.getComponent(h);if(t){var i=t.contentSize.x*this.mid.node.scale.x,e=t.anchorX,n=this.mid.node.position.x+i*(1-e);this.right.node.setPosition(n,this.right.node.position.y,this.right.node.position.z)}}},l.showRight=function(){this.updateRightPosition(),this.right.node.setScale(1,this.right.node.scale.y,this.right.node.scale.z)},l.resetProgressBar=function(){var t,i,e;d.stopAllByTarget(null==(t=this.mid)?void 0:t.node),this.score=0,this.currentTile=0,this.isFirstFill=!0,this.left.node.setScale(0,this.left.node.scale.y,this.left.node.z),this.right.node.setScale(0,this.right.node.scale.y,this.right.node.z),this.mid.node.setScale(0,this.mid.node.scale.y,this.mid.node.z),this.star.node.active=!1,this.star1.node.active=!1,this.star9.node.active=!1,this.currentStar=null!=(i=null==(e=this.star)?void 0:e.node)?i:null},l.setTotal=function(t){this.total=t},l.setLv=function(t){this.level.string="Lvl "+t},i}(f)).prototype,"gm",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(T.prototype,"left",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(T.prototype,"right",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=i(T.prototype,"mid",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=i(T.prototype,"star",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(T.prototype,"star1",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=i(T.prototype,"star9",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(T.prototype,"level",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L=T))||L));l._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"066a2a7XoVHzJHXDKi1vGjH","GameConfig",void 0);e("default",{TileSize:85});t._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./type.ts","./Board.ts","./LevelLoader.ts","./PathPool.ts","./StarPool.ts","./TilePool.ts","./SubTilePool.ts","./BaseTurn.ts","./EndTurn.ts","./LoadTurn.ts","./MatchTurn.ts","./StartTurn.ts","./AdsTurn.ts","./BombFail.ts","./FailTurn.ts","./PauseTurn.ts","./WinTurn.ts","./UImanager.ts","./ItemManager.ts","./InvalidPool.ts","./NopePool.ts","./SoundManager.ts","./ConfettiManager.ts"],(function(t){var e,i,n,o,r,s,a,l,h,u,c,f,v,d,g,T,m,p,C,P,L,b,E,N,w,y,S,A,M,O,I,B,z,D,F,U,_,W,k,V,H,R,G,K,X,x,j,Y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.assertThisInitialized,o=t.initializerDefineProperty,r=t.createForOfIteratorHelperLoose},function(t){s=t.cclegacy,a=t._decorator,l=t.director,h=t.view,u=t.Vec3,c=t.Widget,f=t.find,v=t.Button,d=t.EventHandler,g=t.Tween,T=t.ParticleSystem2D,m=t.Component,p=t.tween,C=t.Color},function(t){P=t.Item,L=t.Turn,b=t.SUBTILE_PATH,E=t.TileType,N=t.SFX,w=t.getAllDescendants},function(t){y=t.TileConnect},function(t){S=t.default},function(t){A=t.LevelLoader},function(t){M=t.default},function(t){O=t.default},function(t){I=t.default},function(t){B=t.default},function(t){z=t.BaseTurn},function(t){D=t.EndTurn},function(t){F=t.LoadTurn},function(t){U=t.MatchTurn},function(t){_=t.StartTurn},function(t){W=t.AdsTurn},function(t){k=t.BombFail},function(t){V=t.FailTurn},function(t){H=t.PauseTurn},function(t){R=t.WinTurn},function(t){G=t.UImanager},function(t){K=t.ItemManager},function(t){X=t.default},function(t){x=t.default},function(t){j=t.SoundManager},function(t){Y=t.ConfettiManager}],execute:function(){var q,J,Q,Z,$,tt,et,it,nt,ot,rt,st,at,lt,ht,ut,ct,ft,vt;s._RF.push({},"d7cedYkadBLIrlmBMhdIKaL","GameManager",void 0);var dt=a.ccclass,gt=a.property;t("default",(q=dt("GameManager"),J=gt(I),Q=gt(Map),Z=gt(K),$=gt(M),tt=gt(O),et=gt(X),it=gt(x),nt=gt(Y),q((st=e((rt=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))||this).levelLoader=A.getInstance(),e.currentLevel=void 0,e.time=0,e.isFirstTouch=0,e.ispause=!1,e.turnList=new Map,e.eventTarget=new EventTarget,e.currentTurn=new z(n(e)),e.board=new S,e.matchPair=[],o(e,"tilePool",st,n(e)),o(e,"subtilePool",at,n(e)),o(e,"itemManager",lt,n(e)),o(e,"pathPool",ht,n(e)),o(e,"starPool",ut,n(e)),o(e,"invalid",ct,n(e)),o(e,"nope",ft,n(e)),e.firstChosen=null,e.secondChosen=null,e.hintPath=[],e.hintPoint=[],e.hintTile=[],e.isgameOver=!1,o(e,"conf",vt,n(e)),e}i(e,t);var s=e.prototype;return s.onMatchPair=function(t){this.eventTarget.addEventListener("matchPair",t)},s.offMatchPair=function(t){this.eventTarget&&this.eventTarget.removeEventListener("matchPair",t)},s.onTouch=function(t){this.eventTarget.addEventListener("touch",t)},s.offTouch=function(t){this.eventTarget&&this.eventTarget.removeEventListener("touch",t)},s.offChoose=function(t){this.eventTarget&&this.eventTarget.removeEventListener("choose",t)},s.onChoose=function(t){this.eventTarget.addEventListener("choose",t)},s.emitChoose=function(){this.eventTarget.dispatchEvent(new Event("choose"))},s.emitMatchPair=function(){this.eventTarget.dispatchEvent(new Event("matchPair"))},s.emitTouch=function(){this.eventTarget.dispatchEvent(new Event("touch"))},s.stopHint=function(){var t;if(0!=this.hintPath.length){for(var e,i=r(this.hintPath);!(e=i()).done;){var n=e.value;n.updateVisual(n.node)}for(var o,s=function(){var t=o.value;p(t.circle).to(.2,{color:new C(255,255,255,0)}).call((function(){t.kill(),t.circle.color=new C(255,255,255,255)})).start()},a=r(this.hintPoint);!(o=a()).done;)s();this.hintTile.forEach((function(t){t.onUnHint()})),this.hintPath=[],this.hintPoint=[],this.hintTile=[],null==(t=this.itemManager)||null==(t=t.itemList.get(P.HINT))||t.enableFunction()}},s.start=function(){var t,e,i,n,o,r=this;null==(t=this.tilePool)||t.initialize(this),null==(e=this.pathPool)||e.initialize(this),null==(i=this.starPool)||i.initialize(this),null==(n=this.invalid)||n.initialize(this),null==(o=this.nope)||o.initialize(this),this.subTilePoolInit(),this.hideAll(),l.on(y.GAME_EVENTS.START_COUNTDOWN,(function(){}),this),this.levelLoader.restartLevel().then((function(){r.currentLevel=r.levelLoader.getCurrentLevel(),console.log(r.pathPool);var t=h.getVisibleSize();t.height>=t.width?(r.node.setPosition(new u(0,0)),r.currentLevel.scale=t.width/(r.currentLevel.gridWidth+3)/80):(r.node.setPosition(new u(0,-50)),r.currentLevel.scale=t.height/(r.currentLevel.gridHeight+3)/80),r.currentLevel.tileSize=80*r.currentLevel.scale+5,r.turnInit(),h.on("canvas-resize",r.resize,r),l.on(y.GAME_EVENTS.COUNTDOWN_COMPLETE,(function(){r.switchTurn(L.BOOM)}),r)}))},s.resize=function(){var t,e,i=this,n=h.getVisibleSize(),o=null==(t=this.node.getChildByName("Overlay"))?void 0:t.getComponent(c);n.height>=n.width?(o&&(o.verticalCenter=0),this.node.setPosition(new u(0,0)),this.currentLevel.scale=n.width/(this.currentLevel.gridWidth+3)/80):(o&&(o.verticalCenter=50),this.node.setPosition(new u(0,-50)),this.currentLevel.scale=n.height/(this.currentLevel.gridHeight+3)/80),this.currentLevel.tileSize=80*this.currentLevel.scale+5,null==(e=this.board)||e.board.forEach((function(t){t.forEach((function(t){t.reScale(i.currentLevel.scale),t.moveToRealPositionWithPadding(i.currentLevel,!1)}))}))},s.subTilePoolInit=function(){for(var t,e=this,i=f(b),n=r(null==i?void 0:i.children);!(t=n()).done;){var o=t.value;this.subtilePool.set(o.name,null==o?void 0:o.getComponent(B))}this.subtilePool.forEach((function(t){t.initialize(e)}))},s.isWin=function(){for(var t,e=r(this.board.board);!(t=e()).done;)for(var i,n=t.value,o=r(n);!(i=o()).done;){if(i.value.getTypeID()!=E.NONE)return!1}return!0},s.turnInit=function(){this.turnList.set(L.START,new _(this)),this.turnList.set(L.MATCH,new U(this)),this.turnList.set(L.END,new D(this)),this.turnList.set(L.LOAD,new F(this)),this.turnList.set(L.FAIL,new V(this)),this.turnList.set(L.WIN,new R(this)),this.turnList.set(L.PAUSE,new H(this)),this.turnList.set(L.BOOM,new k(this)),this.turnList.set(L.ADS,new W(this)),this.switchTurn(L.LOAD)},s.isSame=function(t,e){return t.getCoordinate().x===e.getCoordinate().x&&t.getCoordinate().y===e.getCoordinate().y},s.hideBot=function(){var t=this.node.scene.getChildByName("Canvas");if(t){var e=t.getChildByName("Bot");e&&(e.active=!1)}},s.hideAll=function(){var t,e=this.node.scene.getChildByName("Canvas");if(console.log("hide"),e){var i=e.getChildByName("Top"),n=e.getChildByName("Bot"),o=f("UImanager/combo",e),r=f("UImanager/good",e);null==(t=this.itemManager)||t.hideAll(),i&&(i.active=!1),n&&(n.active=!1),o&&(o.active=!1),r&&(r.active=!1)}},s.showAll=function(){var t=this.node.scene.getChildByName("Canvas");if(console.log("hide"),t){var e=t.getChildByName("Top"),i=f("UImanager/combo",t),n=f("UImanager/good",t),o=t.getChildByName("Bot");e&&(e.active=!0),o&&h.getVisibleSize().height>h.getVisibleSize().width&&(o.active=!0),i&&(i.active=!0),n&&(n.active=!0),this.resize()}},s.sameType=function(t,e){var i=t.getLabel(),n=e.getLabel();if(i===n)return!0;var o=this.evaluateLabel(i),r=this.evaluateLabel(n);return console.log('Comparing: "'+i+'" (value='+o+') vs "'+n+'" (value='+r+")"),!isNaN(o)&&!isNaN(r)&&o===r},s.evaluateLabel=function(t){if(!t||""===t||"ROCKET"===t)return NaN;try{if(/[\+\-\*\/]/.test(t)){var e=Function('"use strict"; return ('+t+")")();return"number"==typeof e?e:NaN}var i=parseFloat(t);return isNaN(i)?NaN:i}catch(e){return console.error('Error evaluating label "'+t+'":',e),NaN}},s.adsPop=function(){var t;this.switchTurn(L.ADS);var e=null==(t=this.itemManager)?void 0:t.skipButton.getComponent(v);if(e){e.clickEvents.length=0;var i=new d;i.target=this.node,i.component="GameManager",i.handler="rescue",e.clickEvents.push(i)}console.log(this.currentTurn)},s.choose=function(t){var e;if(t.getTypeID()!=E.NONE){var i,n,o;if(this.emitTouch(),this.isFirstTouch++,1==this.isFirstTouch&&l.emit(y.GAME_EVENTS.START_COUNTDOWN),console.log(t.getCoordinate()),!this.firstChosen||!this.sameType(this.firstChosen,t))return null==(i=this.firstChosen)||i.onUnchoose(),this.firstChosen=t,this.firstChosen.onChoose(),this.stopHint(),void console.log("first: ",this.firstChosen.getCoordinate(),"second: ",null==(n=this.secondChosen)?void 0:n.getCoordinate());if(this.isSame(t,this.firstChosen))return null==(o=this.firstChosen)||o.onChoose(),void this.unChoose();this.emitChoose(),this.secondChosen=t,console.log("first: ",this.firstChosen.getCoordinate(),"second: ",null==(e=this.secondChosen)?void 0:e.getCoordinate()),this.matchPair.push({tile1:this.firstChosen,tile2:this.secondChosen}),this.unChoose(),this.switchTurn(L.MATCH)}},s.unChoose=function(){var t;null==(t=this.firstChosen)||t.onUnchoose(),this.firstChosen=null,this.secondChosen=null},s.match=function(){if(this.matchPair.length>0){var t,e,i;console.log(this.matchPair[0]);var n=null==(t=this.board)?void 0:t.getPath(this.matchPair[0].tile1,this.matchPair[0].tile2);null!=(e=this.board)&&e.canMatch(this.matchPair[0].tile1,this.matchPair[0].tile2,n.path,n.turnNum)&&this.emitMatchPair(),null==(i=this.board)||i.match(this.matchPair[0].tile1,this.matchPair[0].tile2),this.matchPair.shift()}},s.currentNumber=function(){return this.levelLoader.getCurrentLevelNumber()},s.poolInit=function(){},s.createBoard=function(t){var e,i,n;this.hintPath=[],this.hintPoint=[],this.hintTile=[],this.subtilePool.forEach((function(t){t.returnAll()})),null==(e=this.tilePool)||e.returnAll(),null==(i=this.itemManager)||i.intialize(this),null==(n=this.board)||n.create(this.tilePool,t);for(var o,s=r(this.subtilePool);!(o=s()).done;){var a,l=o.value;null==(a=this.board)||a.addSubTile(l[1],this.currentLevel,l[0])}this.currentLevel=this.levelLoader.getCurrentLevel()},s.switchTurn=function(t){this.isgameOver||(this.currentTurn&&this.currentTurn.onExit(),this.currentTurn=this.turnList.get(t),this.currentTurn.onEnter())},s.hideItem=function(){this.itemManager.node.active=!1},s.showItem=function(){this.itemManager.node.active=!0},s.turnOnInput=function(){var t=this;this.tilePool.itemList.forEach((function(e){0==e.onClickCallbacks.length&&e.addOnClickCallback((function(e){return t.choose(e)}))}))},s.restart=function(){var t=this;j.instance.playSFX(N.CLICK),this.ispause=!1,this.isgameOver=!1;for(var e,i=w(this.node),n=r(i);!(e=n()).done;){var o,s=e.value;g.stopAllByTarget(s),null==(o=s.getComponent(T))||o.stopSystem()}G.togglePauseButton(!0),G.hideAllPopups(),this.levelLoader.checkNeedToChange("failed"),this.levelLoader.restartLevel().then((function(){l.emit(y.GAME_EVENTS.COUNTDOWN_RESET),t.switchTurn(L.LOAD)}))},s.pause=function(){j.instance.playSFX(N.CLICK),this.ispause=!0,G.hideAllPopups(),G.togglePauseButton(!1),this.switchTurn(L.PAUSE)},s.rescue=function(){j.instance.playSFX(N.CLICK),this.isgameOver=!1,this.ispause=!1,G.hideAllPopups(),G.togglePauseButton(!0),this.time+=65,l.emit(y.GAME_EVENTS.COUNTDOWN_RESET),l.emit(y.GAME_EVENTS.START_COUNTDOWN),this.turnOnInput(),this.switchTurn(L.START)},s.unPause=function(){this.ispause=!1,j.instance.playSFX(N.CLICK);for(var t,e=w(this.node),i=r(e);!(t=i()).done;){var n,o=t.value;if(g.resumeAllByTarget(o),o.getComponent(T))null==(n=o.getComponent(T))||n.resetSystem()}G.hideAllPopups(),G.togglePauseButton(!0),this.turnOnInput(),this.showItem(),this.switchTurn(L.START)},s.moveOn=function(){var t=this;j.instance.playSFX(N.CLICK),this.isgameOver=!1,this.ispause=!1,G.togglePauseButton(!0),G.hideAllPopups(),this.levelLoader.checkNeedToChange("completed"),this.levelLoader.changeLevel().then((function(){t.switchTurn(L.LOAD)}))},s.turnOffInput=function(){this.tilePool.itemList.forEach((function(t){t.clearOnClickCallbacks()}))},s.onDestroy=function(){l.off(y.GAME_EVENTS.COUNTDOWN_COMPLETE,(function(){}),this)},s.setActive=function(t){this.node.active=t},e}(m)).prototype,"tilePool",[J],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=e(rt.prototype,"subtilePool",[Q],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),lt=e(rt.prototype,"itemManager",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ht=e(rt.prototype,"pathPool",[$],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ut=e(rt.prototype,"starPool",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ct=e(rt.prototype,"invalid",[et],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ft=e(rt.prototype,"nope",[it],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),vt=e(rt.prototype,"conf",[nt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ot=rt))||ot));s._RF.pop()}}}));

System.register("chunks:///_virtual/GameScene.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,c,r,a,o,p,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,c=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,o=e.UIOpacity,p=e.director,s=e.Component}],execute:function(){var u,l,f,y,h;r._RF.push({},"221c8DepV1PrIWy8sve3UVf","GameScene",void 0);var d=a.ccclass,m=a.property;e("GameScene",(u=d("GameScene"),l=m(o),u((h=t((y=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"bgOpacity",h,c(t)),t}n(t,e);var r=t.prototype;return r.onLoad=function(){this.bgOpacity.opacity=255},r.update=function(e){},r.fadeOutAndSwitch=function(){this.switchToGameScene()},r.switchToGameScene=function(){p.loadScene("DashBoard")},t}(s)).prototype,"bgOpacity",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=y))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/global.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts"],(function(e){var t,o,n,i,r,T,u;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,n=e.Vec2,i=e.view,r=e.Vec3,T=e.easing},function(e){u=e.default}],execute:function(){e({backInSlowEnd:function(e){return e<.5?T.backIn(2*e)/2:.5+T.cubicOut(2*(e-.5))/2},getAllDescendants:function(e){var o=[];return function e(n){for(var i,r=t(n.children);!(i=r()).done;){var T=i.value;o.push(T),e(T)}}(e),o},getComboCount:function(e){return"resources/animation/"+e},getScale:function(){var e=i.getVisibleSize(),t=e.width/720,o=e.width/1280,n=Math.max(t,o);return new r(n,n)},getTilePath:function(e,t){return"AllTiles/rocket/spriteFrame"},getTilePosition:function(e,t,o,i,r){var T=i*u.TileSize/2,l=o*u.TileSize/2,E=t*u.TileSize+u.TileSize/2-T,O=-(e*u.TileSize+u.TileSize/2-l);return new n(E,O)},getTilePositionByLevel:function(e,t,o,i){void 0===i&&(i=0);var r=o.tileSize,T=(o.gridWidth+2*i)*r,u=(o.gridHeight+2*i)*r;return new n(e*r+r/2-T/2,-(t*r+r/2-u/2))}}),o._RF.push({},"99b72YbvlRKuojoDTLGRoZ0","global",void 0);e("SubType",function(e){return e.BOOM="BOOM",e.GRAVITY="GRAVITY",e.ROCKET="ROCKET",e.BUTTERFLY="BUTTERFLY",e}({})),e("Turn",function(e){return e[e.LOAD=0]="LOAD",e[e.START=1]="START",e[e.MATCH=2]="MATCH",e[e.END=3]="END",e[e.PAUSE=4]="PAUSE",e[e.FAIL=5]="FAIL",e[e.WIN=6]="WIN",e[e.BOOM=7]="BOOM",e[e.ADS=8]="ADS",e}({})),e("TileType",function(e){return e[e.NONE=-1]="NONE",e[e.TYPE0=0]="TYPE0",e[e.TYPE1=1]="TYPE1",e[e.TYPE2=2]="TYPE2",e[e.TYPE3=3]="TYPE3",e[e.TYPE4=4]="TYPE4",e[e.TYPE5=5]="TYPE5",e[e.TYPE6=6]="TYPE6",e[e.TYPE7=7]="TYPE7",e[e.ROCKET=8]="ROCKET",e}({})),e("Popup",function(e){return e.FAILPOPUP="failPopUp",e.BOOMPOPUP="boomPopup",e.WINPOPUP="victoryPopup",e.PAUSEPOPUP="pausePopup",e.ADSPOPUP="adsPopup",e.CONTINUE="continuePopup",e.ROCKETTUTORIAL="rocketTutorial",e.BOOMTUTORIAL="Bomtuto",e}({})),e("Theme",function(e){return e.NONE="",e.CAKE="Img0_",e.FRUIT="Img1_",e.FISH="Img2_",e.CHAR="Img3_",e.VEHICLE="Img4_",e.ANIMAL="Img5_",e.FASHION="Img6_",e.SHELL="Img7_",e.BUTTERFLY="Img8_",e.DRINK="Img9_",e}({}));e("FIREWORK_PATH","AllTiles/firework/spriteFrame");e("SUBTILE_PATH","Canvas/SubtilePool"),e("ROCKET_NODE_PATH","Canvas/SubtilePool/RocketPool"),e("GRAVITY_NODE_PATH","Canvas/SubtilePool/GravityPool"),e("BOOM_NODE_PATH","Canvas/SubtilePool/BoomPool"),e("Direction",function(e){return e[e.NONE=0]="NONE",e[e.UP=1]="UP",e[e.RIGHT=2]="RIGHT",e[e.DOWN=3]="DOWN",e[e.LEFT=4]="LEFT",e}({})),e("directionValue",{none:new n(0,0),up:new n(0,1),right:new n(1,0),down:new n(0,-1),left:new n(-1,0)}),e("Item",function(e){return e.HINT="HintItem",e.BOOM="BoomDefuseItem",e.SHUFFLE="ShuffleItem",e.ROCKET="RocketItem",e.SUPERROCKET="SuperRocketItem",e}({})),e("ROCKET_PATH","sprite/prop_rocket/spriteFrame");e("SFX",function(e){return e.CLICK="clicks",e.COLLECT_STAR="collect_stars",e.PROGRESS="progress_star",e.LEVELSTART="level_start",e.COMBO1="combo_1",e.COMBO2="combo_2",e.COMBO3="combo_3",e.COMBO4="combo_4",e.COMBO5="combo_5",e.LEVELCOMPLETE="level_complete",e.THREE_STAR="three_stars",e.ROCKET_FLY="rocket_fly",e.EXPLODE="bomb_explode_1",e.INVALID_MATCH="invalid_match",e}({}));o._RF.pop()}}}));

System.register("chunks:///_virtual/GoodPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./type.ts"],(function(t){var i,e,n,o,r,s,a,l,c,u,h,g,p,d,m,f,b;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,s=t._decorator,a=t.SpriteFrame,l=t.Node,c=t.Vec3,u=t.director,h=t.Sprite,g=t.Tween,p=t.Color,d=t.tween,m=t.Component},function(t){f=t.default},function(t){b=t.TileConnect}],execute:function(){var v,w,y,C,P,T,M,O,S,z,F,L,A;r._RF.push({},"d3896edoUNFH6c8V2svOnF6","GoodPopup",void 0);var N=s.ccclass,G=s.property;t("Good",(v=N("Good"),w=G(f),y=G([a]),C=G([a]),P=G(l),T=G(l),v((S=i((O=function(t){function i(){for(var i,e=arguments.length,r=new Array(e),s=0;s<e;s++)r[s]=arguments[s];return i=t.call.apply(t,[this].concat(r))||this,n(i,"gm",S,o(i)),i.timer=5,i.currentTime=0,i.comboCount=0,n(i,"listSprite",z,o(i)),n(i,"listLight",F,o(i)),i.boundOnMatchPair=null,n(i,"light",L,o(i)),n(i,"gud",A,o(i)),i.origin=new c,i}e(i,t);var r=i.prototype;return r.start=function(){this.gm&&(this.boundOnMatchPair=this.onMatchPair.bind(this),this.gm.onMatchPair(this.boundOnMatchPair)),this.node.active=!1,this.origin=this.node.position.clone(),u.on(b.GAME_EVENTS.COUNTDOWN_RESET,this.resetCombo1,this)},r.onDestroy=function(){this.gm&&this.boundOnMatchPair&&this.gm.offMatchPair(this.boundOnMatchPair)},r.update=function(t){this.currentTime+=t,this.currentTime>this.timer&&(this.node.active=!1,this.comboCount=0)},r.onMatchPair=function(){var t,i;if(this.comboCount++,!(this.comboCount<2)){var e=this.comboCount-2,n=Math.min(e,this.listSprite.length-1),o=null==(t=this.gud)?void 0:t.getComponent(h);o&&n>=0&&n<this.listSprite.length&&(o.spriteFrame=this.listSprite[n]);var r=null==(i=this.light)?void 0:i.getComponent(h);r&&n>=0&&n<this.listLight.length&&(r.spriteFrame=this.listLight[n]),this.gud.active=!1,this.light.active=!1,this.node.active=!0,this.playSequentialAnimation(),this.resetCombo()}},r.playSequentialAnimation=function(){g.stopAllByTarget(this.light),g.stopAllByTarget(this.gud),g.stopAllByTarget(this.node),this.showLight((function(){})),this.showPic((function(){})),this.moveNodeUp()},r.showLight=function(t){var i;this.light.active=!0,this.light.scale=new c(0,0,1),this.light.getComponent(h).color=new p(255,255,255,0),d(this.light).to(.3,{scale:new c(1,1,1)},{easing:"quadOut"}).call((function(){t&&t()})).start(),d(null==(i=this.light)?void 0:i.getComponent(h)).repeatForever(d().to(.1,{color:new p(255,255,255,255)},{easing:"sineOut"}).to(.1,{color:new p(255,255,255,0)},{easing:"sineOut"}).call((function(){t&&t()}))).start()},r.showPic=function(t){this.gud.active=!0,this.gud.scale=new c(0,0,1),d(this.gud).to(.3,{scale:new c(.8,.8,1)},{easing:"backOut"}).call((function(){t&&t()})).start()},r.moveNodeUp=function(){var t=this;this.node.setPosition(this.origin.clone());var i=this.node.position.clone(),e=new c(i.x,i.y+70,i.z);d(this.node).to(.6,{position:e},{easing:"quadOut"}).delay(.2).call((function(){d(t.node.getComponent(h)).to(.15,{color:new p(255,255,255,0)}).call((function(){t.node.getComponent(h).color=new p(255,255,255,255),t.gud.active=!1,t.light.active=!1,t.node.position=i})).start()})).start()},r.resetCombo=function(){this.currentTime=0},r.resetCombo1=function(){this.comboCount=0,this.currentTime=0},i}(m)).prototype,"gm",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(O.prototype,"listSprite",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=i(O.prototype,"listLight",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),L=i(O.prototype,"light",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=i(O.prototype,"gud",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=O))||M));r._RF.pop()}}}));

System.register("chunks:///_virtual/GravityManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts"],(function(e){var t,r,a,i,n,c,o;return{setters:[function(e){t=e.inheritsLoose},function(e){r=e.cclegacy,a=e._decorator,i=e.Vec2,n=e.Component},function(e){c=e.directionValue,o=e.Direction}],execute:function(){var s,u;r._RF.push({},"82dfaktVwVLkrbOVb+WvtfO","GravityManager",void 0);var l=a.ccclass;a.property,e("GravityManager",l("GravityManager")(((u=function(e){function r(){return e.apply(this,arguments)||this}return t(r,e),r.setCircle=function(e){r.gravityChangable=!!e},r.changeGravity=function(e){switch(e){case o.DOWN:r.direction=c.down;break;case o.UP:r.direction=c.up;break;case o.LEFT:r.direction=c.left;break;case o.RIGHT:r.direction=c.right;break;default:r.direction=c.none}},r.setUpManager=function(e){this.changeGravity(o.DOWN)},r.cycleGravity=function(){if(this.gravityChangable){var e;switch(this.getCurrentDirection()){case o.UP:e=o.RIGHT;break;case o.RIGHT:e=o.DOWN;break;case o.DOWN:e=o.LEFT;break;case o.LEFT:e=o.UP;break;default:e=o.NONE}this.changeGravity(e)}},r.getCurrentDirection=function(){var e=this.direction;return e.equals(c.up)?o.UP:e.equals(c.right)?o.RIGHT:e.equals(c.down)?o.DOWN:e.equals(c.left)?o.LEFT:o.NONE},r}(n)).direction=new i,u.gravityChangable=!0,s=u))||s);r._RF.pop()}}}));

System.register("chunks:///_virtual/GravitySubTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./GameManager.ts","./GravityManager.ts","./BaseSubTile.ts"],(function(t){var e,r,n,o,i,a,c,l,u;return{setters:[function(t){e=t.inheritsLoose},function(t){r=t.cclegacy,n=t._decorator,o=t.Vec2},function(t){i=t.Direction,a=t.TileType},function(t){c=t.default},function(t){l=t.GravityManager},function(t){u=t.BaseSubTile}],execute:function(){var f;r._RF.push({},"26465GJPW5B5o/Iu8qhYkx4","GravitySubTile",void 0);var s=n.ccclass;n.property,t("GravitySubTile",s("GravitySubtile")(f=function(t){function r(){for(var e,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).changeAfterMove=!1,e}e(r,t);var n=r.prototype;return n.onAttach=function(e){t.prototype.onAttach.call(this,e)},n.onDead=function(t,e,r){if(this.tile&&r&&r.tile){var n=this.tile.getCoordinate(),o=r.tile.getCoordinate();if(e){var i=n.x*l.direction.x+n.y*l.direction.y,a=o.x*l.direction.x+o.y*l.direction.y>i?[r,this]:[this,r],c=a[0],u=a[1];c.tile.kill(),u.tile.kill();var f=t.board.map((function(t){return t.map((function(t){return null==t?void 0:t.getTypeID()}))}));console.log("Type IDs before resolve:",f);var s=c.resolveGravity(t),v=t.board.map((function(t){return t.map((function(t){return null==t?void 0:t.getTypeID()}))}));console.log("Type IDs after resolve:",v),s&&l.cycleGravity()}}},n.resolveGravity=function(t){var e,r=l.getCurrentDirection();if(r===i.NONE)return!1;console.log(r),console.log(t.board);var n=null==(e=this.node.parent)||null==(e=e.getComponent(c))?void 0:e.currentLevel;if(!n)return!1;var u=t.board.length,f=t.board[0].length,s=l.direction.x,v=l.direction.y,d=s+v>0,y=function(t){return Array.from({length:t},(function(t,e){return e})).slice(1,t-1)},g=!1;if(0!==v)for(var p=function(e){for(var r=y(u).map((function(r){return t.board[r][e]})),i=r.filter((function(t){return t.getTypeID()===a.NONE})),c=r.filter((function(t){return t.getTypeID()!==a.NONE})),l=d?[].concat(i,c):[].concat(c,i),f=0;f<l.length;f++){var s=f+1,v=l[f];t.board[s][e]!==v&&(g=!0),t.board[s][e]=v,v.setCoordinate(new o(e,s)),v.moveToRealPositionWithPadding(n)}},h=0;h<f;h++)p(h);else for(var b=function(e){for(var r=y(f).map((function(r){return t.board[e][r]})),i=r.filter((function(t){return t.getTypeID()===a.NONE})),c=r.filter((function(t){return t.getTypeID()!==a.NONE})),l=d?[].concat(i,c):[].concat(c,i),u=0;u<l.length;u++){var s=u+1,v=l[u];t.board[e][s]!==v&&(g=!0),t.board[e][s]=v,v.setCoordinate(new o(s,e)),v.moveToRealPositionWithPadding(n)}},T=0;T<u;T++)b(T);return console.log(t.board),g},r}(u))||f);r._RF.pop()}}}));

System.register("chunks:///_virtual/HintItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts"],(function(t){var n,e,o,a,i;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator},function(t){a=t.TileType},function(t){i=t.default}],execute:function(){var r;e._RF.push({},"129f9RmAKxFALGZ3rb0g4tX","HintItem",void 0);var l=o.ccclass;o.property,t("default",l("HintItem")(r=function(t){function e(){for(var n,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(n=t.call.apply(t,[this].concat(o))||this).item="useHint",n}n(e,t);var o=e.prototype;return o.onUse=function(){var n,e;if(!(this.clicked||this.locked||null!=(n=this.game)&&n.isgameOver||(t.prototype.onUse.call(this),this.game.hintPath.length>0||0==this.quantity))){var o=null==(e=this.game)||null==(e=e.board)?void 0:e.board;if(o){var i=!1;t:for(var r=0;r<o.length;r++)for(var l=0;l<o[0].length;l++){var h=o[r][l];if(h&&h.getTypeID()!=a.NONE)for(var s=r;s<o.length;s++)for(var u=r===s?l+1:0;u<o[0].length;u++){var g,c,f=o[s][u];if(f&&f.getTypeID()!=a.NONE){var v=null==(g=this.game.board)?void 0:g.getPath(h,f);if(h!==f&&null!=(c=this.game)&&null!=(c=c.board)&&c.canMatch(h,f,v.path,v.turnNum)){this.showHintEffect(h,f),i=!0;break t}}}}i&&(this.quantity--,this.textChange())}}},o.showHintEffect=function(t,n){var e,o,a,i;null==(e=this.game)||e.unChoose();null==(o=this.game)||o.board;var r=null==(a=this.game)||null==(a=a.board)?void 0:a.getPath(t,n),l=this.getTurnPoints(r.path);null==(i=this.game)||i.hintTile.push(t,n),t.onHint(),n.onHint(),this.drawPath(l,this.game.pathPool),this.putStar(l,this.game.starPool)},o.getTurnPoints=function(t){if(t.length<2)return t;for(var n=[t[0]],e=1;e<t.length-1;e++){var o=t[e-1],a=t[e],i=t[e+1],r=a.x-o.x,l=a.y-o.y,h=i.x-a.x,s=i.y-a.y;r===h&&l===s||n.push(a)}return n.push(t[t.length-1]),n},o.drawPath=function(t,n){for(var e=0;e<t.length-1;e++){var o,a,i=t[e],r=(null==(o=this.game.board)?void 0:o.board[i.y][i.x]).node.getPosition().toVec2(),l=t[e+1],h=(null==(a=this.game.board)?void 0:a.board[l.y][l.x]).node.getPosition().toVec2(),s=n.getFirstItem();console.log("from: ",r,"to: ",h),null==s||s.createPath(r,h,!1),this.game.hintPath.push(s),console.log("draw path from",i,"to",l)}},o.putStar=function(t,n){for(var e=0;e<t.length;e++){var o,a,i=t[e],r=(null==(o=this.game)||null==(o=o.board)?void 0:o.board[i.y][i.x]).node.getPosition().clone(),l=n.getFirstItem();null==l||l.putAtForHint(r),null==(a=this.game)||a.hintPoint.push(l)}},e}(i))||r);e._RF.pop()}}}));

System.register("chunks:///_virtual/InvalidPath.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,a,i,r,l,s,c,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,a=t.Sprite,i=t.Vec3,r=t.Color,l=t.tween,s=t.Tween,c=t.Vec2,h=t.Component}],execute:function(){var d;n._RF.push({},"6122aofLhxDlZgS/TrkdMAd","InvalidPath",void 0);var u=o.ccclass;o.property,t("InvalidPath",u("InvalidPath")(d=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).used=!1,e.headCoord=new c,e.tailCoord=new c,e}e(n,t);var o=n.prototype;return o.createPath=function(t,e,n){void 0===n&&(n=!0),this.headCoord=t,this.tailCoord=e,this.updateVisual(this.node,n)},o.calcDir=function(){var t=this.tailCoord.clone().subtract(this.headCoord.clone()),e=t.clone().normalize();return{angle:180*Math.atan2(e.y,e.x)/Math.PI,length:t.length()}},o.updateVisual=function(t,e){var n=this;void 0===e&&(e=!0);var o=t.getChildByName("Path"),s=o.getComponent(a),c=this.calcDir(),h=c.angle,d=c.length;t.angle=h-90,t.setPosition(this.headCoord.x,this.headCoord.y),o.setScale(new i(1,d/12)),s.color=new r(255,255,255,255),e&&l(s).delay(.1).to(.45,{color:new r(255,255,255,0)}).call((function(){s.color=new r(255,255,255,255),n.kill()})).start()},o.isUsed=function(){return this.used},o.reSpawn=function(){this.used=!0,this.node.active=!0},o.kill=function(){this.used=!1;var t=this.node.getChildByName("Path");if(null!=t&&t.isValid){var e=t.getComponent(a);null!=e&&e.isValid&&(s.stopAllByTarget(e),e.color=new r(255,255,255,0),this.node.active=!1)}},n}(h))||d);n._RF.pop()}}}));

System.register("chunks:///_virtual/InvalidPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./InvalidPath.ts"],(function(e){var t,i,r,n,o,l,a,u,s,c,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,a=e._decorator,u=e.Prefab,s=e.instantiate,c=e.Component},function(e){f=e.InvalidPath}],execute:function(){var p,d,h,v,b,P,g;l._RF.push({},"10f992DS1dKqJ0D7B31ryEV","InvalidPool",void 0);var m=a.ccclass,y=a.property;e("default",(p=m("InvalidPool"),d=y(u),h=y(Number),p((P=t((b=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"pathPrefab",P,n(t)),r(t,"size",g,n(t)),t.itemList=[],t}i(t,e);var l=t.prototype;return l.initialize=function(e){for(var t=0;t<this.size;t++){var i=s(this.pathPrefab);i&&(console.log("added child"),e.node.addChild(i),i.setSiblingIndex(999998)),this.itemList.push(null==i?void 0:i.getComponent(f))}this.returnAll()},l.getFirstItem=function(){for(var e,t=o(this.itemList);!(e=t()).done;){var i=e.value;if(!i.isUsed())return i.reSpawn(),i.node.setSiblingIndex(999998),i}return null},l.returnPool=function(e){e.kill()},l.returnMultiple=function(e){for(var t,i=o(e);!(t=i()).done;){t.value.kill()}},l.returnAll=function(){this.returnMultiple(this.itemList)},t}(c)).prototype,"pathPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(b.prototype,"size",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=b))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/ItemManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts"],(function(t){var e,i,n,o,a,l,r,u,s,c,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized,a=t.createForOfIteratorHelperLoose},function(t){l=t.cclegacy,r=t._decorator,u=t.Node,s=t.Component},function(t){c=t.Item},function(t){m=t.default}],execute:function(){var f,g,h,v,p,d,I,b,L;l._RF.push({},"af1dc3vGOxM0YqhvfMwuQjP","ItemManager",void 0);var y=r.ccclass,M=r.property;t("ItemManager",(f=y("ItemManager"),g=M(u),h=M(u),v=M(u),f((I=e((d=function(t){function e(){for(var e,i=arguments.length,a=new Array(i),l=0;l<i;l++)a[l]=arguments[l];return(e=t.call.apply(t,[this].concat(a))||this).game=null,e.itemList=new Map,n(e,"bg",I,o(e)),n(e,"botOverlay",b,o(e)),n(e,"skipButton",L,o(e)),e}i(e,t);var l=e.prototype;return l.onLoad=function(){this.cacheAllItem()},l.hideExcept=function(t){for(var e,i=a(this.itemList);!(e=i()).done;){var n=e.value;n[0]!=t&&n[1].fade(!0)}},l.hideAll=function(){for(var t,e=a(this.itemList);!(t=e()).done;){t.value[1].node.active=!1}},l.showItem=function(t){this.bg.active=!0;for(var e,i=a(this.itemList);!(e=i()).done;){var n=e.value;n[0]==t&&(n[1].node.active=!0)}},l.showAll=function(){this.bg.active=!0;for(var t,e=a(this.itemList);!(t=e()).done;){t.value[1].fade(!1)}},l.intialize=function(t){console.log(this.itemList),t&&(this.game=t),console.log("DONE INIT, GAME MANAGER: ",t);for(var e,i=a(this.itemList);!(e=i()).done;){var n=e.value,o=Number(localStorage.getItem(n[0]));localStorage.getItem(n[0])||(o=10),0==o&&localStorage.setItem(n[0],"0"),console.log(o),n[1].setquantity(o),n[1].init(),t&&(n[1].game=this.game,console.log("init item: ",n[1],n[1].game))}},l.cacheAllItem=function(){var t=this;Object.values(c).forEach((function(e){var i=t.node.getChildByName(e);i.getComponent(m).itemManager=t,i.getComponent(m).itemName=e,i&&t.itemList.set(e,i.getComponent(m)),console.log("cached: ",e)}))},l.useItem=function(t){var e;if(null==(e=this.game)||!e.isgameOver){var i=this.itemList.get(t);null==i||i.onUse(),0==(null==i?void 0:i.quantity)&&(i.stopFunction(),i.needToAds()),localStorage.setItem(t,String(null==i?void 0:i.quantity))}},l.useHint=function(){var t;this.useItem(c.HINT),null==(t=this.itemList.get(c.HINT))||t.stopFunction()},l.useBoom=function(){this.useItem(c.BOOM)},l.useShuffle=function(){this.useItem(c.SHUFFLE)},l.useRocket=function(){this.useItem(c.ROCKET)},l.useSuperRocket=function(){this.useItem(c.SUPERROCKET)},l.unlockItem=function(t){var e;null==(e=this.itemList.get(t))||e.enableFunction()},l.lockItem=function(t){var e;null==(e=this.itemList.get(t))||e.stopFunction()},l.lockAll=function(){this.itemList.forEach((function(t){t.lock()}))},l.unlockAll=function(){this.itemList.forEach((function(t){t.unlock()}))},e}(s)).prototype,"bg",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(d.prototype,"botOverlay",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(d.prototype,"skipButton",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=d))||p));l._RF.pop()}}}));

System.register("chunks:///_virtual/Level.ts",["cc","./global.ts"],(function(i){var t,e,h;return{setters:[function(i){t=i.cclegacy,e=i.view},function(i){h=i.Theme}],execute:function(){t._RF.push({},"65509Fo80xNN5Sl/JgNMJaN","Level",void 0);i("Level",function(){function i(i,t,s,r,g,l,c,d){this.theme=h.CAKE,this.gridHeight=0,this.gridWidth=0,this.grid=[],this.gridLabels=[],this.time=void 0,this.tileSize=0,this.scale=0,this.gravity=0,this.circle=!1,this.layer=new Map,this.theme=r,this.gridHeight=i,this.gridWidth=t,this.grid=s,this.gravity=l,this.circle=c,this.scale=e.getVisibleSize().width/(this.gridWidth+2)/80,this.tileSize=80*this.scale+5,d&&(this.layer=d),this.time=g}var t=i.prototype;return t.change=function(i,t,h,s,r,g,l,c,d){this.theme=s,this.gridHeight=i,this.gridWidth=t,this.grid=h,this.gravity=g,this.circle=l;var n=e.getVisibleSize();n.height>=n.width?this.scale=e.getVisibleSize().width/(this.gridWidth+3)/80:this.scale=e.getVisibleSize().height/(this.gridHeight+3)/80,this.tileSize=80*this.scale+5,c&&(this.gridLabels=c),d&&(this.layer=d),this.time=r},t.getTime=function(){return this.time},t.getTileNum=function(){return this.gridHeight*this.gridWidth},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/LevelLoader.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./Level.ts","./ShuffleLevel2.ts"],(function(e){var t,r,n,u,a,s,i,c;return{setters:[function(e){t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){n=e.cclegacy,u=e.resources,a=e.JsonAsset},function(e){s=e.Theme},function(e){i=e.Level},function(e){c=e.ShuffleLevel}],execute:function(){n._RF.push({},"808700sc6VHnLXKwlOdsw7G","LevelLoader",void 0),e("LevelLoader",function(){function e(){this.currentLevel=null,this.current=6,this.needToChange=!1,this.data=null,this.shuffleLevel=null,this.maxLevel=100;var e=localStorage.getItem("currentLevel");this.current=e?parseInt(e,10):1,this.loadLevel(this.current)}e.getInstance=function(){return e.instance||(e.instance=new e),e.instance};var n=e.prototype;return n.saveCurrentLevel=function(){localStorage.setItem("currentLevel",this.current.toString())},n.checkNeedToChange=function(e){switch(e){case"completed":case"skip":this.needToChange=!0;break;case"failed":this.needToChange=!1}},n.loadLevelData=function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var r="map/map/level"+t;u.load(r,a,(function(r,n){if(r)console.error("Không load được level "+t+":",r),e(null);else{var u=n.json;e(u)}}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.loadLevel=function(){var e=t(r().mark((function e(t){var n,u,a,o,l,h,f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadLevelData(t);case 2:if(n=e.sent){e.next=6;break}return console.error("cant load level "+t),e.abrupt("return",!1);case 6:if(this.data=n,this.shuffleLevel=new c(n),u=this.shuffleLevel.generateMap(),a=this.shuffleLevel.getGridLabels(),o=this.shuffleLevel.getMapLayer(u),l=this.getThemeFromString(n.Theme),this.currentLevel){e.next=19;break}h=[[0,0,1,1,2],[3,4,4,5,2],[3,6,-1,6,7],[9,9,-1,-1,7],[9,9,-1,-1,10]],f=[["2+1","6","1+1","2","3+2"],["4+1","2+3","5","3+4","5"],["5","4+2","","6","7"],["2+4","3+3","","","7"],["3","6","","","2+5"]],this.currentLevel=new i(5,5,h,s.CAKE,1e6,0,!1),this.currentLevel.gridLabels=f,e.next=22;break;case 19:if(1!==t){e.next=21;break}return e.abrupt("return",!0);case 21:this.currentLevel.change(n.GridHeight,n.GridWidth,u,l,n.Time,n.Gravity,n.Circle,a,o);case 22:return e.abrupt("return",!0);case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.getThemeFromString=function(e){switch(e.toUpperCase()){case"CAKE":return s.CAKE;case"FRUIT":return s.FRUIT;case"BUTTERFLY":return s.BUTTERFLY;case"DRINK":return s.DRINK;default:return s.CAKE}},n.changeLevel=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.needToChange){e.next=3;break}return console.log("no need bro "),e.abrupt("return",!1);case 3:if(!((t=this.current+1)>this.maxLevel)){e.next=7;break}return console.log("donelevel!"),e.abrupt("return",!1);case 7:return e.next=9,this.loadLevel(t);case 9:if(!e.sent){e.next=15;break}return this.current=t,this.saveCurrentLevel(),this.needToChange=!1,e.abrupt("return",!0);case 15:return e.abrupt("return",!1);case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.jumpToLevel=function(){var e=t(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t<1||t>this.maxLevel)){e.next=2;break}return e.abrupt("return",!1);case 2:return e.next=4,this.loadLevel(t);case 4:if(!e.sent){e.next=10;break}return this.current=t,this.saveCurrentLevel(),this.needToChange=!1,e.abrupt("return",!0);case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),n.restartLevel=function(){var e=t(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadLevel(this.current);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.previousLevel=function(){var e=t(r().mark((function e(){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.current<=1)){e.next=2;break}return e.abrupt("return",!1);case 2:return t=this.current-1,e.next=5,this.loadLevel(t);case 5:if(!e.sent){e.next=11;break}return this.current=t,this.saveCurrentLevel(),this.needToChange=!1,e.abrupt("return",!0);case 11:return e.abrupt("return",!1);case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n.getCurrentLevel=function(){return this.currentLevel},n.getCurrentLevelNumber=function(){return this.current},n.getNeedToChange=function(){return this.needToChange},n.getLevelData=function(){return this.data},n.getShuffleLevel=function(){return this.shuffleLevel},n.setNeedToChange=function(e){this.needToChange=e},n.setMaxLevel=function(e){this.maxLevel=e},e}()).instance=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/LoadTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts","./GravityManager.ts","./SoundManager.ts","./BaseTurn.ts","./type.ts","./TutorialManager.ts"],(function(t){var e,n,r,a,i,u,s,l,o,g,h;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t.director},function(t){a=t.SFX,i=t.Turn},function(t){u=t.AnimationHandler},function(t){s=t.GravityManager},function(t){l=t.SoundManager},function(t){o=t.BaseTurn},function(t){g=t.TileConnect},function(t){h=t.TutorialManager}],execute:function(){n._RF.push({},"d5f4fF36RhJ4qZay0AgrkgB","LoadTurn",void 0);t("LoadTurn",function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.onEnter=function(){var t,e,n,o,m,c,f,T,p;(this.game.isFirstTouch=0,null==(t=this.game.pathPool)||t.returnAll(),null==(e=this.game.starPool)||e.returnAll(),this.game.subtilePool.forEach((function(t){t.returnAll()})),u.animList=[],null==(n=u.fillProgressBar)||n.resetProgressBar(),this.turnOffInput(),null==(o=this.game.tilePool)||o.returnAll(),this.game.unChoose(),this.game.currentNumber()<2)&&(this.game.hideBot(),null==(T=this.game.itemManager)||T.hideAll());(this.game.currentNumber()>=2&&this.game.showAll(),this.turnOffInput(),s.setUpManager(this.game.currentLevel),this.game.time=this.game.currentLevel.getTime(),r.emit(g.GAME_EVENTS.COUNTDOWN_RESET),this.game.matchPair=[],this.game.createBoard(this.game.currentLevel),null==(m=l.instance)||m.playSFX(a.LEVELSTART),null==(c=u.fillProgressBar)||c.setTotal(this.game.currentLevel.getTileNum()),null==(f=u.fillProgressBar)||f.setLv(this.game.currentNumber()),this.turnOnInput(),this.game.board&&h.showCurrentTutorial(this.game.currentNumber(),this.game.board,this.game),this.game.currentNumber()>=7)&&(null==(p=this.game.itemManager)||p.showAll());this.game.switchTurn(i.START)},o.onExit=function(){},o.turnOnInput=function(){var t;null==(t=this.game.board)||t.setUpManager(this.game)},o.turnOffInput=function(){var t;null==(t=this.game.board)||t.resetInput()},n}(o));n._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AssetLoader.ts","./BackGround.ts","./ShuffleLevel.ts","./AnimationHandler.ts","./FillProgressBar.ts","./Board.ts","./ConfettiManager.ts","./BaseItem.ts","./BoomDefuseItem.ts","./HintItem.ts","./RocketItem.ts","./ShuffleItem.ts","./SuperRocketItem.ts","./Level.ts","./LevelLoader.ts","./ShuffleLevel2.ts","./GameManager.ts","./GravityManager.ts","./ItemManager.ts","./SoundManager.ts","./TutorialManager.ts","./InvalidPath.ts","./Path.ts","./BoomPool.ts","./InvalidPool.ts","./NopePool.ts","./PathPool.ts","./StarPool.ts","./TilePool.ts","./Nope.ts","./Star.ts","./BaseSubTile.ts","./BoomSubTile.ts","./ButterflySubTile.ts","./Countdown.ts","./CountdownForTutorial.ts","./GravitySubTile.ts","./Pulse.ts","./RocketSubTile.ts","./SubTilePool.ts","./SubTilePoolManager.ts","./BreakTile.ts","./RocketTutorial.ts","./Tile.ts","./Timer.ts","./AdsTurn.ts","./BaseTurn.ts","./BombFail.ts","./EndTurn.ts","./FailTurn.ts","./LoadTurn.ts","./MatchTurn.ts","./PauseTurn.ts","./StartTurn.ts","./WinTurn.ts","./BaseTutorial.ts","./Tutorial1.ts","./Tutorial2.ts","./Tutorial3.ts","./Tutorial4.ts","./Tutorial5.ts","./Tutorial6.ts","./Combo.ts","./Dash.ts","./GameScene.ts","./GoodPopup.ts","./UImanager.ts","./adsPopup.ts","./continuePopup.ts","./basePopup.ts","./Rotate.ts","./Sand.ts","./boom-popup.ts","./fail-popup.ts","./RotateStar.ts","./victoryPopup.ts","./GameConfig.ts","./global.ts","./type.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MatchTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts","./BaseTurn.ts"],(function(n){var t,i,e,o,a;return{setters:[function(n){t=n.inheritsLoose},function(n){i=n.cclegacy},function(n){e=n.Turn},function(n){o=n.AnimationHandler},function(n){a=n.BaseTurn}],execute:function(){i._RF.push({},"517aeOebrlEc5HpaDQzdL6d","MatchTurn",void 0);n("MatchTurn",function(n){function i(){return n.apply(this,arguments)||this}t(i,n);var a=i.prototype;return a.onEnter=function(){var n=this;for(console.log("match"),this.game.stopHint();this.game.matchPair.length>0;)this.game.match();Promise.all(o.animTile).then((function(){Promise.all(o.animList).then((function(){n.game.switchTurn(e.END)}))}))},a.onExit=function(){},a.onUpdate=function(){},i}(a));i._RF.pop()}}}));

System.register("chunks:///_virtual/Nope.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,i,n,o,s,r,c,a,l,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){s=t.cclegacy,r=t._decorator,c=t.Node,a=t.Label,l=t.Vec3,u=t.Component}],execute:function(){var h,p,d,f,v,b,y,g,w;s._RF.push({},"f8b12GCjO5CWaAFHw+gNiYe","Nope",void 0);var N=r.ccclass,m=r.property;t("Nope",(h=N("Nope"),p=m(c),d=m(c),f=m(a),h((y=e((b=function(t){function e(){for(var e,i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))||this).used=!1,n(e,"dot",y,o(e)),n(e,"cross",g,o(e)),n(e,"x",w,o(e)),e}i(e,t);var s=e.prototype;return s.putAt=function(t){this.node.setPosition(t),this.dot.active=!1,this.cross.active=!0,this.scheduleOnce(this.kill,.5)},s.putX=function(t,e){this.node.setPosition(t),this.x.string=""+e,this.dot.active=!0,this.cross.active=!1,this.scheduleOnce(this.kill,.5)},s.isUsed=function(){return this.used},s.reSpawn=function(){this.node.setScale(.5,.5),this.used=!0,this.node.active=!0,this.cross.active=!0,this.dot.active=!0},s.kill=function(){this.node.scale=new l(.5,.5,1),this.used=!1,this.node.active=!1,this.cross.active=!1,this.dot.active=!1},e}(u)).prototype,"dot",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(b.prototype,"cross",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=e(b.prototype,"x",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=b))||v));s._RF.pop()}}}));

System.register("chunks:///_virtual/NopePool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Nope.ts"],(function(e){var t,i,r,n,o,l,a,u,s,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,a=e._decorator,u=e.Prefab,s=e.instantiate,c=e.Component},function(e){p=e.Nope}],execute:function(){var f,d,h,v,b,g,m;l._RF.push({},"49adcOjOvxBqY7zZ4I6eqbE","NopePool",void 0);var y=a.ccclass,P=a.property;e("default",(f=y("NopePool"),d=P(u),h=P(Number),f((g=t((b=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return t=e.call.apply(e,[this].concat(o))||this,r(t,"pathPrefab",g,n(t)),r(t,"size",m,n(t)),t.itemList=[],t}i(t,e);var l=t.prototype;return l.initialize=function(e){for(var t=0;t<this.size;t++){var i=s(this.pathPrefab);i&&(console.log("added child"),e.node.addChild(i),i.setSiblingIndex(999999)),this.itemList.push(null==i?void 0:i.getComponent(p))}this.returnAll()},l.getFirstItem=function(){for(var e,t=o(this.itemList);!(e=t()).done;){var i=e.value;if(!i.isUsed())return i.reSpawn(),i.node.setSiblingIndex(999999),i}return null},l.returnPool=function(e){e.kill()},l.returnMultiple=function(e){for(var t,i=o(e);!(t=i()).done;){t.value.kill()}},l.returnAll=function(){this.returnMultiple(this.itemList)},t}(c)).prototype,"pathPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(b.prototype,"size",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=b))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/Path.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,n,i,a,r,l,s,c,h;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,n=t._decorator,i=t.Sprite,a=t.Vec3,r=t.Color,l=t.tween,s=t.Tween,c=t.Vec2,h=t.Component}],execute:function(){var d;o._RF.push({},"acc89i+H69Gj4VYQHePnuuj","Path",void 0);var u=n.ccclass;n.property,t("Path",u("Path")(d=function(t){function o(){for(var e,o=arguments.length,n=new Array(o),i=0;i<o;i++)n[i]=arguments[i];return(e=t.call.apply(t,[this].concat(n))||this).used=!1,e.headCoord=new c,e.tailCoord=new c,e}e(o,t);var n=o.prototype;return n.createPath=function(t,e,o,n){void 0===o&&(o=!0),void 0===n&&(n=.2),this.headCoord=t,this.tailCoord=e,this.updateVisual(this.node,o,n)},n.calcDir=function(){var t=this.tailCoord.clone().subtract(this.headCoord.clone()),e=t.clone().normalize();return{angle:180*Math.atan2(e.y,e.x)/Math.PI,length:t.length()}},n.updateVisual=function(t,e,o){var n=this;void 0===e&&(e=!0),void 0===o&&(o=.2),this.node.setSiblingIndex(2e3);var s=t.getChildByName("Path"),c=s.getComponent(i),h=this.calcDir(),d=h.angle,u=h.length;t.angle=d-90,t.setPosition(this.headCoord.x,this.headCoord.y),console.log("length: ",u),s.setScale(new a(u/36,1)),c.color=new r(255,255,255,255),e&&l(c).delay(.1).to(o,{color:new r(255,255,255,0)}).call((function(){c.color=new r(255,255,255,255),n.kill()})).start()},n.isUsed=function(){return this.used},n.reSpawn=function(){this.used=!0,this.node.active=!0},n.kill=function(){this.used=!1;var t=this.node.getChildByName("Path");if(null!=t&&t.isValid){var e=t.getComponent(i);null!=e&&e.isValid&&(s.stopAllByTarget(e),e.color=new r(255,255,255,0),this.node.active=!1)}},o}(h))||d);o._RF.pop()}}}));

System.register("chunks:///_virtual/PathPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Path.ts"],(function(t){var e,i,r,n,o,l,a,u,s,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose},function(t){l=t.cclegacy,a=t._decorator,u=t.Prefab,s=t.instantiate,c=t.Component},function(t){p=t.Path}],execute:function(){var f,h,d,v,b,P,g;l._RF.push({},"fb6aed0AFlLFYBJs4psdZpJ","PathPool",void 0);var m=a.ccclass,y=a.property;t("default",(f=m("PathPool"),h=y(u),d=y(Number),f((P=e((b=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),l=0;l<i;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,r(e,"pathPrefab",P,n(e)),r(e,"size",g,n(e)),e.itemList=[],e}i(e,t);var l=e.prototype;return l.initialize=function(t){for(var e=0;e<this.size;e++){var i=s(this.pathPrefab);i&&(console.log("added child"),t.node.addChild(i),i.setSiblingIndex(999998)),(null==i?void 0:i.getComponent(p)).kill(),this.itemList.push(null==i?void 0:i.getComponent(p))}this.returnAll()},l.getFirstItem=function(){for(var t,e=o(this.itemList);!(t=e()).done;){var i=t.value;if(!i.isUsed())return i.reSpawn(),i.node.setSiblingIndex(999998),i}return null},l.returnPool=function(t){t.kill()},l.returnMultiple=function(t){for(var e,i=o(t);!(e=i()).done;){e.value.kill()}},l.returnAll=function(){this.returnMultiple(this.itemList)},e}(c)).prototype,"pathPrefab",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=e(b.prototype,"size",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=b))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/PauseTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts"],(function(e){var n,t,o,u,r,s,a,i,c;return{setters:[function(e){n=e.inheritsLoose,t=e.createForOfIteratorHelperLoose},function(e){o=e.cclegacy,u=e.Tween,r=e.ParticleSystem2D},function(e){s=e.getAllDescendants,a=e.Popup},function(e){i=e.UImanager},function(e){c=e.BaseTurn}],execute:function(){o._RF.push({},"4917fGp/FdAZ5CjyBwSBrh4","PauseTurn",void 0);e("PauseTurn",function(e){function o(){return e.apply(this,arguments)||this}n(o,e);var c=o.prototype;return c.onEnter=function(){for(var e,n=s(this.game.node),o=t(n);!(e=o()).done;){var c,l=e.value;u.pauseAllByTarget(l),null==(c=l.getComponent(r))||c.stopSystem()}this.game.turnOffInput(),this.game.unChoose(),console.log("Pause"),i.showPopup(a.PAUSEPOPUP,!0,this.game.currentNumber())},c.onExit=function(){},c.onUpdate=function(){},o}(c));o._RF.pop()}}}));

System.register("chunks:///_virtual/Pulse.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,i,r,s,a,c,o,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){s=e.cclegacy,a=e._decorator,c=e.tween,o=e.Vec3,l=e.Component}],execute:function(){var u,f,p,h,b;s._RF.push({},"e0c33H0tlRKgb4xR/17Vv4D","Pulse",void 0);var d=a.ccclass,y=a.property;e("Pulse",d("Pulse")((p=t((f=function(e){function t(){for(var t,n=arguments.length,s=new Array(n),a=0;a<n;a++)s[a]=arguments[a];return t=e.call.apply(e,[this].concat(s))||this,i(t,"frstscale",p,r(t)),i(t,"scndscale",h,r(t)),i(t,"time",b,r(t)),t}n(t,e);var s=t.prototype;return s.start=function(){this.startPulseEffect()},s.startPulseEffect=function(){c(this.node).to(this.time,{scale:new o(this.frstscale,this.frstscale,1)},{easing:"sineInOut"}).to(this.time,{scale:new o(this.scndscale,this.scndscale,1)},{easing:"sineInOut"}).union().repeatForever().start()},s.update=function(e){},t}(l)).prototype,"frstscale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=t(f.prototype,"scndscale",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),b=t(f.prototype,"time",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),u=f))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/RocketItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts","./SoundManager.ts","./AnimationHandler.ts"],(function(e){var t,n,i,o,a,l,r,s,c,u,g,d,v,h,m,f,p,y,k,S,w,b,C,I,P,M;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,r=e._decorator,s=e.Node,c=e.Widget,u=e.Vec3,g=e.view,d=e.resources,v=e.SpriteFrame,h=e.Animation,m=e.Sprite,f=e.ParticleSystem2D,p=e.tween},function(e){y=e.Item,k=e.FIREWORK_PATH,S=e.ROCKET_PATH,w=e.TileType,b=e.SFX,C=e.Turn},function(e){I=e.default},function(e){P=e.SoundManager},function(e){M=e.AnimationHandler}],execute:function(){var R,F,O,T,E,x,A;l._RF.push({},"6b0094l8LJMia3bOkZdOrCP","RocketItem",void 0);var B=r.ccclass,N=r.property;e("default",(R=B("RocketItem"),F=N(s),O=N(s),R((x=t((E=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),l=0;l<n;l++)a[l]=arguments[l];return t=e.call.apply(e,[this].concat(a))||this,i(t,"overlay",x,o(t)),i(t,"rockets",A,o(t)),t.item="useRocket",t}n(t,e);var l=t.prototype;return l.onUse=function(){var t,n,i,o;if(!this.clicked&&0!=this.quantity&&!this.locked){e.prototype.onUse.call(this),console.log(this.node.parent);var l=this.getRandomMatchingPair();if(l){var r=new Set(l),s=this.getRandomMatchingPair(r);if(s){var d=[].concat(l,s);null==(t=this.game)||t.node.addChild(this.overlay),this.overlay.getComponent(c).verticalCenter=-this.game.node.position.y,this.overlay.active=!0,this.overlay.setPosition(new u),g.getVisibleSize().width<g.getVisibleSize().height&&(this.itemManager.botOverlay.active=!0),this.itemManager.botOverlay.setSiblingIndex(this.node.getSiblingIndex()-1),null==(n=this.game)||n.unChoose(),null==(i=this.game)||i.turnOffInput();for(var v,h=a(null==(m=this.game)||null==(m=m.board)?void 0:m.board);!(v=h()).done;)for(var m,f,p=v.value,k=a(p);!(f=k()).done;){f.value.node.setSiblingIndex(1)}for(var S,w=a(d);!(S=w()).done;){S.value.node.setSiblingIndex(this.overlay.getSiblingIndex()+1)}null==(o=this.itemManager)||o.hideExcept(y.ROCKET),this.showRocket(d),console.log("rocket"),this.quantity--,this.textChange()}}}},l.showRocket=function(e){var t=this;this.stopFunction();for(var n=g.getVisibleSize().width/5,i=g.getVisibleSize(),o=d.get(k,v),a=d.get(S,v),l=function(l){var r,s,c,d;t.rockets[l].active=!0;var v=t.rockets[l].getChildByName("Rocket1"),y=null==(r=t.rockets[l].getChildByName("Explosion"))?void 0:r.getComponent(h),k=null==(s=t.rockets[l].getChildByName("break"))?void 0:s.getComponent(h);console.log(k),t.rockets[l].angle=0,v.getComponent(m).spriteFrame=o;var S=t.rockets[l].getChildByName("Rocket1"),w=S?S.getChildByName("RocketDust"):null,I=w?w.getChildByName("whiteSmoke"):null;I.active=!0,null==I||null==(c=I.getComponent(f))||c.resetSystem();var R=w?w.getChildByName("yellow"):null;R.active=!0,null==R||null==(d=R.getComponent(f))||d.resetSystem(),t.rockets[l].setWorldPosition(new u(n*(l+1),-100)),v.active=!0;var F=l>=2?g.getVisibleSize().width+1e3:-1e3,O=t.getAngleBetween(t.rockets[l].worldPosition,new u(F,500));e[l].underKill=!0,t.rockets[l].setScale(.8*e[0].originScale,.8*e[0].originScale),p(t.rockets[l]).to(.5,{worldPosition:new u(n*(l+1),50)}).delay(.2).to(.1+.1*l,{angle:O-25}).call((function(){P.instance.playSFX(b.ROCKET_FLY)})).to(.5,{worldPosition:new u(F,i.height/2)}).delay(.5).call((function(){t.rockets[l].setScale(e[l].originScale,e[l].originScale),v.getComponent(m).spriteFrame=a,I.active=!1,R.active=!1,t.rockets[l].angle=t.getAngleBetween(t.rockets[l].worldPosition,e[l].node.worldPosition),p(t.rockets[l]).to(.1+.09*l,{worldPosition:e[l].node.worldPosition},{easing:"sineOut"}).call((function(){P.instance.playSFX(b.EXPLODE),e[l].wholeSprite.active=!1,e[l].node.setSiblingIndex(1),v.active=!1,k.node.active=!0,k.node.angle=-t.rockets[l].angle,y.node.active=!0,y.node.angle=-t.rockets[l].angle,null==k||k.play(),null==y||y.play(),null==y||y.once(h.EventType.FINISHED,(function(){var n;if(y.node.active=!1,3==l){var i,o;null==(i=t.game)||i.turnOnInput(),null==(o=t.itemManager)||o.showAll(),t.overlay.active=!1,t.itemManager.botOverlay.active=!1;for(var a=0;a<4;a++)e[a].onDead(t.game.board,a%2==0,a%2==0?e[a+1]:e[a-1],!0),e[a].kill()}null==(n=t.game)||n.switchTurn(C.MATCH)})),null==k||k.once(h.EventType.FINISHED,(function(){k.node.active=!1,3==l&&Promise.all(M.animTile).then((function(){t.enableFunction()}))}))})).start()})).start()},r=0;r<e.length;r++)l(r)},l.getAngleBetween=function(e,t){var n=t.x-e.x,i=t.y-e.y;return 180*Math.atan2(i,n)/Math.PI-90+25},l.getRandomMatchingPair=function(e){var t;void 0===e&&(e=new Set);var n=null==(t=this.game)||null==(t=t.board)?void 0:t.board;if(!n)return null;for(var i,o=new Map,l=a(n);!(i=l()).done;)for(var r,s=i.value,c=a(s);!(r=c()).done;){var u=r.value,g=u;if(!e.has(g)){var d=u.getTypeID();d!==w.NONE&&(o.has(d)||o.set(d,[]),o.get(d).push(g))}}var v=Array.from(o.values()).filter((function(e){return e.length>=2}));if(0===v.length)return null;var h=v[Math.floor(Math.random()*v.length)].slice().sort((function(){return Math.random()-.5}));return[h[0],h[1]]},t}(I)).prototype,"overlay",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(E.prototype,"rockets",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),T=E))||T));l._RF.pop()}}}));

System.register("chunks:///_virtual/RocketSubTile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts","./GameManager.ts","./BaseSubTile.ts","./SoundManager.ts"],(function(e){var n,t,i,o,l,r,a,c,u,s,p,d,v,g,h,m,k,f,S,y,b,T,w;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,l=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,a=e._decorator,c=e.Node,u=e.Sprite,s=e.Animation,p=e.ParticleSystem2D,d=e.tween,v=e.Vec3},function(e){g=e.TileType,h=e.getTilePositionByLevel,m=e.Item,k=e.SFX,f=e.backInSlowEnd,S=e.Turn},function(e){y=e.AnimationHandler},function(e){b=e.default},function(e){T=e.BaseSubTile},function(e){w=e.SoundManager}],execute:function(){var A,C,x,B,E,I,P,M,D,R,F,H,O,z,K,L,N;r._RF.push({},"83479iP3vZCo72QyCNS0T0K","RocketSubTile",void 0);var _=a.ccclass,X=a.property;e("RocketSubTile",(A=_("RocketSubTile"),C=X(c),x=X(u),B=X(u),E=X(s),I=X(s),P=X(s),M=X(s),A((F=n((R=function(e){function n(){for(var n,t=arguments.length,l=new Array(t),r=0;r<t;r++)l[r]=arguments[r];return n=e.call.apply(e,[this].concat(l))||this,i(n,"particle",F,o(n)),i(n,"rocket1",H,o(n)),i(n,"rocket2",O,o(n)),i(n,"exploAnim",z,o(n)),i(n,"exploAnim2",K,o(n)),i(n,"tileBreak",L,o(n)),i(n,"tileBreak1",N,o(n)),n}t(n,e);var r=n.prototype;return r.onAttach=function(n){var t,i,o;e.prototype.onAttach.call(this,n),this.particle.active=!0,null==(t=this.tile)||t.wholeSprite.addChild(this.particle),null==(i=this.particle)||null==(i=i.getComponent(p))||i.resetSystem(),console.log(null==(o=this.tile)?void 0:o.node.position)},r.kill=function(){this.rocket1.node.active=!1,this.rocket1.node.active=!1,this.particle.active=!1,this.rocket2.node.active=!1,e.prototype.kill.call(this)},r.onDead=function(e,n,t){var i,o,r,a,c=this;if(this.kill(),null==(i=this.tile)||i.node.removeChild(this.particle),this.particle.active=!1,this.tile&&n&&t&&t.tile){for(var u,p=new Map,T=l(e.board);!(u=T()).done;)for(var A,C=u.value,x=l(C);!(A=x()).done;){var B=A.value,E=B.getTypeID();E===g.NONE||B.underKill||B===this.tile||B===t.tile||(p.has(E)||p.set(E,[]),p.get(E).push(B))}var I=Array.from(p.entries()).filter((function(e){e[0];return e[1].length>=2}));if(0!==I.length){var P=I[Math.floor(Math.random()*I.length)],M=P[0],D=P[1].sort((function(){return Math.random()-.5})).slice(0,2);D[0].underKill=!0,D[1].underKill=!0;var R=null==(o=this.node.parent)?void 0:o.getComponent(b);console.log("explode random 2 tiles of type:",M),this.rocket1.node.active=!0,this.rocket2.node.active=!0;var F=this.tile.node.position,H=t.tile.node.position,O=h(D[0].getCoordinate().x,D[0].getCoordinate().y,R.currentLevel,1).toVec3(),z=h(D[1].getCoordinate().x,D[1].getCoordinate().y,R.currentLevel,1).toVec3();if(null==(r=this.rocket1)||r.node.setPosition(F),null==(a=this.rocket2)||a.node.setPosition(H),D&&D.length>=2&&this.rocket1&&this.rocket2){var K,L;null==(K=this.node.parent)||K.getComponent(b).itemManager.lockItem(m.ROCKET),null==(L=this.node.parent)||L.getComponent(b).itemManager.lockItem(m.SUPERROCKET);var N=V(F,O),_=V(H,z);w.instance.playSFX(k.ROCKET_FLY),y.animTile.push(new Promise((function(n){var t,i;d(c.rocket1.node).to(.2,{scale:new v(null==(t=c.tile)?void 0:t.originScale,null==(i=c.tile)?void 0:i.originScale),angle:N},{easing:"sineOut"}).to(.6,{position:O},{easing:f}).call((function(){var t,i,o,l,r,a;w.instance.playSFX(k.EXPLODE),D[0].wholeSprite.active=!1,c.tileBreak.node.setScale(new v(D[0].originScale,D[0].originScale)),c.exploAnim.node.setScale(new v(D[0].originScale,D[0].originScale)),c.rocket1.node.active=!1,c.rocket1.node.setScale(new v(1,1,1)),c.rocket1.node.angle=0,c.exploAnim.node.setPosition(null==(t=c.rocket1)?void 0:t.node.position),c.exploAnim.node.active=!0,null==(i=c.exploAnim)||i.play(),c.tileBreak.node.setPosition(null==(o=c.rocket1)?void 0:o.node.position),c.tileBreak.node.active=!0,null==(l=c.tileBreak)||l.play(),null==(r=c.tileBreak)||r.once(s.EventType.FINISHED,(function(){c.tileBreak.node.active=!1,D[0].onDead(e,!0,D[1],!0),D[0].kill()})),null==(a=c.exploAnim)||a.once(s.EventType.FINISHED,(function(){var e;c.exploAnim.node.active=!1,null==(e=c.node.parent)||null==(e=e.getComponent(b))||e.switchTurn(S.MATCH),n()}))})).start()}))),y.animTile.push(new Promise((function(n){var t,i;d(c.rocket2.node).to(.2,{scale:new v(null==(t=c.tile)?void 0:t.originScale,null==(i=c.tile)?void 0:i.originScale),angle:_},{easing:"sineOut"}).to(.6,{position:z},{easing:f}).call((function(){var t,i,o,l,r,a;D[1].wholeSprite.active=!1,c.exploAnim2.node.setScale(new v(D[1].originScale,D[1].originScale)),c.tileBreak1.node.setScale(new v(D[1].originScale,D[1].originScale)),c.rocket2.node.active=!1,c.rocket2.node.setScale(new v(1,1,1)),c.rocket2.node.angle=0,c.exploAnim2.node.setPosition(null==(t=c.rocket2)?void 0:t.node.position),c.exploAnim2.node.active=!0,null==(i=c.exploAnim2)||i.play(),c.tileBreak1.node.setPosition(null==(o=c.rocket2)?void 0:o.node.position),c.tileBreak1.node.active=!0,null==(l=c.tileBreak1)||l.play(),null==(r=c.tileBreak1)||r.once(s.EventType.FINISHED,(function(){var n;c.tileBreak1.node.active=!1,D[1].onDead(e,!1,D[0],!0),D[1].kill(),null==(n=c.node.parent)||null==(n=n.getComponent(b))||n.switchTurn(S.MATCH)})),null==(a=c.exploAnim2)||a.once(s.EventType.FINISHED,(function(){console.log("2"),c.exploAnim2.node.active=!1,n()}))})).start()})))}Promise.all(y.animTile).then((function(){var e,n;null==(e=c.node.parent)||e.getComponent(b).itemManager.unlockItem(m.ROCKET),null==(n=c.node.parent)||n.getComponent(b).itemManager.unlockItem(m.SUPERROCKET)}))}}},n}(T)).prototype,"particle",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=n(R.prototype,"rocket1",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=n(R.prototype,"rocket2",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=n(R.prototype,"exploAnim",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=n(R.prototype,"exploAnim2",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=n(R.prototype,"tileBreak",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=n(R.prototype,"tileBreak1",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=R))||D));function V(e,n){var t=n.x-e.x,i=n.y-e.y;return 180*Math.atan2(i,t)/Math.PI-90}r._RF.pop()}}}));

System.register("chunks:///_virtual/RocketTutorial.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var o,i,e,n,a,c,s,l,p,r,h;return{setters:[function(t){o=t.applyDecoratedDescriptor,i=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,c=t._decorator,s=t.Node,l=t.Vec3,p=t.UIOpacity,r=t.tween,h=t.Component}],execute:function(){var u,k,R,f,m,w,g,y,x;a._RF.push({},"6d063jmQERDXawqphEHWftM","RocketTutorial",void 0);var d=c.ccclass,A=c.property;t("RocketTutorial",(u=d("RocketTutorial"),k=A(s),R=A(s),f=A([s]),u((g=o((w=function(t){function o(){for(var o,i=arguments.length,a=new Array(i),c=0;c<i;c++)a[c]=arguments[c];return o=t.call.apply(t,[this].concat(a))||this,e(o,"topRocket",g,n(o)),e(o,"BotRocket",y,n(o)),e(o,"listTile",x,n(o)),o.topRocketInitialPos=new l,o.botRocketInitialPos=new l,o.topRocketInitialAngle=0,o.botRocketInitialAngle=0,o.initialOpacities=[],o.animationCompleteCount=0,o}i(o,t);var a=o.prototype;return a.start=function(){var t=this;this.topRocket&&(this.topRocketInitialPos=this.topRocket.position.clone(),this.topRocketInitialAngle=this.topRocket.angle),this.BotRocket&&(this.botRocketInitialPos=this.BotRocket.position.clone(),this.botRocketInitialAngle=this.BotRocket.angle),this.listTile.forEach((function(o){var i=o.getComponent(p);t.initialOpacities.push(i?i.opacity:255)})),this.startAnimation()},a.startAnimation=function(){this.topAnim(),this.botAnim()},a.resetAndLoop=function(){var t=this;this.topRocket&&(this.topRocket.position=this.topRocketInitialPos.clone(),this.topRocket.angle=this.topRocketInitialAngle),this.BotRocket&&(this.BotRocket.position=this.botRocketInitialPos.clone(),this.BotRocket.angle=this.botRocketInitialAngle),this.listTile.forEach((function(o,i){var e=o.getComponent(p);e&&(e.opacity=t.initialOpacities[i]||255)})),this.scheduleOnce((function(){t.startAnimation()}),1)},a.topAnim=function(){var t=this,o=this.topRocket.position,i=this.listTile[1].position,e=(this.topRocket.angle,new l(o.x+.3*(i.x-o.x),o.y+120,0)),n=new l(o.x+.7*(i.x-o.x),i.y+90,0);r({t:0}).to(.85,{t:1},{onUpdate:function(a){if(a){var c=a.t,s=Math.pow(1-c,3)*o.x+3*Math.pow(1-c,2)*c*e.x+3*(1-c)*Math.pow(c,2)*n.x+Math.pow(c,3)*i.x,p=Math.pow(1-c,3)*o.y+3*Math.pow(1-c,2)*c*e.y+3*(1-c)*Math.pow(c,2)*n.y+Math.pow(c,3)*i.y,r=new l(s,p,0);t.topRocket.position=new l(r);var h=-155*c;t.topRocket.angle=h}}}).call((function(){t.fade(t.listTile[1].getComponent(p)),t.checkAnimationComplete()})).start(),this.fade(this.listTile[0].getComponent(p))},a.botAnim=function(){var t=this,o=this.BotRocket.position,i=this.listTile[3].position,e=(this.BotRocket.angle,new l(o.x+.3*(i.x-o.x),o.y-120,0)),n=new l(o.x+.7*(i.x-o.x),i.y-90,0);this.BotRocket.angle=-155,r({t:0}).to(.85,{t:1},{onUpdate:function(a){if(a){var c=a.t,s=Math.pow(1-c,3)*o.x+3*Math.pow(1-c,2)*c*e.x+3*(1-c)*Math.pow(c,2)*n.x+Math.pow(c,3)*i.x,p=Math.pow(1-c,3)*o.y+3*Math.pow(1-c,2)*c*e.y+3*(1-c)*Math.pow(c,2)*n.y+Math.pow(c,3)*i.y,r=new l(s,p,0);t.BotRocket.position=new l(r);var h=25*c;t.BotRocket.angle=h}}}).call((function(){t.fade(t.listTile[3].getComponent(p)),t.checkAnimationComplete()})).start(),this.fade(this.listTile[2].getComponent(p))},a.checkAnimationComplete=function(){var t=this;this.animationCompleteCount++,this.animationCompleteCount>=2&&(this.animationCompleteCount=0,this.scheduleOnce((function(){t.resetAndLoop()}),.7))},a.fade=function(t){r(t).to(.6,{opacity:0},{easing:"quadOut"}).start()},a.update=function(t){},o}(h)).prototype,"topRocket",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=o(w.prototype,"BotRocket",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=o(w.prototype,"listTile",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=w))||m));a._RF.pop()}}}));

System.register("chunks:///_virtual/Rotate.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,o,r,n,a;return{setters:[function(t){e=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator,n=t.tween,a=t.Component}],execute:function(){var c;o._RF.push({},"48be9MUFW9F46I/P/pHk7MG","Rotate",void 0);var s=r.ccclass;r.property,t("Rotate",s("Rotate")(c=function(t){function o(){return t.apply(this,arguments)||this}e(o,t);var r=o.prototype;return r.start=function(){this.rotate()},r.rotate=function(){n(this.node).by(1.5,{angle:360}).repeatForever().start()},o}(a))||c);o._RF.pop()}}}));

System.register("chunks:///_virtual/RotateStar.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,r,a,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.tween,a=t.Vec3,s=t.Component}],execute:function(){var c;n._RF.push({},"619d7FYvcVN0b+/E8HeIEFB","RotateStar",void 0);var i=o.ccclass;o.property,t("RotateStar",i("RotateStar")(c=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.start=function(){},o.rotateLoop=function(){r(this.node).parallel(r().to(.2,{angle:4}).to(1,{angle:-4}).to(.5,{angle:0}),r().to(.2,{scale:new a(1.1,1.1,1)},{easing:"sineInOut"}).to(.2,{scale:new a(1.2,1.2,1)},{easing:"sineInOut"})).repeatForever().start()},n}(s))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/Sand.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,o,a;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.tween,a=t.Component}],execute:function(){var s;n._RF.push({},"13955tJWsxLsLQhgQ3zAeZZ","Sand",void 0);var c=r.ccclass;r.property,t("Sand",c("Sand")(s=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.start=function(){this.rotate()},r.rotate=function(){var t=this;o(this.node).repeatForever(o().to(.5,{angle:180}).delay(.3).call((function(){return t.node.angle=0})).delay(.2)).start()},n}(a))||s);n._RF.pop()}}}));

System.register("chunks:///_virtual/ShuffleItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseItem.ts"],(function(t){var e,i,n,s;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator},function(t){s=t.default}],execute:function(){var o;i._RF.push({},"438ffQp8BhHubr0sDJ7hdL0","ShuffleItem",void 0);var c=n.ccclass;n.property,t("ShuffleItem",c("ShuffleItem")(o=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).item="useShuffle",e}return e(i,t),i.prototype.onUse=function(){var e;this.clicked||this.locked||this.clicked||this.locked||(t.prototype.onUse.call(this),(null==(e=this.game)?void 0:e.board).shuffle(),this.quantity>0&&(this.quantity-=1,this.textChange()))},i}(s))||o);i._RF.pop()}}}));

System.register("chunks:///_virtual/ShuffleLevel.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"c215bmfg1lHvYYueRESS7r2","ShuffleLevel",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/ShuffleLevel2.ts",["cc","./global.ts","./GravityManager.ts"],(function(i){var t,r,e,s;return{setters:[function(i){t=i.cclegacy},function(i){r=i.Direction,e=i.SubType},function(i){s=i.GravityManager}],execute:function(){t._RF.push({},"f7407cbz29Dxrai4GTJytW0","ShuffleLevel",void 0);i("ShuffleLevel",function(){function i(i){this.gridHeight=void 0,this.gridWidth=void 0,this.data=void 0,this.RocketTile=void 0,this.difficulty=void 0,this.Timer=void 0,this.grid=[],this.gridLabels=[],this.layerList=new Map,this.gridHeight=i.GridHeight,this.gridWidth=i.GridWidth,this.RocketTile=i.Tiles.RocketTiles,this.difficulty=i.Difficulty,this.Timer=i.Time,this.data=i}var t=i.prototype;return t.changeLevel=function(i){this.gridHeight=i.GridHeight,this.gridWidth=i.GridWidth,this.RocketTile=i.Tiles.RocketTiles,this.difficulty=i.Difficulty,this.Timer=i.Time,this.data=i},t.shuffle=function(){var i=this;this.grid=Array(this.gridHeight).fill(null).map((function(){return Array(i.gridWidth).fill(-1)})),this.gridLabels=Array(this.gridHeight).fill(null).map((function(){return Array(i.gridWidth).fill("")}));var t=[],r=this.data.Tiles.MathPairs||[],e=0;r.forEach((function(i){t.push({tileId:e,expression:i[0],result:i[1],positions:[]}),e++}));for(var s=Math.floor(this.RocketTile/2),n=0;n<s;n++)t.push({tileId:8,expression:"ROCKET",result:"ROCKET",positions:[]});for(var h=this.shuffleArray([].concat(t)),a=h.length,o=Math.floor(2*a/3),l=this.getAllPositions(),f=[].concat(l),d=0;d<o;d++){var g=h[d],c=this.getStrategicPositions(f,this.difficulty);g.positions=c,c.length>=2&&(this.grid[c[0].y][c[0].x]=g.tileId,this.gridLabels[c[0].y][c[0].x]=g.expression,this.grid[c[1].y][c[1].x]=g.tileId,this.gridLabels[c[1].y][c[1].x]=g.result),c.forEach((function(i){var t=f.findIndex((function(t){return t.x===i.x&&t.y===i.y}));t>-1&&f.splice(t,1)}))}for(var u=o;u<a;u++){for(var y=h[u],v=[],p=0;p<2&&f.length>0;p++){var x=Math.floor(Math.random()*f.length),T=f.splice(x,1)[0];v.push(T)}v.length>=2&&(this.grid[v[0].y][v[0].x]=y.tileId,this.gridLabels[v[0].y][v[0].x]=y.expression,this.grid[v[1].y][v[1].x]=y.tileId,this.gridLabels[v[1].y][v[1].x]=y.result),y.positions=v}return this.grid},t.getStrategicPositions=function(i,t){return i.length<2?i.splice(0,2):t<=1?this.getNearbyPositions(i):this.getDistantPositions(i)},t.getNearbyPositions=function(i){for(var t=[],r=1/0,e=0;e<i.length;e++)for(var s=e+1;s<i.length;s++){var n=i[e],h=i[s],a=this.calculateDistance(n,h);a<r&&(r=a,t=[n,h])}return t.forEach((function(t){var r=i.findIndex((function(i){return i.x===t.x&&i.y===t.y}));r>-1&&i.splice(r,1)})),2===t.length?t:this.getRandomPositions(i,2)},t.getDistantPositions=function(i){for(var t=[],r=0,e=0;e<i.length;e++)for(var s=e+1;s<i.length;s++){var n=i[e],h=i[s],a=this.calculateDistance(n,h);a>r&&(r=a,t=[n,h])}return t.forEach((function(t){var r=i.findIndex((function(i){return i.x===t.x&&i.y===t.y}));r>-1&&i.splice(r,1)})),2===t.length?t:this.getRandomPositions(i,2)},t.calculateDistance=function(i,t){return Math.abs(i.x-t.x)+Math.abs(i.y-t.y)},t.getRandomPositions=function(i,t){for(var r=[],e=0;e<t&&i.length>0;e++){var s=Math.floor(Math.random()*i.length);r.push(i.splice(s,1)[0])}return r},t.isEasyEnough=function(){for(var i=0,t=0;t<this.gridHeight;t++)for(var r=0;r<this.gridWidth;r++)-1!==this.grid[t][r]&&8!==this.grid[t][r]&&(r<this.gridWidth-1&&this.grid[t][r]===this.grid[t][r+1]&&i++,t<this.gridHeight-1&&this.grid[t][r]===this.grid[t+1][r]&&i++);return this.difficulty<=2?i>=8:this.difficulty<=3.5?i>=4&&i<=8:i<=3},t.generateMap=function(){return this.shuffle()},t.shuffleArray=function(i){for(var t=[].concat(i),r=t.length-1;r>0;r--){var e=Math.floor(Math.random()*(r+1)),s=[t[e],t[r]];t[r]=s[0],t[e]=s[1]}return t},t.getAllPositions=function(){for(var i=[],t=0;t<this.gridHeight;t++)for(var r=0;r<this.gridWidth;r++)i.push({x:r,y:t});return i},t.checkDirection=function(){switch(this.data.Gravity){case 0:return r.NONE;case 1:return r.LEFT;case 2:return r.RIGHT;case 3:return r.UP;case 4:return r.DOWN;default:return r.NONE}},t.getMapLayer=function(i){for(var t=this,r=Array.from({length:this.gridHeight},(function(){return Array(t.gridWidth).fill(0)})),n=Array.from({length:this.gridHeight},(function(){return Array(t.gridWidth).fill(0)})),h=Array.from({length:this.gridHeight},(function(){return Array(t.gridWidth).fill(0)})),a=[],o=0;o<this.gridHeight;o++)for(var l=0;l<this.gridWidth;l++)s.setCircle(this.data.Circle),this.data.Gravity&&(h[o][l]=1),8===i[o][l]?r[o][l]=1:(r[o][l]=0,-1!==i[o][l]&&a.push({x:l,y:o}));console.log(this.checkDirection()),s.changeGravity(this.checkDirection());for(var f=this.data.Tiles.BombEffects,d=0;d<f;d++){var g=Math.floor(Math.random()*a.length),c=a.splice(g,1)[0],u=c.x;n[c.y][u]=1}if(this.layerList.set(e.ROCKET,r),this.layerList.set(e.BOOM,n),this.layerList.set(e.GRAVITY,h),"BUTTERFLY"==this.data.Theme.toUpperCase()){var y=Array.from({length:this.gridHeight},(function(){return Array(t.gridWidth).fill(1)}));this.layerList.set(e.BUTTERFLY,y)}return this.layerList},t.getGrid=function(){return this.grid},t.getGridLabels=function(){return this.gridLabels},i}());t._RF.pop()}}}));

System.register("chunks:///_virtual/SoundManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts"],(function(n){var t,e,o,i,a,r,s,c,u,l,d,p,f;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.inheritsLoose,o=n.initializerDefineProperty,i=n.assertThisInitialized},function(n){a=n.cclegacy,r=n._decorator,s=n.AudioClip,c=n.director,u=n.resources,l=n.Node,d=n.AudioSource,p=n.Component},function(n){f=n.SFX}],execute:function(){var h,g,v,y,M,S;a._RF.push({},"87c02nmM8FG6bkLfKHe+tjw","SoundManager",void 0);var b=r.ccclass,w=r.property;n("SoundManager",(h=b("SoundManager"),g=w({type:[s]}),h(((S=function(n){function t(){for(var t,e=arguments.length,a=new Array(e),r=0;r<e;r++)a[r]=arguments[r];return t=n.call.apply(n,[this].concat(a))||this,o(t,"audioClips",M,i(t)),t.soundOn=!0,t.musicOn=!0,t.vibrateOn=!0,t.sfxMap=new Map,t.loaded=!1,t}e(t,n);var a=t.prototype;return a.start=function(){t.instance?this.destroy():(t.instance=this,c.addPersistRootNode(this.node),this.setUpAudio())},a.setUpAudio=function(){var n=this,t=Object.values(f).filter((function(n){return"string"==typeof n})),e=0;t.forEach((function(o){u.load("sfx/"+o,s,(function(i,a){if(!i&&a){var r=new l("Audio_"+o);r.parent=n.node;var s=r.addComponent(d);s.clip=a,s.playOnAwake=!1,n.sfxMap.set(o,s)}++e===t.length&&(n.loaded=!0)}))}))},a.playSFX=function(n){var t;this.soundOn&&(this.loaded?null==(t=this.sfxMap.get(n))||t.play():console.warn("SFX chưa load xong: "+n))},a.stopSFX=function(n){var t;this.loaded?null==(t=this.sfxMap.get(n))||t.stop():console.warn("SFX chưa load xong: "+n)},t}(p)).instance=void 0,M=t((y=S).prototype,"audioClips",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=y))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/Star.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts","./SoundManager.ts"],(function(t){var e,i,n,a,o,r,l,s,c,u,h,d,p,f,v,w,y;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,r=t._decorator,l=t.Sprite,s=t.Node,c=t.tween,u=t.Vec3,h=t.Tween,d=t.ParticleSystem2D,p=t.Component},function(t){f=t.backInSlowEnd,v=t.SFX},function(t){w=t.AnimationHandler},function(t){y=t.SoundManager}],execute:function(){var g,m,S,b,P,x,M,A,B,z,C,L,T;o._RF.push({},"33b93Zd5mNJZ4pCIbu6p1BS","Star",void 0);var k=r.ccclass,F=r.property;t("Star",(g=k("Star"),m=F(l),S=F(l),b=F(s),P=F(s),x=F(s),g((B=e((A=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))||this).used=!1,n(e,"circle",B,a(e)),n(e,"star",z,a(e)),n(e,"match",C,a(e)),n(e,"trail",L,a(e)),n(e,"death",T,a(e)),e}i(e,t);var o=e.prototype;return o.putAt=function(t,e){var i,n=this;void 0===e&&(e=0),this.node.setPosition(t),this.star.node.active=!0;var a=null==(i=w.fillProgressBar)?void 0:i.currentStar;if(a){var o=a.getWorldPosition();w.animList.push(new Promise((function(t){c(n.node).delay(.15+.1*(e+1)).call((function(){n.follow()})).to(1.36-.1*(e+1),{worldPosition:o,scale:new u(2,2,1)},{easing:f}).call((function(){n.used&&w.callProgress(),n.trail.active=!1})).delay(.1).call((function(){n.explode()})).delay(.5).call((function(){n.kill(),t()})).start()})))}},o.putAtForHint=function(t){this.star.node.active=!1,this.node.setPosition(t),this.circle.node.active=!0},o.isUsed=function(){return this.used},o.reSpawn=function(){this.node.setScale(1.5,1.5),this.used=!0,this.node.active=!0},o.kill=function(){h.stopAllByTarget(this.node),h.stopAllByTarget(this.star),h.stopAllByTarget(this.circle),this.used=!1,this.death.active=!1,this.trail.active=!1,this.node.scale=new u(1,1,1),this.star.node.active=!1,this.match.active=!1,this.circle.node.active=!1,this.trail.active=!1,this.node.active=!1},o.firstAndLastMatch=function(){var t;this.used&&(this.match.active=!0,null==(t=this.match)||null==(t=t.getComponent(d))||t.resetSystem())},o.explode=function(){var t,e;this.death.active=!0,this.star.node.active=!1,null==(t=this.death)||null==(t=t.getComponent(d))||t.resetSystem(),null==(e=w.fillProgressBar)||e.checkActive()},o.follow=function(){var t;this.trail.active=!0,null==(t=this.trail)||null==(t=t.getComponent(d))||t.resetSystem()},o.winPut=function(t){var e,i=this;this.star.node.active=!0,this.circle.node.active=!1,this.node.setWorldPosition(t),this.follow();var n=null==(e=w.fillProgressBar)?void 0:e.currentStar;if(n){var a=n.getWorldPosition(),o=t,r=a,l=new u(o.x+.3*(r.x-o.x),o.y-80,0),s=new u(o.x+.7*(r.x-o.x),r.y-60,0);w.animList.push(new Promise((function(t){c({t:0}).to(.7,{t:1},{onUpdate:function(t){if(t){var e=t.t,n=Math.pow(1-e,3)*o.x+3*Math.pow(1-e,2)*e*l.x+3*(1-e)*Math.pow(e,2)*s.x+Math.pow(e,3)*r.x,a=Math.pow(1-e,3)*o.y+3*Math.pow(1-e,2)*e*l.y+3*(1-e)*Math.pow(e,2)*s.y+Math.pow(e,3)*r.y,c=new u(n,a,0);i.node.setWorldPosition(c);var h=1+e;i.node.setScale(h,h,1)}},easing:"quadOut"}).call((function(){y.instance.playSFX(v.COLLECT_STAR),i.kill(),t()})).start()})))}},e}(p)).prototype,"circle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(A.prototype,"star",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(A.prototype,"match",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(A.prototype,"trail",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(A.prototype,"death",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=A))||M));o._RF.pop()}}}));

System.register("chunks:///_virtual/StarPool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Star.ts"],(function(t){var e,r,i,n,o,l,a,u,s,c,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,i=t.initializerDefineProperty,n=t.assertThisInitialized,o=t.createForOfIteratorHelperLoose},function(t){l=t.cclegacy,a=t._decorator,u=t.Prefab,s=t.instantiate,c=t.Component},function(t){p=t.Star}],execute:function(){var f,d,h,v,b,g,m;l._RF.push({},"56628dzOJROhJhl1rXXnlo8","StarPool",void 0);var y=a.ccclass,P=a.property;t("default",(f=y("StarPool"),d=P(u),h=P(Number),f((g=e((b=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return e=t.call.apply(t,[this].concat(o))||this,i(e,"pathPrefab",g,n(e)),i(e,"size",m,n(e)),e.itemList=[],e}r(e,t);var l=e.prototype;return l.initialize=function(t){for(var e=0;e<this.size;e++){var r=s(this.pathPrefab);r&&(console.log("added child"),t.node.addChild(r),r.setSiblingIndex(999999)),this.itemList.push(null==r?void 0:r.getComponent(p))}this.returnAll()},l.getFirstItem=function(){for(var t,e=o(this.itemList);!(t=e()).done;){var r=t.value;if(!r.isUsed())return r.reSpawn(),r.node.setSiblingIndex(999999),r}return null},l.returnPool=function(t){t.kill()},l.returnMultiple=function(t){for(var e,r=o(t);!(e=r()).done;){e.value.kill()}},l.returnAll=function(){this.returnMultiple(this.itemList)},e}(c)).prototype,"pathPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=e(b.prototype,"size",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=b))||v));l._RF.pop()}}}));

System.register("chunks:///_virtual/StartTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseTurn.ts"],(function(t){var n,e,i,r;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy},function(t){i=t.Turn},function(t){r=t.BaseTurn}],execute:function(){e._RF.push({},"8446640he9A4aLCzzhPV5qN","StartTurn",void 0);t("StartTurn",function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.onEnter=function(){this.game.isWin()?this.game.switchTurn(i.LOAD):this.game.matchPair.length>0?this.game.switchTurn(i.MATCH):this.game.showItem()},r.onExit=function(){},e}(r));e._RF.pop()}}}));

System.register("chunks:///_virtual/SubTilePool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseSubTile.ts"],(function(e){var t,i,r,n,o,l,u,a,s,c,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,n=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,u=e._decorator,a=e.Prefab,s=e.instantiate,c=e.Component},function(e){f=e.BaseSubTile}],execute:function(){var p,d,b,h,v;l._RF.push({},"6abaecMCXJMGaMNASv2EoDQ","SubTilePool",void 0);var P=u.ccclass,m=u.property;e("default",(p=P("SubTilePool"),d=m(a),p((v=t((h=function(e){function t(t){var i;return i=e.call(this)||this,r(i,"subTilePrefab",v,n(i)),i.size=70,i.itemList=[],i}i(t,e);var l=t.prototype;return l.initialize=function(e){for(var t=0;t<this.size;t++){var i=s(this.subTilePrefab);i&&(console.log("added child"),e.node.addChild(i)),this.itemList.push(null==i?void 0:i.getComponent(f))}this.returnAll()},l.getFirstItem=function(){for(var e,t=o(this.itemList);!(e=t()).done;){var i=e.value;if(!i.isUsed())return i.reSpawn(),i}return null},l.returnPool=function(e){e.kill()},l.returnMultiple=function(e){for(var t,i=o(e);!(t=i()).done;){t.value.kill()}},l.returnAll=function(){this.returnMultiple(this.itemList)},t}(c)).prototype,"subTilePrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=h))||b));l._RF.pop()}}}));

System.register("chunks:///_virtual/SubTilePoolManager.ts",["cc"],(function(){var e;return{setters:[function(c){e=c.cclegacy}],execute:function(){e._RF.push({},"c891fSXY/dP55IEbIOEqz8m","SubTilePoolManager",void 0),e._RF.pop()}}}));

System.register("chunks:///_virtual/SuperRocketItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./BaseItem.ts","./SoundManager.ts","./AnimationHandler.ts"],(function(e){var t,n,i,o,a,r,l,s,c,u,g,d,h,v,f,m,p,y,S,k,w,b,P,C,I,R;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,l=e._decorator,s=e.Node,c=e.Vec3,u=e.Widget,g=e.view,d=e.resources,h=e.SpriteFrame,v=e.Animation,f=e.Sprite,m=e.ParticleSystem2D,p=e.tween},function(e){y=e.Item,S=e.FIREWORK_PATH,k=e.ROCKET_PATH,w=e.TileType,b=e.SFX,P=e.Turn},function(e){C=e.default},function(e){I=e.SoundManager},function(e){R=e.AnimationHandler}],execute:function(){var M,E,F,O,T,N,x;r._RF.push({},"c0eedNhZqVOJaxyRPVN7ifG","SuperRocketItem",void 0);var A=l.ccclass,B=l.property;e("default",(M=A("SuperRocketItem"),E=B(s),F=B(s),M((N=t((T=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return t=e.call.apply(e,[this].concat(a))||this,i(t,"overlay",N,o(t)),i(t,"rockets",x,o(t)),t.item="useSuperRocket",t}n(t,e);var r=t.prototype;return r.onUse=function(){var t,n,i,o;if(!this.clicked&&0!=this.quantity&&!this.locked){e.prototype.onUse.call(this);var r=new Set,l=this.getRandomMatchingPair(r);if(l){l.forEach((function(e){return r.add(e)}));var s=this.getRandomMatchingPair(r);if(s){s.forEach((function(e){return r.add(e)}));var d=this.getRandomMatchingPair(r);if(d){var h=[].concat(l,s,d);null==(t=this.game)||t.node.addChild(this.overlay),this.overlay.active=!0,this.overlay.setPosition(new c),console.log(this.itemManager.botOverlay),this.overlay.getComponent(u).verticalCenter=-this.game.node.position.y,g.getVisibleSize().width<g.getVisibleSize().height&&(this.itemManager.botOverlay.active=!0),this.itemManager.botOverlay.setSiblingIndex(this.node.getSiblingIndex()-1),null==(n=this.game)||n.unChoose(),null==(i=this.game)||i.turnOffInput();for(var v,f=a(null==(m=this.game)||null==(m=m.board)?void 0:m.board);!(v=f()).done;)for(var m,p,S=v.value,k=a(S);!(p=k()).done;){p.value.node.setSiblingIndex(1)}for(var w,b=a(h);!(w=b()).done;){w.value.node.setSiblingIndex(this.overlay.getSiblingIndex()+1)}null==(o=this.itemManager)||o.hideExcept(y.SUPERROCKET),this.showRocket(h),console.log("rocket"),this.quantity--,this.textChange()}}}}},r.showRocket=function(e){var t=this;this.stopFunction();for(var n=g.getVisibleSize().width/7,i=g.getVisibleSize(),o=d.get(S,h),a=d.get(k,h),r=function(r){var l,s,u,d;t.rockets[r].active=!0;var h=t.rockets[r].getChildByName("Rocket1"),y=null==(l=t.rockets[r].getChildByName("Explosion"))?void 0:l.getComponent(v),S=null==(s=t.rockets[r].getChildByName("break"))?void 0:s.getComponent(v);console.log(y),t.rockets[r].angle=0,h.getComponent(f).spriteFrame=o;var k=t.rockets[r].getChildByName("Rocket1"),w=k?k.getChildByName("RocketDust"):null,C=w?w.getChildByName("whiteSmoke"):null;C.active=!0,null==C||null==(u=C.getComponent(m))||u.resetSystem();var M=w?w.getChildByName("yellow"):null;M.active=!0,null==M||null==(d=M.getComponent(m))||d.resetSystem(),t.rockets[r].setWorldPosition(new c(n*(r+1),-100)),h.active=!0;var E=r>=3?g.getVisibleSize().width+1e3:-1e3,F=t.getAngleBetween(t.rockets[r].worldPosition,new c(E,500));e[r].underKill=!0,t.rockets[r].setScale(.8*e[0].originScale,.8*e[0].originScale),p(t.rockets[r]).to(.5,{worldPosition:new c(n*(r+1),50)}).delay(.2).to(.1+.1*r,{angle:F-25}).call((function(){I.instance.playSFX(b.ROCKET_FLY)})).to(.5,{worldPosition:new c(E,i.height/2)}).delay(.5).call((function(){t.rockets[r].setScale(e[r].originScale,e[r].originScale),h.getComponent(f).spriteFrame=a,t.rockets[r].angle=t.getAngleBetween(t.rockets[r].worldPosition,e[r].node.worldPosition),p(t.rockets[r]).to(.1+.09*r,{worldPosition:e[r].node.worldPosition},{easing:"sineOut"}).call((function(){I.instance.playSFX(b.EXPLODE),e[r].wholeSprite.active=!1,e[r].node.setSiblingIndex(1),h.active=!1,S.node.active=!0,y.node.active=!0,y.node.angle=-t.rockets[r].angle,S.node.active=!0,S.node.angle=-t.rockets[r].angle,null==y||y.play(),null==y||y.once(v.EventType.FINISHED,(function(){var n;if(y.node.active=!1,5==r){var i,o;null==(i=t.game)||i.turnOnInput(),null==(o=t.itemManager)||o.showAll(),t.overlay.active=!1,t.itemManager.botOverlay.active=!1;for(var a=0;a<6;a++)e[a].onDead(t.game.board,a%2==0,a%2==0?e[a+1]:e[a-1],!0),e[a].kill()}null==(n=t.game)||n.switchTurn(P.MATCH)})),null==S||S.play(),null==y||y.once(v.EventType.FINISHED,(function(){S.node.active=!1,5==r&&Promise.all(R.animTile).then((function(){t.enableFunction()}))}))})).start()})).start()},l=0;l<e.length;l++)r(l)},r.getAngleBetween=function(e,t){var n=t.x-e.x,i=t.y-e.y;return 180*Math.atan2(i,n)/Math.PI-90+25},r.getRandomMatchingPair=function(e){var t;void 0===e&&(e=new Set);var n=null==(t=this.game)||null==(t=t.board)?void 0:t.board;if(!n)return null;for(var i,o=new Map,r=a(n);!(i=r()).done;)for(var l,s=i.value,c=a(s);!(l=c()).done;){var u=l.value,g=u;if(!e.has(g)){var d=u.getTypeID();d!==w.NONE&&(o.has(d)||o.set(d,[]),o.get(d).push(g))}}var h=Array.from(o.values()).filter((function(e){return e.length>=2}));if(0===h.length)return null;var v=h[Math.floor(Math.random()*h.length)].slice().sort((function(){return Math.random()-.5}));return[v[0],v[1]]},t}(C)).prototype,"overlay",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(T.prototype,"rockets",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=T))||O));r._RF.pop()}}}));

System.register("chunks:///_virtual/Tile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./AnimationHandler.ts"],(function(exports){var _applyDecoratedDescriptor,_inheritsLoose,_initializerDefineProperty,_assertThisInitialized,_createForOfIteratorHelperLoose,cclegacy,_decorator,Sprite,Node,Label,Animation,Vec2,Vec3,tween,resources,SpriteFrame,Color,UITransform,Size,Component,Theme,TileType,getTilePath,SubType,getTilePositionByLevel,AnimationHandler;return{setters:[function(e){_applyDecoratedDescriptor=e.applyDecoratedDescriptor,_inheritsLoose=e.inheritsLoose,_initializerDefineProperty=e.initializerDefineProperty,_assertThisInitialized=e.assertThisInitialized,_createForOfIteratorHelperLoose=e.createForOfIteratorHelperLoose},function(e){cclegacy=e.cclegacy,_decorator=e._decorator,Sprite=e.Sprite,Node=e.Node,Label=e.Label,Animation=e.Animation,Vec2=e.Vec2,Vec3=e.Vec3,tween=e.tween,resources=e.resources,SpriteFrame=e.SpriteFrame,Color=e.Color,UITransform=e.UITransform,Size=e.Size,Component=e.Component},function(e){Theme=e.Theme,TileType=e.TileType,getTilePath=e.getTilePath,SubType=e.SubType,getTilePositionByLevel=e.getTilePositionByLevel},function(e){AnimationHandler=e.AnimationHandler}],execute:function(){var _dec,_dec2,_dec3,_dec4,_dec5,_dec6,_dec7,_dec8,_dec9,_class,_class2,_descriptor,_descriptor2,_descriptor3,_descriptor4,_descriptor5,_descriptor6,_descriptor7,_descriptor8;cclegacy._RF.push({},"4fdf9U4ak9Guqei/yF8Luzo","Tile",void 0);var ccclass=_decorator.ccclass,property=_decorator.property,Tile=exports("default",(_dec=ccclass("Tile"),_dec2=property(Sprite),_dec3=property(Sprite),_dec4=property(Node),_dec5=property(Node),_dec6=property(Label),_dec7=property(Node),_dec8=property(Node),_dec9=property(Animation),_dec((_class2=function(_Component){function Tile(){for(var e,t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];return e=_Component.call.apply(_Component,[this].concat(i))||this,_initializerDefineProperty(e,"itemTypeSprite",_descriptor,_assertThisInitialized(e)),_initializerDefineProperty(e,"backGroundSpite",_descriptor2,_assertThisInitialized(e)),_initializerDefineProperty(e,"wholeSprite",_descriptor3,_assertThisInitialized(e)),_initializerDefineProperty(e,"hintGlow",_descriptor4,_assertThisInitialized(e)),_initializerDefineProperty(e,"typeLabel",_descriptor5,_assertThisInitialized(e)),_initializerDefineProperty(e,"choosingEffect",_descriptor6,_assertThisInitialized(e)),_initializerDefineProperty(e,"rotatedChoosingEff",_descriptor7,_assertThisInitialized(e)),_initializerDefineProperty(e,"polishEffect",_descriptor8,_assertThisInitialized(e)),e.underKill=!1,e.selfPromise=[],e.originScale=1,e.used=!1,e.theme=Theme.NONE,e.coordinate=new Vec2,e.typeID=TileType.NONE,e.hintAnimation=null,e.hintglow=null,e.subTileList=new Map,e.onClickCallbacks=[],e}_inheritsLoose(Tile,_Component);var _proto=Tile.prototype;return _proto.start=function(){this.node.on(Node.EventType.TOUCH_START,this.emitOnClickCallbacks,this)},_proto.getSubtileList=function(){return this.subTileList},_proto.playPolish=function(){var e=this;this.polishEffect.node.active=!0,this.polishEffect.play(),this.polishEffect.once(Animation.EventType.FINISHED,(function(){e.polishEffect.node.active=!1}))},_proto.show=function(){var e=this;this.node.scale=new Vec3(0,0,1),tween(this.node).to(.3,{scale:new Vec3(1,1,1)},{easing:"backOut"}).call((function(){return e.playPolish()})).start()},_proto.setTheme=function(e){if(e!=this.theme&&(this.theme=e,8===this.typeID&&this.itemTypeSprite)){var t=getTilePath(this.typeID,this.theme),i=resources.get(t,SpriteFrame);this.itemTypeSprite.spriteFrame=i}},_proto.getTheme=function(){return this.theme},_proto.addOnClickCallback=function(e){this.onClickCallbacks.push(e)},_proto.emitOnClickCallbacks=function(){var e=this;this.onClickCallbacks.forEach((function(t){t(e)}))},_proto.clearOnClickCallbacks=function(){this.onClickCallbacks=[]},_proto.getCoordinate=function(){return this.coordinate},_proto.setCoordinate=function(e){this.coordinate=new Vec2(e.x,e.y)},_proto.getTypeID=function(){return this.typeID},_proto.isUsed=function(){return this.used},_proto.reSpawn=function(){this.used=!0,this.wholeSprite.active=!0},_proto.hide=function(){this.setTypeID(TileType.NONE),this.wholeSprite.active=!1},_proto.kill=function(){this.wholeSprite.scale=new Vec3(this.originScale,this.originScale),this.wholeSprite.angle=0,this.underKill=!1,this.setTypeID(TileType.NONE),this.used=!1,this.wholeSprite.active=!1},_proto.setTypeID=function(e){if(e!=this.typeID&&(this.typeID=e,this.itemTypeSprite))if(8===e){this.itemTypeSprite.node.active=!0;var t=getTilePath(this.typeID,this.theme),i=resources.get(t,SpriteFrame);this.itemTypeSprite.spriteFrame=i,this.typeLabel&&(this.typeLabel.string="")}else this.itemTypeSprite.node.active=!1},_proto.attachSubType=function(e,t){this.subTileList.set(t,e),e.onAttach(this)},_proto.detachAll=function(){for(var e,t=_createForOfIteratorHelperLoose(this.subTileList);!(e=t()).done;){var i=e.value;this.detachSubType(i[0])}},_proto.detachSubType=function(e){var t;null==(t=this.subTileList.get(e))||t.onDetach(),this.subTileList.delete(e)},_proto.onDead=function(e,t,i,o){var r;void 0===o&&(o=!1);var n=i.subTileList.get(SubType.GRAVITY);null==(r=this.subTileList.get(SubType.GRAVITY))||r.onDead(e,t,n,o),this.detachSubType(SubType.GRAVITY);for(var s,a=_createForOfIteratorHelperLoose(this.subTileList);!(s=a()).done;){var l=s.value,c=i.subTileList.get(l[0]);l[1].onDead(e,t,c,o),this.detachSubType(l[0])}},_proto.moveToRealPosition=function(e){var t=getTilePositionByLevel(this.coordinate.x,this.coordinate.y,e);this.node.setPosition(new Vec3(t.x,t.y))},_proto.onHint=function(){var e=this;this.hintGlow.active=!0,this.hintglow||(this.hintglow=tween(this.hintGlow).repeatForever(tween().to(3,{angle:360}).call((function(){e.hintGlow.angle=0}))).start()),this.hintAnimation?(this.hintAnimation.start(),this.hintglow.start()):this.hintAnimation=tween(this.wholeSprite).repeatForever(tween().to(.2,{scale:new Vec3(.7*this.originScale,.7*this.originScale)}).to(.1,{angle:20},{easing:"quadOut"}).to(.1,{angle:-20},{easing:"quadOut"}).to(.1,{angle:20},{easing:"quadOut"}).to(.1,{angle:0},{easing:"quadOut"}).to(.2,{scale:new Vec3(this.originScale,this.originScale)})).start()},_proto.onUnHint=function(){var e,t;this.wholeSprite&&(null==(e=this.hintAnimation)||e.stop(),null==(t=this.hintglow)||t.stop(),this.hintGlow.active=!1,this.wholeSprite.angle=0,tween(this.wholeSprite).to(.05,{scale:new Vec3(this.originScale,this.originScale)},{easing:"backOut"}).start())},_proto.fadeIn=function(e){var t,i,o=null==(t=this.wholeSprite)?void 0:t.getComponent(Sprite);o.color=new Color(255,255,255,0),null==(i=this.wholeSprite)||i.setScale(new Vec3),tween(o).delay(e).to(.5,{color:new Color(255,255,255,255)}).start(),tween(this.wholeSprite).delay(e).to(.5,{scale:new Vec3(this.originScale,this.originScale,1)}).start()},_proto.moveToRealPositionWithPadding=function(e,t,i,o,r){var n=this;void 0===t&&(t=!0),void 0===i&&(i=0),void 0===o&&(o="quadOut"),void 0===r&&(r=.5);var s=getTilePositionByLevel(this.coordinate.x-1,this.coordinate.y-1,e),a=new Vec3(s.x,s.y,0);t?AnimationHandler.animTile.push(new Promise((function(e){tween(n.node).delay(i).to(r,{position:a},{easing:o}).call((function(){e()})).start()}))):this.node.setPosition(a)},_proto.reScale=function(e){var t,i;null==(t=this.wholeSprite)||t.setScale(new Vec3(e,e)),this.originScale=e,null==(i=this.node.getComponent(UITransform))||i.setContentSize(new Size(100*e,100*e))},_proto.onChoose=function(){this.choosingEffect.active=!0,this.wholeSprite.setScale(new Vec3(this.originScale,this.originScale)),tween(this.wholeSprite).to(.1,{scale:new Vec3(.7*this.originScale,.7*this.originScale)}).to(.1,{scale:new Vec3(this.originScale,this.originScale)}).call((function(){})).start(),tween(this.rotatedChoosingEff).repeatForever(tween().by(1,{angle:360})).start()},_proto.onUnchoose=function(){this.choosingEffect.active=!1},_proto.shrink=function(){var e;null==(e=this.itemTypeSprite)||e.node.setScale(new Vec3),tween(this.itemTypeSprite.node).to(.3,{scale:new Vec3(1,1)},{easing:"backOut"}).start()},_proto.setLabel=function(e){8!==this.typeID?this.typeLabel.string=e:this.typeLabel.string=""},_proto.getLabel=function(){return this.typeLabel.string},_proto.getMathValue=function getMathValue(){var label=this.getLabel();if(!label||""===label||"ROCKET"===label)return this.typeID;try{if(/[\+\-\*\/]/.test(label))return eval(label);var num=parseInt(label);return isNaN(num)?this.typeID:num}catch(e){return this.typeID}},Tile}(Component),_descriptor=_applyDecoratedDescriptor(_class2.prototype,"itemTypeSprite",[_dec2],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor2=_applyDecoratedDescriptor(_class2.prototype,"backGroundSpite",[_dec3],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor3=_applyDecoratedDescriptor(_class2.prototype,"wholeSprite",[_dec4],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor4=_applyDecoratedDescriptor(_class2.prototype,"hintGlow",[_dec5],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor5=_applyDecoratedDescriptor(_class2.prototype,"typeLabel",[_dec6],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_descriptor6=_applyDecoratedDescriptor(_class2.prototype,"choosingEffect",[_dec7],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor7=_applyDecoratedDescriptor(_class2.prototype,"rotatedChoosingEff",[_dec8],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_descriptor8=_applyDecoratedDescriptor(_class2.prototype,"polishEffect",[_dec9],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_class=_class2))||_class));cclegacy._RF.pop()}}}));

System.register("chunks:///_virtual/TilePool.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./Tile.ts"],(function(e){var t,i,n,o,r,l,a,s,u,c,f,d,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.createForOfIteratorHelperLoose},function(e){l=e.cclegacy,a=e._decorator,s=e.Prefab,u=e.instantiate,c=e.Vec3,f=e.tween,d=e.Component},function(e){p=e.getTilePositionByLevel},function(e){h=e.default}],execute:function(){var v,g,b,P,m,y,L;l._RF.push({},"a66d1k6sRREzqELqEAJOtRR","TilePool",void 0);var k=a.ccclass,w=a.property;e("default",(v=k("TilePool"),g=w(s),b=w(Number),v((y=t((m=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"tilePrefab",y,o(t)),n(t,"size",L,o(t)),t.itemList=[],t.shaking=!1,t}i(t,e);var l=t.prototype;return l.initialize=function(e){for(var t=0;t<this.size;t++){var i=u(this.tilePrefab);i&&(console.log("added child"),e.node.addChild(i)),this.itemList.push(null==i?void 0:i.getComponent(h)),null==i||i.setPosition(new c(-1e4,-1e4))}this.returnAll()},l.shake=function(e,t){var i=this;if(!this.shaking){this.shaking=!0;for(var n,o=r(this.itemList);!(n=o()).done;){var l=n.value;if(l.isUsed()){var a=p(l.getCoordinate().x,l.getCoordinate().y,t,1).toVec3();f(l.node).to(.05,{position:a.clone().add(new c(e,e))}).to(.05,{position:a.clone().subtract(new c(e,e))}).to(.05,{position:a}).call((function(){return i.shaking=!1})).start()}}}},l.getFirstItem=function(){for(var e,t=r(this.itemList);!(e=t()).done;){var i=e.value;if(!i.isUsed())return i.reSpawn(),i}return null},l.returnPool=function(e){e.kill(),e.node.setPosition(new c)},l.returnMultiple=function(e){for(var t,i=r(e);!(t=i()).done;){var n=t.value;n.node.setPosition(-1e4,-1e4),n.kill(),n.detachAll()}},l.returnAll=function(){this.returnMultiple(this.itemList)},t}(d)).prototype,"tilePrefab",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(m.prototype,"size",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),P=m))||P));l._RF.pop()}}}));

System.register("chunks:///_virtual/Timer.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./GameManager.ts","./type.ts"],(function(t){var i,e,r,n,s,o,h,m,a,g,u,c;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,r=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){s=t.cclegacy,o=t._decorator,h=t.director,m=t.Label,a=t.Component},function(t){g=t.Turn},function(t){u=t.default},function(t){c=t.TileConnect}],execute:function(){var T,l,p,f,d;s._RF.push({},"66f8aBZv6RGz5IalYI5GxGc","Timer",void 0);var v=o.ccclass,E=o.property;t("Timer",(T=v("Timer"),l=E(u),T((d=i((f=function(t){function i(){for(var i,e=arguments.length,s=new Array(e),o=0;o<e;o++)s[o]=arguments[o];return i=t.call.apply(t,[this].concat(s))||this,r(i,"gm",d,n(i)),i.hasTriggeredTimeUp=!1,i.isrun=!1,i}e(i,t);var s=i.prototype;return s.start=function(){this.resetTimer(),this.hasTriggeredTimeUp=!1,h.on(c.GAME_EVENTS.START_COUNTDOWN,this.startCountdown,this),h.on(c.GAME_EVENTS.COUNTDOWN_RESET,this.resetTimer,this)},s.resetTimer=function(){this.isrun=!1,this.hasTriggeredTimeUp=!1;var t=this.node.getComponent(m);this.gm&&t&&(t.string=this.convertTime(this.gm.time))},s.convertTime=function(t){return Math.floor(t/60)+":"+(t%60).toString().padStart(2,"0")},s.startCountdown=function(){var t;this.isrun=!0;var i=this.node.getComponent(m);console.log(null==(t=this.gm)?void 0:t.time),this.gm&&i&&(i.string=this.convertTime(this.gm.time))},s.update=function(t){if(this.gm&&!this.gm.ispause&&this.isrun){var i=this.node.getComponent(m);this.gm.time>0&&this.hasTriggeredTimeUp&&(this.hasTriggeredTimeUp=!1),this.gm.time>0&&(this.gm.time-=t,this.gm.time<0&&(this.gm.time=0),i&&(i.string=this.convertTime(Math.ceil(this.gm.time)))),this.gm.time<=0&&!this.hasTriggeredTimeUp&&(console.log("Time up!"),this.isrun=!1,this.hasTriggeredTimeUp=!0,this.gm.isWin()||this.gm.switchTurn(g.FAIL),i&&(i.string=this.convertTime(0)))}},s.isWin=function(){var t;null!=(t=this.gm)&&t.isWin()&&this.gm.time},s.onDestroy=function(){h.off(c.GAME_EVENTS.START_COUNTDOWN,this.startCountdown,this),h.off(c.GAME_EVENTS.COUNTDOWN_RESET,this.resetTimer,this)},i}(a)).prototype,"gm",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=f))||p));s._RF.pop()}}}));

System.register("chunks:///_virtual/Tutorial1.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseTutorial.ts","./global.ts"],(function(e){var t,n,s,i,h,o,a,r,c,l;return{setters:[function(e){t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose},function(e){s=e.cclegacy,i=e._decorator,h=e.Tween,o=e.UIOpacity,a=e.Vec3,r=e.tween},function(e){c=e.BaseTutorial},function(e){l=e.getTilePositionByLevel}],execute:function(){var u;s._RF.push({},"6d475gYXitDa563KKEFBZkI","Tutorial1",void 0);var d=i.ccclass;e("Level1Tutorial",d("Level1Tutorial")(u=function(e){function s(){for(var t,n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return(t=e.call.apply(e,[this].concat(s))||this).currentPhaseIndex=0,t.phases=[{tiles:[[3,2],[3,4]],helpText:"Nhấn để kết nối các ô có cùng kết quả"},{tiles:[[3,5],[2,4]],helpText:"Nối các ô cùng kết quả với tối đa 2 lần rẽ."},{tiles:[[1,5],[3,1]],helpText:"Nối các ô cùng kết quả với tối đa 2 lần rẽ."},{tiles:[[4,1],[5,2]],helpText:"Nhiều hơn 2 lần rẽ là KHÔNG được phép",showHelpAfterClick:!0},{tiles:[[1,2],[4,2]],helpText:"Có chướng ngại vật giữa các ô",showHelpAfterClick:!0}],t}t(s,e);var i=s.prototype;return i.begin=function(e,t){var n=this;this.currentPhaseIndex=0,this.gm=t,this.currentBoard=e,this.resetAllSiblingIndices(e),this.showPhase(this.phases[this.currentPhaseIndex],e),this.boundOnChoose=function(){n.nextPhase(e)},this.boundOnTouch=function(){n.hideAll()},t.onTouch(this.boundOnTouch),t.onChoose(this.boundOnChoose)},i.showPhase=function(e,t){this.setupOverlay();var s=e.tiles.map((function(e){var n=e[0],s=e[1];return t.board[n][s]}));t.resetInputExcept(s[0],s[1]),this.storeSiblingIndices(t),this.setAllTilesToBackground(t);for(var i,h=n(s);!(i=h()).done;){i.value.node.setSiblingIndex(this.overlay.getSiblingIndex()+1)}e.showHelpAfterClick?this.hidePanel():this.showPanel(e.helpText),this.showHand(s[0],s[1])},i.nextPhase=function(e){var t=this,n=this.phases[this.currentPhaseIndex];if(n.showHelpAfterClick&&""===this.help.string)return this.showPanel(n.helpText),void this.scheduleOnce((function(){t.currentPhaseIndex++,t.currentPhaseIndex<t.phases.length?t.showPhase(t.phases[t.currentPhaseIndex],t.currentBoard):t.end()}),1);this.currentPhaseIndex++,this.currentPhaseIndex<this.phases.length?this.showPhase(this.phases[this.currentPhaseIndex],this.currentBoard):this.end()},i.hideAll=function(){this.hidePanel(),this.hideHand()},i.showHand=function(e,t){var n;if(this.hand){h.stopAllByTarget(this.hand);var s=this.hand.getChildByName("circle");h.stopAllByTarget(s),h.stopAllByTarget(s.getComponent(o)),this.hand.active=!0;var i=null==(n=this.gm)?void 0:n.currentLevel,c=l(e.getCoordinate().x,e.getCoordinate().y,i,1).toVec3(),u=l(t.getCoordinate().x,t.getCoordinate().y,i,1).toVec3();this.hand.setScale(new a(1,1,1)),this.hand.setPosition(c.clone().add(this.gm.node.position.clone())),s.setScale(new a(0,0,0)),s.getComponent(o).opacity=255;var d=function(){s.getComponent(o).opacity=200,s.setScale(new a(.3,.3,.3)),r(s).to(.6,{scale:new a(1.5,1.5,2.5)},{easing:"quadOut"}).start(),r(s.getComponent(o)).to(.6,{opacity:0},{easing:"quadOut"}).start()},p=r(this.hand).to(.5,{position:u.clone().add(this.gm.node.position.clone()),scale:new a(1,1,1)},{easing:"quadInOut"}).call((function(){return s.setScale(new a(0,0,0))})).to(.1,{scale:new a(.8,.8,.8)}).call(d).delay(.6).to(.1,{scale:new a(1,1,1)}).call((function(){return s.setScale(new a(0,0,0))})),g=r(this.hand).to(.5,{position:c.clone().add(this.gm.node.position.clone()),scale:new a(1,1,1)},{easing:"quadInOut"}).call((function(){return s.setScale(new a(0,0,0))})).to(.1,{scale:new a(.8,.8,.8)}).call(d).delay(.6).to(.1,{scale:new a(1,1,1)}).call((function(){return s.setScale(new a(0,0,0))}));r(this.hand).sequence(p,g).repeatForever().start()}},i.end=function(){this.hideHand(),this.hideOverlay(),this.showPanel("Dọn các ô để chiến thắng"),this.currentBoard&&(this.restoreAllSiblingIndices(this.currentBoard),this.currentBoard.resetInput(),this.currentBoard.setUpManager(this.gm)),this.overlay&&this.overlay.parent&&this.overlay.removeFromParent(),this.cleanup()},i.showObstacle=function(){var e=this;this.showPanel("Có chướng ngại vật giữa các ô"),this.scheduleOnce((function(){e.hidePanel()}),1)},i.showInvalid=function(){var e=this;this.showPanel("Nhiều hơn 2 lần rẽ là KHÔNG được phép"),this.scheduleOnce((function(){e.hidePanel()}),1)},s}(c))||u);s._RF.pop()}}}));

System.register("chunks:///_virtual/Tutorial2.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseTutorial.ts"],(function(t){var i,e,n,r,a,l,o;return{setters:[function(t){i=t.inheritsLoose},function(t){e=t.cclegacy,n=t._decorator,r=t.find,a=t.Widget,l=t.Node},function(t){o=t.BaseTutorial}],execute:function(){var s;e._RF.push({},"8c158ThJjpNILwU1lIGLKqb","Tutorial2",void 0);var h=n.ccclass;t("Level2Tutorial",h("Level2Tutorial")(s=function(t){function e(){for(var i,e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return(i=t.call.apply(t,[this].concat(n))||this).originalTimerParent=null,i.originalWidgetState=void 0,i}i(e,t);var n=e.prototype;return n.begin=function(t,i){var e,n=this;this.gm=i,this.currentBoard=t,this.resetAllSiblingIndices(t),this.setupOverlay(),this.showPanel("Hoàn thành trước khi thời gian kết thúc"),null==(e=this.gm.itemManager)||e.hideAll();var o=r("Canvas/Top/Timer"),s=r("Canvas/Bot"),h=r("Canvas");if(o&&s&&h){var u=o.getComponent(a);u&&(this.originalWidgetState={isAlignTop:u.isAlignTop,top:u.top,target:u.target},u.target=h,u.isAlignTop=!0,u.top=48,u.updateAlignment()),this.overlay.on(l.EventType.TOUCH_START,(function(){return n.end()}),this),s.active=!1,this.originalTimerParent=o.parent,o.setParent(h),o.setSiblingIndex(9999)}this.gm.turnOffInput()},n.end=function(){var t,i,e,n=this;this.overlay&&this.overlay.off(l.EventType.TOUCH_START,(function(){return n.end()}),this),this.hideOverlay();var o=r("Canvas/Timer"),s=r("Canvas/Top");if(o&&s){var h=o.getComponent(a);h&&this.originalWidgetState&&(o.setParent(s),h.target=s,h.isAlignTop=this.originalWidgetState.isAlignTop,h.top=this.originalWidgetState.top,h.updateAlignment())}this.hidePanel(),null==(t=this.gm)||null==(t=t.itemManager)||t.hideAll(),null==(i=this.gm)||null==(i=i.board)||i.resetInput(),null==(e=this.gm)||e.turnOnInput(),this.overlay&&this.overlay.parent&&this.overlay.removeFromParent(),this.resetAllSiblingIndices(this.gm.board),this.cleanup()},e}(o))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/Tutorial3.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseTutorial.ts","./global.ts"],(function(t){var e,i,n,s,a;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t._decorator},function(t){s=t.BaseTutorial},function(t){a=t.Item}],execute:function(){var r;i._RF.push({},"a11e2gfZmFHD6a97U27Ht0d","Tutorial3",void 0);var l=n.ccclass;t("Level3Tutorial",l("Level3Tutorial")(r=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),s=0;s<i;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))||this).currentPhase=1,e.hintUsed=!1,e.shuffleUsed=!1,e.originalUseHint=function(){},e.originalUseShuffle=function(){},e}e(i,t);var n=i.prototype;return n.begin=function(t,e){var i;this.gm=e,this.currentBoard=t,this.resetAllSiblingIndices(t),this.currentPhase=1,this.hintUsed=!1,this.shuffleUsed=!1,this.setupOverlay(),this.startPhase1(),this.gm.turnOffInput(),this.listenForHintUsage(),this.listenForMatchPair(),this.listenForShuffleUsage(),null==(i=this.gm.itemManager)||i.itemList.forEach((function(t){t.setquantity(11)}))},n.startPhase1=function(){var t,e;this.showPanel("Click to use Hint"),null==(t=this.gm.itemManager)||t.hideAll(),null==(e=this.gm.itemManager)||e.showItem(a.HINT)},n.startPhase2=function(){var t,e;this.currentPhase=2,this.showPanel("Click to use Shuffle"),this.gm.turnOffInput(),null==(t=this.gm.itemManager)||t.hideAll(),null==(e=this.gm.itemManager)||e.showItem(a.SHUFFLE)},n.listenForHintUsage=function(){var t,e=this;this.originalUseHint=null==(t=this.gm.itemManager)?void 0:t.useHint.bind(this.gm.itemManager),this.gm.itemManager&&(this.gm.itemManager.useHint=function(){1!==e.currentPhase||e.hintUsed||(e.hintUsed=!0,e.originalUseHint(),e.hideOverlay(),e.hidePanel(),e.gm.turnOnInput())})},n.listenForMatchPair=function(){var t=this;this.gm&&this.gm.onMatchPair((function(){1===t.currentPhase&&t.hintUsed&&setTimeout((function(){t.setupOverlay(),t.startPhase2()}),500)}))},n.listenForShuffleUsage=function(){var t,e=this;this.originalUseShuffle=null==(t=this.gm.itemManager)?void 0:t.useShuffle.bind(this.gm.itemManager),this.gm.itemManager&&(this.gm.itemManager.useShuffle=function(){2!==e.currentPhase||e.shuffleUsed||(e.shuffleUsed=!0,null==e.originalUseShuffle||e.originalUseShuffle(),setTimeout((function(){e.end()}),500))})},n.end=function(){var t,e,i,n,s;this.hideOverlay(),this.hidePanel(),null==(t=this.gm)||null==(t=t.itemManager)||t.hideAll(),null==(e=this.gm)||null==(e=e.itemManager)||e.showItem(a.HINT),null==(i=this.gm)||null==(i=i.itemManager)||i.showItem(a.SHUFFLE),null==(n=this.gm.board)||n.resetInput(),null==(s=this.gm)||s.turnOnInput(),this.cleanup(),this.restoreOriginalMethods()},n.restoreOriginalMethods=function(){var t;null!=(t=this.gm)&&t.itemManager&&(this.gm.itemManager.useHint=this.originalUseHint,this.gm.itemManager.useShuffle=this.originalUseShuffle)},n.cleanup=function(){t.prototype.cleanup.call(this),this.restoreOriginalMethods()},i}(s))||r);i._RF.pop()}}}));

System.register("chunks:///_virtual/Tutorial4.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseTutorial.ts","./global.ts","./UImanager.ts"],(function(t){var e,n,i,l,r,u,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator},function(t){l=t.BaseTutorial},function(t){r=t.Popup,u=t.Item},function(t){s=t.UImanager}],execute:function(){var a;n._RF.push({},"67105d55RRKL5OwUYVGbQ+5","Tutorial4",void 0);var o=i.ccclass;t("Level4Tutorial",o("Level4Tutorial")(a=function(t){function n(){for(var e,n=arguments.length,i=new Array(n),l=0;l<n;l++)i[l]=arguments[l];return(e=t.call.apply(t,[this].concat(i))||this).currentPhase=1,e.hintUsed=!1,e.shuffleUsed=!1,e}e(n,t);var i=n.prototype;return i.begin=function(t,e){var n;this.gm=e,this.currentBoard=t,this.resetAllSiblingIndices(t),this.setupOverlay(),s.showPopup(r.ROCKETTUTORIAL,!0,null==(n=this.gm)?void 0:n.currentNumber()),this.gm.turnOffInput()},i.end=function(){var t,e,n,i,l;s.hideAllPopups(),this.hideOverlay(),this.hidePanel(),null==(t=this.gm)||null==(t=t.itemManager)||t.hideAll(),null==(e=this.gm)||null==(e=e.itemManager)||e.showItem(u.HINT),null==(n=this.gm)||null==(n=n.itemManager)||n.showItem(u.SHUFFLE),null==(i=this.gm.board)||i.resetInput(),null==(l=this.gm)||l.turnOnInput(),this.cleanup()},n}(l))||a);n._RF.pop()}}}));

System.register("chunks:///_virtual/Tutorial5.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseTutorial.ts","./global.ts","./UImanager.ts"],(function(t){var e,n,i,l,u,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,i=t._decorator},function(t){l=t.BaseTutorial},function(t){u=t.Popup,r=t.Item},function(t){s=t.UImanager}],execute:function(){var o;n._RF.push({},"7acd0hPo+xLJ6cZmgOhCITe","Tutorial5",void 0);var a=i.ccclass;t("Level5Tutorial",a("Level5Tutorial")(o=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var i=n.prototype;return i.begin=function(t,e){var n;this.gm=e,this.currentBoard=t,this.resetAllSiblingIndices(t),this.setupOverlay(),s.showPopup(u.BOOMTUTORIAL,!0,null==(n=this.gm)?void 0:n.currentNumber()),this.gm.turnOffInput()},i.end=function(){var t,e,n,i,l;s.hideAllPopups(),this.hideOverlay(),this.hidePanel(),null==(t=this.gm)||null==(t=t.itemManager)||t.hideAll(),null==(e=this.gm)||null==(e=e.itemManager)||e.showItem(r.HINT),null==(n=this.gm)||null==(n=n.itemManager)||n.showItem(r.SHUFFLE),null==(i=this.gm.board)||i.resetInput(),null==(l=this.gm)||l.turnOnInput(),this.cleanup()},n}(l))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/Tutorial6.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BaseTutorial.ts","./global.ts"],(function(e){var t,i,s,n,a;return{setters:[function(e){t=e.inheritsLoose},function(e){i=e.cclegacy,s=e._decorator},function(e){n=e.BaseTutorial},function(e){a=e.Item}],execute:function(){var o;i._RF.push({},"9469aIRBvJIOZwzerWHc3k0","Tutorial6",void 0);var r=s.ccclass;e("Level6Tutorial",r("Level6Tutorial")(o=function(e){function i(){for(var t,i=arguments.length,s=new Array(i),n=0;n<i;n++)s[n]=arguments[n];return(t=e.call.apply(e,[this].concat(s))||this).currentPhase=1,t.hintUsed=!1,t.shuffleUsed=!1,t.originalUseBoom=function(){},t.originalUseRocket=function(){},t}t(i,e);var s=i.prototype;return s.begin=function(e,t){this.gm=t,this.currentBoard=e,this.resetAllSiblingIndices(e),this.currentPhase=1,this.hintUsed=!1,this.shuffleUsed=!1,this.setupOverlay(),this.startPhase1(),this.gm.turnOffInput(),this.listenForBoomUsage(),this.listenForRocketUsage()},s.startPhase1=function(){var e,t;this.showPanel("Click to use defuse kit"),null==(e=this.gm.itemManager)||e.hideAll(),null==(t=this.gm.itemManager)||t.showItem(a.BOOM)},s.startPhase2=function(){var e,t;this.currentPhase=2,this.showPanel("Click to use Rocket"),this.gm.turnOffInput(),null==(e=this.gm.itemManager)||e.hideAll(),null==(t=this.gm.itemManager)||t.showItem(a.ROCKET)},s.listenForBoomUsage=function(){var e,t=this;this.originalUseBoom=null==(e=this.gm.itemManager)?void 0:e.useBoom.bind(this.gm.itemManager),this.gm.itemManager&&(this.gm.itemManager.useBoom=function(){1!==t.currentPhase||t.hintUsed||(t.hintUsed=!0,t.originalUseBoom(),t.hideOverlay(),t.hidePanel(),t.setupOverlay(),t.scheduleOnce((function(){t.startPhase2()}),1))},console.log(this.gm.itemManager.useBoom))},s.listenForRocketUsage=function(){var e,t=this;this.originalUseRocket=null==(e=this.gm.itemManager)?void 0:e.useRocket.bind(this.gm.itemManager),this.gm.itemManager&&(this.gm.itemManager.useRocket=function(){2!==t.currentPhase||t.shuffleUsed||(t.shuffleUsed=!0,t.originalUseRocket(),t.end())})},s.end=function(){var e,t;null==(e=this.gm.board)||e.resetInput(),null==(t=this.gm)||t.turnOnInput(),this.cleanup(),this.restoreOriginalMethods(),this.hideOverlay(),this.hidePanel()},s.restoreOriginalMethods=function(){var e;null!=(e=this.gm)&&e.itemManager&&(this.gm.itemManager.useBoom=this.originalUseBoom,this.gm.itemManager.useRocket=this.originalUseRocket)},s.cleanup=function(){e.prototype.cleanup.call(this),this.restoreOriginalMethods()},i}(n))||o);i._RF.pop()}}}));

System.register("chunks:///_virtual/TutorialManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tutorial1.ts","./Tutorial2.ts"],(function(t){var i,r,e,n,a,o,l,u,s,c,h;return{setters:[function(t){i=t.applyDecoratedDescriptor,r=t.inheritsLoose,e=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){a=t.cclegacy,o=t._decorator,l=t.Node,u=t.Label,s=t.Component},function(t){c=t.Level1Tutorial},function(t){h=t.Level2Tutorial}],execute:function(){var p,T,f,d,v,b,y,g,w,m,z,M;a._RF.push({},"64ab0dIORpPUYjVvXqoFKy1","TutorialManager",void 0);var P=o.ccclass,C=o.property;t("TutorialManager",(p=P("TutorialManager"),T=C(l),f=C(l),d=C(u),v=C(l),p(((M=function(t){function i(){for(var i,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return i=t.call.apply(t,[this].concat(a))||this,e(i,"overlay",g,n(i)),e(i,"panel",w,n(i)),e(i,"help",m,n(i)),e(i,"hand",z,n(i)),i.tutorials=new Map,i.currentTutorial=null,i}r(i,t);var a=i.prototype;return a.start=function(){i.instance=this,this.initializeTutorials(),this.hand.active=!1,this.panel.active=!1},a.initializeTutorials=function(){var t=this.node.addComponent(c),i=this.node.addComponent(h);this.setTutorialProperties(t),this.setTutorialProperties(i),this.tutorials.set(1,t),this.tutorials.set(2,i)},a.setTutorialProperties=function(t){t.overlay=this.overlay,t.panel=this.panel,t.help=this.help,t.hand=this.hand},i.showCurrentTutorial=function(t,r,e){!i.instance||t>6||r&&e&&i.instance.startTutorial(t,r,e)},a.startTutorial=function(t,i,r){this.currentTutorial&&this.currentTutorial.end();var e=this.tutorials.get(t);e&&(this.currentTutorial=e,e.begin(i,r))},a.endCurrentTutorial=function(){this.currentTutorial&&(this.currentTutorial.end(),this.currentTutorial=null)},a.showObstacle=function(){this.currentTutorial instanceof c&&this.currentTutorial.showObstacle()},a.showInvalid=function(){this.currentTutorial instanceof c&&this.currentTutorial.showInvalid()},i}(s)).instance=null,g=i((y=M).prototype,"overlay",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(y.prototype,"panel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(y.prototype,"help",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(y.prototype,"hand",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=y))||b));a._RF.pop()}}}));

System.register("chunks:///_virtual/type.ts",["cc"],(function(e){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){var n;e("TileConnect",void 0),t._RF.push({},"b1d490w25hJl6tzYD9F8pgq","type",void 0),(n||(n=e("TileConnect",{}))).GAME_EVENTS={START_COUNTDOWN:"star-countdown",COUNTDOWN_COMPLETE:"countdown-complete",GAME_OVER:"game-over",LEVEL_WIN:"level-win",COUNTDOWN_RESET:"countdown-reset"},t._RF.pop()}}}));

System.register("chunks:///_virtual/UImanager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./basePopup.ts","./SoundManager.ts","./LevelLoader.ts"],(function(e){var t,n,o,i,r,a,s,u,l,p,c,g,f,d,h,m,b,v,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,o=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,s=e.Node,u=e.view,l=e.Widget,p=e.Vec3,c=e.tween,g=e.resources,f=e.SpriteFrame,d=e.Sprite,h=e.Component},function(e){m=e.Popup},function(e){b=e.BasePopup},function(e){v=e.SoundManager},function(e){w=e.LevelLoader}],execute:function(){var C,y,B,P,z,A,F,O,N,I,S,T,M,L,D,U,V,H,k,_,E,R;r._RF.push({},"306aehmDdVK9KkrxQbG4DJr","UImanager",void 0);var j=a.ccclass,x=a.property;e("UImanager",(C=j("UImanager"),y=x(s),B=x(s),P=x(s),z=x(s),A=x(s),F=x(s),O=x(s),N=x(s),I=x(s),C(((R=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,o(t,"top",M,i(t)),o(t,"bot",L,i(t)),o(t,"overlay",D,i(t)),o(t,"itembar",U,i(t)),t.popupNodes=new Map,t.popupComponents=new Map,o(t,"pauseButton",V,i(t)),o(t,"progressBar",H,i(t)),o(t,"soundButton",k,i(t)),o(t,"musicButton",_,i(t)),o(t,"vibrateButton",E,i(t)),t}n(t,e);var r=t.prototype;return r.start=function(){t.instance=this,this.cachePopupNodes(),this.hideAllPopups(),this.resize(),u.on("canvas-resize",this.resize,this)},r.resize=function(){var e,t,n,o,i,r=u.getVisibleSize(),a=null==(e=this.itembar)?void 0:e.getComponent(l);a&&(r.width>=r.height?(1!=w.getInstance().getCurrentLevelNumber()&&(this.bot.active=!1),null==(t=this.top)||t.addChild(this.itembar),null==(n=this.progressBar)||n.setScale(new p(1,1)),a.target=this.top,a.isAlignRight=!0,a.right=100,a.isAlignVerticalCenter=!0,a.verticalCenter=10):(1!=w.getInstance().getCurrentLevelNumber()&&(this.bot.active=!0),null==(o=this.bot)||o.addChild(this.itembar),null==(i=this.progressBar)||i.setScale(new p(r.width/800,r.width/800)),a.target=this.bot,a.isAlignHorizontalCenter=!0,a.horizontalCenter=0,a.isAlignVerticalCenter=!0,a.verticalCenter=40))},t.togglePauseButton=function(e){},r.hideAllPopups=function(){var e=this;t.instance.overlay.active=!1,this.popupNodes.forEach((function(t,n){var o=e.popupComponents.get(n);o&&t.active&&o.onPopupHide(),t.active=!1}))},t.showPopup=function(e,n,o){if(void 0===n&&(n=!0),t.instance){n&&t.instance.hideAllPopups(),console.log(e);var i=t.instance.popupNodes.get(e),r=t.instance.popupComponents.get(e);i?(t.instance.overlay.active=!0,i.active=!0,i.scale=new p(0,0,1),c(i).to(.3,{scale:new p(1,1,1)},{easing:"backOut"}).start(),r&&r.onPopupShow(o)):console.warn("Popup not found: "+e)}else console.warn("UIManager instance not found!")},t.hidePopup=function(e){if(t.instance){var n=t.instance.popupNodes.get(e),o=t.instance.popupComponents.get(e);n&&n.active&&c(n).delay(.15).to(.3,{scale:new p(0,0,1)},{easing:"backOut"}).call((function(){t.instance.overlay.active=!1,o&&o.onPopupHide()})).start()}else console.warn("UIManager instance not found!")},t.hideAllPopups=function(){t.instance?(t.instance.hideAllPopups(),console.log("Hidden all popups")):console.warn("UIManager instance not found!")},r.cachePopupNodes=function(){var e=this;Object.values(m).forEach((function(t){var n=e.node.getChildByName(t);if(n){e.popupNodes.set(t,n);var o=n.getComponent(b);o&&(e.popupComponents.set(t,o),console.log("Cached popup component: "+t)),console.log("Cached popup: "+t)}else console.warn("Popup node not found: "+t)}))},r.onDestroy=function(){this.popupComponents.forEach((function(e,t){e&&e.onPopupDestroy()}))},r.ToggleSound=function(){if(v.instance.soundOn=!v.instance.soundOn,v.instance.soundOn){var e=g.get("AllTiles/sound-on/spriteFrame",f);this.soundButton.getComponent(d).spriteFrame=e}else{var t=g.get("AllTiles/sound-off/spriteFrame",f);this.soundButton.getComponent(d).spriteFrame=t}},r.ToggleMusic=function(){if(v.instance.musicOn=!v.instance.musicOn,v.instance.musicOn){var e=g.get("AllTiles/music-on/spriteFrame",f);this.musicButton.getComponent(d).spriteFrame=e}else{var t=g.get("AllTiles/music-off/spriteFrame",f);this.musicButton.getComponent(d).spriteFrame=t}},r.ToggleVibration=function(){if(v.instance.vibrateOn=!v.instance.vibrateOn,v.instance.vibrateOn){var e=g.get("AllTiles/vibrate-on/spriteFrame",f);this.vibrateButton.getComponent(d).spriteFrame=e}else{var t=g.get("AllTiles/vibrate-off/spriteFrame",f);this.vibrateButton.getComponent(d).spriteFrame=t}},t}(h)).instance=null,M=t((T=R).prototype,"top",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(T.prototype,"bot",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(T.prototype,"overlay",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(T.prototype,"itembar",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(T.prototype,"pauseButton",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(T.prototype,"progressBar",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(T.prototype,"soundButton",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(T.prototype,"musicButton",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(T.prototype,"vibrateButton",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=T))||S));r._RF.pop()}}}));

System.register("chunks:///_virtual/victoryPopup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./basePopup.ts","./SoundManager.ts","./global.ts"],(function(e){var t,n,a,i,r,l,o,s,c,u,p,g,h,f,v,y,d;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,o=e.Label,s=e.Node,c=e.Sprite,u=e.Button,p=e.Vec3,g=e.tween,h=e.ParticleSystem2D,f=e.Tween},function(e){v=e.BasePopup},function(e){y=e.SoundManager},function(e){d=e.SFX}],execute:function(){var w,S,m,b,C,B,A,N,E,I,O,P,z;r._RF.push({},"5529e6jOhZOXIn3Hd8ylniS","victoryPopup",void 0);var F=l.ccclass,L=l.property;e("Victory",(w=F("Victory"),S=L(o),m=L([s]),b=L(c),C=L(c),B=L(u),w((E=t((N=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,a(t,"level",E,i(t)),a(t,"stars",I,i(t)),a(t,"ribbon",O,i(t)),a(t,"glow",P,i(t)),a(t,"continue",z,i(t)),t}n(t,e);var r=t.prototype;return r.onPopupShow=function(e){var t=this;this.resetAura(),this.popStar((function(){t.dropAllStars((function(){t.trailStar(),t.playAura(),t.glow.node.active=!0,t.repeatStar(),t.playJiggle(),t.playLevel((function(){}),e),t.playContinue()}))}))},r.playLevel=function(e,t){this.level.string="LEVEL "+t,this.level.node.active=!0,this.level.node.scale=new p(0,0,1),g(this.level.node).to(.2,{scale:new p(1,1,1)},{}).call((function(){e()})).start()},r.playContinue=function(e){this.continue.node.active=!0,this.continue.node.scale=new p(0,0,1),g(this.continue.node).to(.05,{scale:new p(1,1,1)},{}).start()},r.playAura=function(){this.stars.forEach((function(e){var t,n,a,i=e.getChildByName("MainAura");i&&(i.active=!0,null==(t=i.getChildByName("Aura"))||null==(t=t.getComponent(h))||t.resetSystem(),null==(n=i.getChildByName("Aura2"))||null==(n=n.getComponent(h))||n.resetSystem(),null==(a=i.getChildByName("Aura1"))||null==(a=a.getComponent(h))||a.resetSystem(),console.log(i))}))},r.resetAura=function(){var e=this;this.level.string="",this.stars.forEach((function(t){var n=t.getChildByName("MainAura");n&&(n.active=!1),e.glow.node.active=!1;var a=t.getChildByName("Star"),i=null==a?void 0:a.getChildByName("Trail");i&&(i.active=!1)}))},r.playJiggle=function(e){g(this.ribbon.node).to(.08,{scale:new p(1.09,.98,1)}).to(.08,{scale:new p(.98,1.09,1)}).to(.08,{scale:new p(1,1,1)}).call((function(){e&&e()})).start()},r.popStar=function(e){var t=this;y.instance.playSFX(d.THREE_STAR),this.stars.forEach((function(e){var t=e.getChildByName("Star");t&&(f.stopAllByTarget(t),t.setScale(0,0,1),t.active=!0)}));var n=0;this.stars.slice().reverse().forEach((function(a,i){var r=a.getChildByName("Star"),l=.225*(1-.2*i);r&&g(r).delay(l).to(.45,{scale:new p(2.5,2.5,1)}).call((function(){++n===t.stars.length&&e&&e()})).start()}))},r.trailStar=function(){this.stars.forEach((function(e){var t=e.getChildByName("Star"),n=null==t?void 0:t.getChildByName("Trail");n&&(n.active=!0)}))},r.dropAllStars=function(e){var t=this;this.stars.forEach((function(n,a){var i=n.getChildByName("Star");i&&g(i).to(.1,{scale:new p(1.2,1.2,1)}).call((function(){a===t.stars.length-1&&e&&e()})).start()}))},r.repeatStar=function(){this.stars.forEach((function(e,t){var n=e.getChildByName("Star");n&&0==t?g(n).parallel(g().to(1.4,{scale:new p(1.2,1.2,1)},{easing:"sineInOut"}).to(1.4,{scale:new p(1.3,1.3,1)},{easing:"sineInOut"}),g().to(1.7,{angle:2}).to(1.5,{angle:5})).repeatForever().start():n&&1==t?g(n).parallel(g().to(1.4,{scale:new p(1.2,1.2,1)},{easing:"sineInOut"}).to(1.4,{scale:new p(1.3,1.3,1)},{easing:"sineInOut"}),g().to(1.7,{angle:0}).to(1.5,{angle:0})).repeatForever().start():n&&2==t&&g(n).parallel(g().to(1.4,{scale:new p(1.2,1.2,1)},{easing:"sineInOut"}).to(1.4,{scale:new p(1.3,1.3,1)},{easing:"sineInOut"}),g().to(1.7,{angle:-2}).to(1.5,{angle:-5})).repeatForever().start()}))},t}(v)).prototype,"level",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I=t(N.prototype,"stars",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),O=t(N.prototype,"ribbon",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=t(N.prototype,"glow",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(N.prototype,"continue",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=N))||A));r._RF.pop()}}}));

System.register("chunks:///_virtual/WinTurn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./global.ts","./UImanager.ts","./BaseTurn.ts","./AnimationHandler.ts","./LevelLoader.ts","./SoundManager.ts"],(function(n){var t,e,a,i,o,r,s,u,l,c,f;return{setters:[function(n){t=n.inheritsLoose},function(n){e=n.cclegacy,a=n.find,i=n.tween},function(n){o=n.SFX,r=n.Popup},function(n){s=n.UImanager},function(n){u=n.BaseTurn},function(n){l=n.AnimationHandler},function(n){c=n.LevelLoader},function(n){f=n.SoundManager}],execute:function(){e._RF.push({},"a99a1BvIGtDzZ+e6hcZIVzB","WinTurn",void 0);n("WinTurn",function(n){function e(){return n.apply(this,arguments)||this}t(e,n);var u=e.prototype;return u.onEnter=function(){var n=this;this.game.isgameOver=!0,Promise.all(l.animList).then((function(){var t,e;(s.togglePauseButton(!1),0==(null==(t=l.fillProgressBar)?void 0:t.isLastStar()))&&(console.log("hi"),null==(e=l.fillProgressBar)||e.updateTillWin());var u=a("Canvas/Top/Timer");if(u){var m=u.getChildByName("clock");if(m){var g=m.getWorldPosition();n.game.starPool&&n.startStarAnimation(g,n.game.starPool)}}var p=n.game.time;i({time:p}).to(2,{time:0},{onUpdate:function(t){t&&(n.game.time=Math.max(0,t.time))}}).delay(.2).call((function(){n.game.conf.forEach((function(n){n.emit()})),f.instance.playSFX(o.LEVELCOMPLETE),s.showPopup(r.WINPOPUP,!0,c.getInstance().getCurrentLevelNumber())})).start()}))},u.startStarAnimation=function(n,t){for(var e=0;e<10;e++)i({}).delay(.2*e).call((function(){var e=t.getFirstItem();e&&e.winPut(n)})).start()},u.onExit=function(){f.instance.stopSFX(o.LEVELCOMPLETE)},u.onUpdate=function(){},e}(u));e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});